

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Searching for specific star systems in BPASS using EvE &mdash; hoki v1.7.1 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="_static/favicon.png"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Colour Magnitude Diagrams" href="CMDs.html" />
    <link rel="prev" title="SED fitting of a data cube" href="Fitting_SEDs_of_a_data_cube_with_BPASS-hoki-ppxf.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #FFA428" >
          

          
            <a href="index.html" class="icon icon-home"> hoki
          

          
            
            <img src="_static/hoki_white.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="intro.html">What is Hoki?</a></li>
<li class="toctree-l1"><a class="reference internal" href="citation.html"><strong>Citing Us</strong></a></li>
</ul>
<p class="caption"><span class="caption-text">Model Outputs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="quick_start.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="Transient_rates.html">Transient rates</a></li>
<li class="toctree-l1"><a class="reference internal" href="HR_diagrams.html">HR diagrams</a></li>
<li class="toctree-l1"><a class="reference internal" href="Spectra.html">Spectra</a></li>
</ul>
<p class="caption"><span class="caption-text">SED Fitting</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="sedfitting.html">SED fiting with BPASS and hoki</a></li>
<li class="toctree-l1"><a class="reference internal" href="Voronoi_binning_of_SED_data.html">Vornoi Binning and retrieveing SEDs of the binned data</a></li>
<li class="toctree-l1"><a class="reference internal" href="Fitting_the_region_around_the_transient.html">SED fitting of a transient neighbourhood</a></li>
<li class="toctree-l1"><a class="reference internal" href="Fitting_SEDs_of_a_data_cube_with_BPASS-hoki-ppxf.html">SED fitting of a data cube</a></li>
</ul>
<p class="caption"><span class="caption-text">Searching BPASS</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Searching for specific star systems in BPASS using EvE</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Initial-imports-and-EvE.hdf5-structure">Initial imports and EvE.hdf5 structure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#The-tables-in-EvE-and-key-BPASS-definitions">The tables in EvE and key BPASS definitions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ID_TABLE"><code class="docutils literal notranslate"><span class="pre">ID_TABLE</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#The-SUMMARY-table-(and-some-needed-BPASS-hoki-concepts)">The <code class="docutils literal notranslate"><span class="pre">SUMMARY</span></code> table (and some needed BPASS-hoki concepts)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#The-CEE-and-MT-tables">The <code class="docutils literal notranslate"><span class="pre">CEE</span></code> and <code class="docutils literal notranslate"><span class="pre">MT</span></code> tables</a></li>
<li class="toctree-l2"><a class="reference internal" href="#The-DEATH-table">The <code class="docutils literal notranslate"><span class="pre">DEATH</span></code> table</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Use-case:-Searching-for-a-super-luminous-supernova-progenitor">Use-case: Searching for a super-luminous supernova progenitor</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#Selecting-our-desired-models">Selecting our desired models</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Finding-CCSNe-and-Ibc-(general)">Finding CCSNe and Ibc (general)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Matching-ejecta-mass-and-remnant-mass">Matching ejecta mass and remnant mass</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#Specific-Angular-momentum-(gotta-go-fast-to-make-a-pulsar!)">Specific Angular momentum (gotta go fast to make a pulsar!)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Let’s-explore-the-BPASS-models!">Let’s explore the BPASS models!</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#Most-likely-masses-(by-N_imf)">Most likely masses (by N_imf)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Looking-at-individual-models.">Looking at individual models.</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Preserve-your-results-with-pickle!">Preserve your results with pickle!</a></li>
<li class="toctree-l3"><a class="reference internal" href="#If-you-have-a-question-or-a-complain…">If you have a question or a complain…</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Misc Recipes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="CMDs.html">Colour Magnitude Diagrams</a></li>
<li class="toctree-l1"><a class="reference internal" href="ComplexStellarPopulations.html">Complex Stellar Histories</a></li>
<li class="toctree-l1"><a class="reference internal" href="AgeWizard.html">Age Wizard</a></li>
<li class="toctree-l1"><a class="reference internal" href="ModelDataCompiler.html">Model Data Compiler</a></li>
<li class="toctree-l1"><a class="reference internal" href="ModelSearch.html">Complex Model Search</a></li>
</ul>
<p class="caption"><span class="caption-text">Full Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="manual.html"><strong>Dependencies</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="manual.html#module-hoki.cmd"><strong>hoki.cmd</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="manual.html#hoki-constants"><strong>hoki.constants</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="manual.html#module-hoki.eve"><strong>hoki.eve</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="manual.html#module-hoki.load"><strong>hoki.load</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="manual.html#module-hoki.hrdiagrams"><strong>hoki.hrdiagrams</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="manual.html#module-hoki.age.wizard"><strong>hoki.age</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="manual.html#module-hoki.csp.csp"><strong>hoki.csp</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="manual.html#hoki-sedfitting"><strong>hoki.sedfitting</strong></a></li>
</ul>
<p class="caption"><span class="caption-text">GITHUB LINKS</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/HeloiseS/hoki">Hoki</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/HeloiseS/hoki_tutorials">Notebooks</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">hoki</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Searching for specific star systems in BPASS using EvE</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/MIAPBP_EvE_tutorial.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="Searching-for-specific-star-systems-in-BPASS-using-EvE">
<h1>Searching for specific star systems in BPASS using EvE<a class="headerlink" href="#Searching-for-specific-star-systems-in-BPASS-using-EvE" title="Permalink to this headline">¶</a></h1>
<p>This jupyter notebook is an introduction to the EvE (Evolution Explorer) database that I created for myself to make searching for specific star systems in the BPASS stellar library easier and faster.</p>
<p>The BPASS stellar library is a collection of &gt;250,000 text files, each corresponding to a given star system simulated in BPASS. These textfiles contain a table that summarises the evolution of that star system, recording physical and observed properties (e.g. Luminosity, Temperature, Radii, but also UBVRI and other broad band magnitudes).</p>
<p>So what is the point of EvE? Well say you’re looking for the progenitor of a Luminous Red Nova, the explosion from a common envelope expulsion (or merger as a result of a common envelope), even if you have a good idea of the specific metallicity you want to look at (and therefore can focus on 1/13th of the models in the stellar library, because there are 13 metallicities in BPASS), you’ll still need to paruse tens of thousands of files, looking through each of them to check which ones go through
a common envelope, then looking through those for parameters that fit your pre-explosion images. It’s not all that hard, but it takes a bit of time and if you look for transient progenitors regularly (or other star systems) you end up doing this over and over again. But there’s no point! the models are pre-calculated, why don’t we have some nice look up tables that summarise some key properties so we can discard all the models that we know we don’t care about and then open up the ones we are
interested in.</p>
<p>In this tutorial we’re going to be looking for an arbitrary (as in with properties I chose) super-luminous supernova. Once we’ve found our favourite potential progenitors we will explore their life by looking through their corresponding files in the BPASS stellar library.</p>
<p><strong>To do this tutorial you will need:</strong> * <strong>The BPASS stellar library</strong>. It’s about 8GB to download and 50GB (yes, of text files) once it is unzipped. You can find the data you need from a diet version of the BPASSv2.2.1 I created called the BPASS starter kit. I have put it on zenodo for your convenience. May the god of fast internet speeds be with you. <a class="reference external" href="https://doi.org/10.5281/zenodo.7341382"><img alt="DOI" src="https://zenodo.org/badge/DOI/10.5281/zenodo.7341382.svg" /></a></p>
<ul class="simple">
<li><p><strong>The EvE data base [only download the .hdf5 file]</strong>. I have put the alpha version on zenodo as well. The reason it is called the alpha version is that there are things that could do with being ironed out. Turns out that computationally exploring a bunch of tables is harder than it might seem when you’re trying to summaries physical properties from simulations of physics that is…. challenging. For example <strong>don’t use the main sequen lifetime column wihtout caution</strong>. It’s hard to define the
end of the Main Sequence when you’re looking at models. Also note that you don’t need the fortran code that is in this release - it’s only there so that if someone finds a weird behaviour in the library they can check my code to find the inevitable silent bugs (or poor choices) that lie within it. <a class="reference external" href="https://doi.org/10.5281/zenodo.7341382"><img alt="DOI" src="https://zenodo.org/badge/DOI/10.5281/zenodo.7341382.svg" /></a></p></li>
<li><p><strong>My code hoki v1.7 and above</strong>. The reason you need this current version is that it contains the Eve class that helps you not even have to rummage throuhg the EvE.hdf5 files itself. Off course you could just go through EvE with pandas but that’s not what we’re doing here.</p></li>
</ul>
<p><strong>If you have a question or a complain</strong> start an issue on the <a class="reference external" href="https://github.com/HeloiseS/hoki">hoki</a> github or send me an e-mail (<a class="reference external" href="mailto:hfstevance&#37;&#52;&#48;gmail&#46;com">hfstevance<span>&#64;</span>gmail<span>&#46;</span>com</a>). I will do my best to help whilst I am still in science. If future me has left science, she might still be willing to help so it’s worth giving the e-mail a try.</p>
<p>Let’s go!</p>
<div class="section" id="Initial-imports-and-EvE.hdf5-structure">
<h2>Initial imports and EvE.hdf5 structure<a class="headerlink" href="#Initial-imports-and-EvE.hdf5-structure" title="Permalink to this headline">¶</a></h2>
<p>We will need some standard python libraries. Pandas is my favourite way to deal with tables and that is why it’s all over hoki and it is what the EvE.hdf5 file is made of. Let’s talk about the EvE.hdf5 structure to help you understand what we’ll be digging into.</p>
<p><strong>[The ``EvE.hdf5`` file structure]</strong></p>
<p>In my EvE.hdf5 each group is one of BPASS metallicities. If you don’t remember the BPASS metallicities and specifically what strings we like to use to name them, you can use the <code class="docutils literal notranslate"><span class="pre">hoki.constants</span></code> module to help you</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">hoki</span> <span class="kn">import</span> <span class="n">constants</span> <span class="k">as</span> <span class="n">hc</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">hc</span><span class="o">.</span><span class="n">BPASS_METALLICITIES</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&#39;zem5&#39;,
 &#39;zem4&#39;,
 &#39;z001&#39;,
 &#39;z002&#39;,
 &#39;z003&#39;,
 &#39;z004&#39;,
 &#39;z006&#39;,
 &#39;z008&#39;,
 &#39;z010&#39;,
 &#39;z014&#39;,
 &#39;z020&#39;,
 &#39;z030&#39;,
 &#39;z040&#39;]
</pre></div></div>
</div>
<p><strong>[! TIP !]:</strong><em>in ``hoki v1.7.2`` I’ve added extra docs (amongst other things). You can then call ``hc?`` or ``hoki.constants?`` (depending on how you imported the module) and get a list of the constants in that module and a description.</em></p>
<p>So there are <strong>13 groups in EvE.hdf5</strong> each corresponding to a <strong>BPASS metallicity</strong>. Then each group contains the same tables (and we will look at those in just a second). <strong>Each of these tables is a pandas dataframe contained within a dataset</strong> of the hdf5 file. Now for those who work with hdf5 file you would be right to ask why not have sub-groups for each table and then each column in a dataset. And the answer to that is I like working with my pandas dataframes and I didn’t see the point in
undoing them and redoing them again. It’s not the most data efficient thing but we’re not dealing with large volumes here.</p>
<p><strong>[The ``hoki.eve.Eve`` class]</strong></p>
<p>In most cases you are only looking through one metallicity at a time. I’ve created a very basic <code class="docutils literal notranslate"><span class="pre">Eve</span></code> class in <code class="docutils literal notranslate"><span class="pre">hoki</span></code> that reads in each of the table for a given metallicity, mostly to minimise how much copy pasting I had to do. The nifty thing about having this as a stand alone object though is that it gives you a lot of nice flexibility to mess with the data to your hearts content, add your own tables, and then save that object so that your hard work is easy to load later on without having
to retrace your steps. We’ll see a few examples of how I use this and I’ll show you how to pickle and load your Eve objects so that you can share your work with your future self and your colleagues.</p>
<p><strong>[The imports]</strong></p>
<p>Like I said we’re going to use and abuse pandas, we’ll need numpy and matplotlib, the hoki.eve module but also some of the tools in <code class="docutils literal notranslate"><span class="pre">hoki.load</span></code> which will come in useful futher into the tutorial. The style sheet is the same as the one in all the other <a class="reference external" href="https://github.com/HeloiseS/hoki_tutorials">hoki tutorials</a></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">hoki.load</span> <span class="kn">import</span> <span class="n">dummy_manual</span><span class="p">,</span> <span class="n">dummy_to_dataframe</span><span class="p">,</span> <span class="n">MODELS_PATH</span>
<span class="kn">from</span> <span class="nn">hoki.eve</span> <span class="kn">import</span> <span class="n">Eve</span>

<span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">&#39;tuto.mplstyle&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Let’s instanciate our <code class="docutils literal notranslate"><span class="pre">Eve</span></code> object. We’ll need to specific a BPASS metallicity (must be contained in <code class="docutils literal notranslate"><span class="pre">hc.BPASS_METALLICITIES</span></code> above), the location of our hdf5 file, and if we want we can give a name to identify which project we are working on. This is an optional parameter (default None).</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">eve</span> <span class="o">=</span> <span class="n">Eve</span><span class="p">(</span><span class="n">met</span><span class="o">=</span><span class="s1">&#39;z006&#39;</span><span class="p">,</span>             <span class="c1"># the metallicity string</span>
          <span class="n">eve_path</span><span class="o">=</span><span class="s1">&#39;./EvE.hdf5&#39;</span><span class="p">,</span>  <span class="c1"># the location of the EvE.hdf5 file you downloaded</span>
          <span class="n">name</span><span class="o">=</span><span class="s1">&#39;BLA&#39;</span><span class="p">)</span>             <span class="c1"># an identifier for your project (optional)</span>
</pre></div>
</div>
</div>
<p>So what tables have we made here? If you want a summary of the SCHEMA you can just summon the object you’ve instanciated</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">eve</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;class &#39;hoki.eve.Eve&#39;&gt;
METALICITY: z006

PROJECT NAME:   BLA

--------- SCHEMA -------

ID_TABLE
[&#39;filenames&#39;]

SUMMARY
[&#39;M1_ZAMS&#39; &#39;M2_ZAMS&#39; &#39;P_ZAMS&#39; &#39;lifetime_MS&#39; &#39;MT_bool&#39; &#39;CEE_bool&#39; &#39;AGE_end&#39;
 &#39;M1_end&#39; &#39;M2_end&#39; &#39;P_end&#39; &#39;modelimf&#39; &#39;mixedimf&#39; &#39;type&#39;]

CEE
[&#39;TIMESTEP_start&#39; &#39;AGE_start&#39; &#39;M1_start&#39; &#39;M2_start&#39; &#39;P_start&#39; &#39;LOGA_start&#39;
 &#39;TIMESTEP_end&#39; &#39;AGE_end&#39; &#39;M1_end&#39; &#39;M2_end&#39; &#39;P_end&#39; &#39;LOGA_end&#39;
 &#39;avgDM1R_msolpyr&#39; &#39;avgDM2R_msolpyr&#39; &#39;avgDM1W_msolpyr&#39; &#39;avgDM2W_msolpyr&#39;
 &#39;CASE&#39;]

MT
[&#39;TIMESTEP_start&#39; &#39;AGE_start&#39; &#39;M1_start&#39; &#39;M2_start&#39; &#39;P_start&#39; &#39;LOGA_start&#39;
 &#39;TIMESTEP_end&#39; &#39;AGE_end&#39; &#39;M1_end&#39; &#39;M2_end&#39; &#39;P_end&#39; &#39;LOGA_end&#39;
 &#39;avgDM1R_msolpyr&#39; &#39;avgDM2R_msolpyr&#39; &#39;avgDM1W_msolpyr&#39; &#39;avgDM2W_msolpyr&#39;
 &#39;CASE&#39;]

DEATH
[&#39;timestep&#39; &#39;age&#39; &#39;log(R1)&#39; &#39;log(T1)&#39; &#39;log(L1)&#39; &#39;M1&#39; &#39;He_core1&#39; &#39;CO_core1&#39;
 &#39;ONe_core1&#39; &#39;Nan9&#39; &#39;X&#39; &#39;Y&#39; &#39;C&#39; &#39;N&#39; &#39;O&#39; &#39;Ne&#39; &#39;MH1&#39; &#39;MHe1&#39; &#39;MC1&#39; &#39;MN1&#39;
 &#39;MO1&#39; &#39;MNe1&#39; &#39;MMg1&#39; &#39;MSi1&#39; &#39;MFe1&#39; &#39;envelope_binding_E&#39; &#39;star_binding_E&#39;
 &#39;Mrem_weakSN&#39; &#39;Mej_weakSN&#39; &#39;Mrem_SN&#39; &#39;Mej_SN&#39; &#39;Mrem_superSN&#39;
 &#39;Mej_superSN&#39; &#39;AM_bin&#39; &#39;P_bin&#39; &#39;log(a)&#39; &#39;Nan36&#39; &#39;M2&#39; &#39;MTOT&#39; &#39;DM1W&#39; &#39;DM2W&#39;
 &#39;DM1A&#39; &#39;DM2A&#39; &#39;DM1R&#39; &#39;DM2R&#39; &#39;DAM&#39; &#39;log(R2)&#39; &#39;log(T2)&#39; &#39;log(L2)&#39; &#39;?&#39;
 &#39;modelimf&#39; &#39;mixedimf&#39; &#39;V-I&#39; &#39;U&#39; &#39;B&#39; &#39;V&#39; &#39;R&#39; &#39;I&#39; &#39;J&#39;]

</pre></div></div>
</div>
<hr class="docutils" />
<div class="section" id="The-tables-in-EvE-and-key-BPASS-definitions">
<h3>The tables in EvE and key BPASS definitions<a class="headerlink" href="#The-tables-in-EvE-and-key-BPASS-definitions" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="ID_TABLE">
<h2><code class="docutils literal notranslate"><span class="pre">ID_TABLE</span></code><a class="headerlink" href="#ID_TABLE" title="Permalink to this headline">¶</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">eve</span><span class="o">.</span><span class="n">ID_TABLE</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>filenames</th>
    </tr>
    <tr>
      <th>MODEL_ID</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>160756</th>
      <td>NEWSINMODS/z006/sneplot-z006-1.1</td>
    </tr>
    <tr>
      <th>160757</th>
      <td>NEWSINMODS/z006/sneplot-z006-1</td>
    </tr>
    <tr>
      <th>160758</th>
      <td>NEWSINMODS/z006/sneplot-z006-0.9</td>
    </tr>
    <tr>
      <th>160759</th>
      <td>NEWSINMODS/z006/sneplot-z006-0.8</td>
    </tr>
    <tr>
      <th>160760</th>
      <td>NEWSINMODS/z006/sneplot-z006-0.6</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>As you can see above this relates the <code class="docutils literal notranslate"><span class="pre">MODEL_ID</span></code> and <code class="docutils literal notranslate"><span class="pre">filenames</span></code> properties. The <code class="docutils literal notranslate"><span class="pre">filenames</span></code> are the paths to a specific stellar system within the BPASS stellar library. These filenames are themselves unique identifiers of the models, but the problem is that if you’re not working in FORTRAN using strings as unique identifiers is <strong>VERY TIME CONSUMING</strong>, e.g. if you want to check that a list of 300 models is (or is not) comprised in another list of 15,000 models. If all of those are strings
it will take orders of magnitudes longer than if you use integers.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">MODEL_ID</span></code> are these integers that are also unique identifiers of each model (unique across all 13 metallicities). <strong>In general we use the ``MODEL_ID`` to do model selection within our pandas dataframes (see below), then when we want to open a specific model in the BPASS stellar library we go fetch the file name string to load it in.</strong></p>
<p><strong>[? Q: WHAT MAKES A MODEL UNIQUE ?]</strong><em>Models are calculated on a of Mass of the primary, mass ratio and period (for binaries), and metallicity. Within a given metallicity, each model as a unique combintation of (M1, M2, P) at age=0 (which may be ZAMS or the age at rejuvination).</em></p>
</div>
<div class="section" id="The-SUMMARY-table-(and-some-needed-BPASS-hoki-concepts)">
<h2>The <code class="docutils literal notranslate"><span class="pre">SUMMARY</span></code> table (and some needed BPASS-hoki concepts)<a class="headerlink" href="#The-SUMMARY-table-(and-some-needed-BPASS-hoki-concepts)" title="Permalink to this headline">¶</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[68]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">eve</span><span class="o">.</span><span class="n">SUMMARY</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[68]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>M1_ZAMS</th>
      <th>M2_ZAMS</th>
      <th>P_ZAMS</th>
      <th>lifetime_MS</th>
      <th>MT_bool</th>
      <th>CEE_bool</th>
      <th>AGE_end</th>
      <th>M1_end</th>
      <th>M2_end</th>
      <th>P_end</th>
      <th>modelimf</th>
      <th>mixedimf</th>
      <th>type</th>
    </tr>
    <tr>
      <th>MODEL_ID</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>139237</th>
      <td>65.0</td>
      <td>1.0</td>
      <td>39090200.0</td>
      <td>3321112.0</td>
      <td>0</td>
      <td>0</td>
      <td>4002222.0</td>
      <td>19.94971</td>
      <td>1.0</td>
      <td>0.3879680E+09</td>
      <td>0.077866</td>
      <td>0.0</td>
      <td>-1</td>
    </tr>
    <tr>
      <th>139238</th>
      <td>64.0</td>
      <td>1.0</td>
      <td>39389750.0</td>
      <td>3355019.0</td>
      <td>0</td>
      <td>0</td>
      <td>4033544.0</td>
      <td>19.77729</td>
      <td>1.0</td>
      <td>0.3855040E+09</td>
      <td>0.080755</td>
      <td>0.0</td>
      <td>-1</td>
    </tr>
    <tr>
      <th>139239</th>
      <td>63.0</td>
      <td>1.0</td>
      <td>39696290.0</td>
      <td>3390314.0</td>
      <td>0</td>
      <td>0</td>
      <td>4065838.0</td>
      <td>19.62953</td>
      <td>1.0</td>
      <td>0.3820573E+09</td>
      <td>0.083800</td>
      <td>0.0</td>
      <td>-1</td>
    </tr>
    <tr>
      <th>139240</th>
      <td>62.0</td>
      <td>1.0</td>
      <td>40010100.0</td>
      <td>3406536.0</td>
      <td>0</td>
      <td>0</td>
      <td>4099226.0</td>
      <td>19.50653</td>
      <td>1.0</td>
      <td>0.3776276E+09</td>
      <td>0.087011</td>
      <td>0.0</td>
      <td>-1</td>
    </tr>
    <tr>
      <th>139241</th>
      <td>61.0</td>
      <td>1.0</td>
      <td>40331470.0</td>
      <td>3444347.0</td>
      <td>0</td>
      <td>0</td>
      <td>4133877.0</td>
      <td>19.39798</td>
      <td>1.0</td>
      <td>0.3726069E+09</td>
      <td>0.090400</td>
      <td>0.0</td>
      <td>-1</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>This table summarises information <strong>from both the stellar library and the population synthesis</strong>. EvE.hdf5 was created with the pop. synth from <strong>the fiducial models</strong> so if you want to use a different IMF you can’t use EvE.hdf5 and have to do things the old fashioned way (which usually means contacting one of the BPASS team members).</p>
<p>In <code class="docutils literal notranslate"><span class="pre">SUMMARY</span></code> you will find some basic info about the initial state of the models such as the mass of the primary and secondary at birth, their separation. <strong>Note that single stars will have values in the M2_ZAMS and P_ZAMS</strong> columns but they are obviously nonesensical placeholders. In a future version I should replace those with <code class="docutils literal notranslate"><span class="pre">np.NaN</span></code>, but there is a much <strong>simpler way to know whether a model is a single star or a binary</strong>.</p>
<p>One of the columns in <code class="docutils literal notranslate"><span class="pre">SUMMARY</span></code> is <code class="docutils literal notranslate"><span class="pre">type</span></code>. This contains the BPASS type of this specific models, here are the options: * -1: Single star (pure single star from birth) * 0: Merger has occured * 1: Primary model (see below) * 2: Secondary model (see below) * 3: Secondary Single secondary star (after first star has died) * 4: Quasi-homogenous evolution (only for low metallicities - see Eldridge et al. 2017 for details)</p>
<p><strong>[Primary models Vs Secondary models]</strong></p>
<p>In BPASS v2 the models are detailed… but only for one star at a time. The other star is evolved more similarly to what happens in a rapid code (again, check the instrument paper <a class="reference external" href="https://ui.adsabs.harvard.edu/abs/2017PASA...34...58E/abstract">Eldridge et al. 2017</a>). <strong>The primary models are those where the primary is evolved in detail, the secondary models are those where the secondary is evolved in detail AFTER THE FIRST STAR HAS DIED</strong>. This is convenient for computing time purposes
(especially because the models where calcualted a few years back) and also if you’re looking at supernova kicks but that’s a whole other tutorial.</p>
<p><strong>[! CAUTION !]</strong><em>In the stellar evolution library the properties of star 1 are ALWAYS those of the star that is being evolved in detail. That means that in primary models M1 is the mass of the primary, but in the secondary models M1 is actually the mass of the secondary and M2 could be the mass of the Black Hole or Neutron Star left behind after the death of the primary</em></p>
<p>Other properties in the <code class="docutils literal notranslate"><span class="pre">SUMMARY</span></code> table relate to the final propeties of the model (<code class="docutils literal notranslate"><span class="pre">_end</span></code>). Those are copy pasted from the <strong>last line</strong> in the stellar model table. For massive stars it’s indeed when the star dies. For white dwarves it’s at the end of universe according to BPASS or when the model crashes.</p>
<p><strong>[``modelimf`` and ``mixedimf``]</strong></p>
<p>The other crucial properties provided in this table are the <strong>pop. synth</strong> properties that tell you <strong>how many of each system you expect to arise in a 1 Million Msol</strong> population at the given metallicity. <strong>Without these properties you can find a progenitor but have no idea how likely it is to occur in the Universe</strong>.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">modelimf</span></code> -&gt; how many such models occur (NO REJUVINATION)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mixedimf</span></code> -&gt; how many such models occur as a result of rejuvination</p></li>
</ul>
<p>Note that in the BPASS input files (should you wish to look at them despite the fact they are not human readable) the <code class="docutils literal notranslate"><span class="pre">modelimf</span></code> is the TOTAL number (including <code class="docutils literal notranslate"><span class="pre">mixedimf</span></code>). This is not something you should <em>ever</em> have to worry about, except maybe if you look into the entrails of <code class="docutils literal notranslate"><span class="pre">hoki</span></code> (espcially the CMD class) and see in the comments that the definition is ever so slightly different. I chose to separate the two in the table because of personal preference - in hinsight consistency might
have been preferable but it is what it is.</p>
<p><strong>[Mass transfer and Common Envelope Evolution]</strong> If you are specifically looking for systems that underwent mass transfer (MT) or common envelope evolution (CEE) you can check the <code class="docutils literal notranslate"><span class="pre">MT_bool</span></code> and <code class="docutils literal notranslate"><span class="pre">CEE_bool</span></code> columns. A 0 means ‘no’ whilst a ‘1’ means yes. But yes to what?</p>
<p>MT is programatically defined as the model having a period where there is mass loss through the roche lobe. CEE is defined as our star’s radius exceeded the separation of the the binary. <strong>Note that this is the CEE definition within the Cambridge STARS code for the onset of CEE so it is the only “correct” way to define it here even if you don’t agree about the physics of this definition</strong></p>
</div>
<div class="section" id="The-CEE-and-MT-tables">
<h2>The <code class="docutils literal notranslate"><span class="pre">CEE</span></code> and <code class="docutils literal notranslate"><span class="pre">MT</span></code> tables<a class="headerlink" href="#The-CEE-and-MT-tables" title="Permalink to this headline">¶</a></h2>
<p>This is a lovely transition to talk about our <code class="docutils literal notranslate"><span class="pre">CEE</span></code> and <code class="docutils literal notranslate"><span class="pre">MT</span></code> tables which summarise the periods of (stable) mass transfer and common envelope that our models undergo</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">eve</span><span class="o">.</span><span class="n">CEE</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>TIMESTEP_start</th>
      <th>AGE_start</th>
      <th>M1_start</th>
      <th>M2_start</th>
      <th>P_start</th>
      <th>LOGA_start</th>
      <th>TIMESTEP_end</th>
      <th>AGE_end</th>
      <th>M1_end</th>
      <th>M2_end</th>
      <th>P_end</th>
      <th>LOGA_end</th>
      <th>avgDM1R_msolpyr</th>
      <th>avgDM2R_msolpyr</th>
      <th>avgDM1W_msolpyr</th>
      <th>avgDM2W_msolpyr</th>
      <th>CASE</th>
    </tr>
    <tr>
      <th>MODEL_ID</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>139363</th>
      <td>10</td>
      <td>32696.60</td>
      <td>2.95</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>-inf</td>
      <td>8350</td>
      <td>9.742223e+10</td>
      <td>0.74303</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>-inf</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>A</td>
    </tr>
    <tr>
      <th>139365</th>
      <td>10</td>
      <td>35758.61</td>
      <td>2.85</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>-inf</td>
      <td>8260</td>
      <td>9.746370e+10</td>
      <td>0.71675</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>-inf</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>A</td>
    </tr>
    <tr>
      <th>139367</th>
      <td>10</td>
      <td>39374.49</td>
      <td>2.75</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>-inf</td>
      <td>8190</td>
      <td>9.751175e+10</td>
      <td>0.69098</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>-inf</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>A</td>
    </tr>
    <tr>
      <th>139369</th>
      <td>10</td>
      <td>43711.77</td>
      <td>2.65</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>-inf</td>
      <td>8130</td>
      <td>9.756764e+10</td>
      <td>0.66540</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>-inf</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>A</td>
    </tr>
    <tr>
      <th>139371</th>
      <td>10</td>
      <td>48974.07</td>
      <td>2.55</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>-inf</td>
      <td>8090</td>
      <td>9.763306e+10</td>
      <td>0.64235</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>-inf</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>A</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">eve</span><span class="o">.</span><span class="n">MT</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>TIMESTEP_start</th>
      <th>AGE_start</th>
      <th>M1_start</th>
      <th>M2_start</th>
      <th>P_start</th>
      <th>LOGA_start</th>
      <th>TIMESTEP_end</th>
      <th>AGE_end</th>
      <th>M1_end</th>
      <th>M2_end</th>
      <th>P_end</th>
      <th>LOGA_end</th>
      <th>avgDM1R_msolpyr</th>
      <th>avgDM2R_msolpyr</th>
      <th>avgDM1W_msolpyr</th>
      <th>avgDM2W_msolpyr</th>
      <th>CASE</th>
    </tr>
    <tr>
      <th>MODEL_ID</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>139478</th>
      <td>600</td>
      <td>1.640508e+03</td>
      <td>299.3329</td>
      <td>30.0</td>
      <td>0.002748</td>
      <td>1.463748</td>
      <td>800</td>
      <td>23047.62</td>
      <td>302.26110</td>
      <td>30.0</td>
      <td>0.002748</td>
      <td>1.463748</td>
      <td>-0.085665</td>
      <td>0.0</td>
      <td>0.000026</td>
      <td>0.0</td>
      <td>A</td>
    </tr>
    <tr>
      <th>139478</th>
      <td>4988</td>
      <td>2.032127e+06</td>
      <td>110.2153</td>
      <td>30.0</td>
      <td>0.002748</td>
      <td>1.463748</td>
      <td>11620</td>
      <td>2448448.00</td>
      <td>35.96710</td>
      <td>30.0</td>
      <td>0.002748</td>
      <td>1.463748</td>
      <td>-0.085665</td>
      <td>0.0</td>
      <td>0.000026</td>
      <td>0.0</td>
      <td>B</td>
    </tr>
    <tr>
      <th>139479</th>
      <td>600</td>
      <td>1.390236e+03</td>
      <td>299.2373</td>
      <td>60.0</td>
      <td>0.002750</td>
      <td>1.476344</td>
      <td>900</td>
      <td>46368.02</td>
      <td>311.71300</td>
      <td>60.0</td>
      <td>0.002750</td>
      <td>1.476344</td>
      <td>-0.100002</td>
      <td>0.0</td>
      <td>0.000026</td>
      <td>0.0</td>
      <td>A</td>
    </tr>
    <tr>
      <th>139479</th>
      <td>5000</td>
      <td>1.980880e+06</td>
      <td>113.6463</td>
      <td>60.0</td>
      <td>0.002750</td>
      <td>1.476344</td>
      <td>12432</td>
      <td>2435873.00</td>
      <td>32.84911</td>
      <td>60.0</td>
      <td>0.002750</td>
      <td>1.476344</td>
      <td>-0.100002</td>
      <td>0.0</td>
      <td>0.000026</td>
      <td>0.0</td>
      <td>B</td>
    </tr>
    <tr>
      <th>139480</th>
      <td>500</td>
      <td>7.313112e+02</td>
      <td>298.6578</td>
      <td>90.0</td>
      <td>0.002750</td>
      <td>1.487931</td>
      <td>900</td>
      <td>37422.93</td>
      <td>315.46130</td>
      <td>90.0</td>
      <td>0.002750</td>
      <td>1.487931</td>
      <td>-0.100002</td>
      <td>0.0</td>
      <td>0.000026</td>
      <td>0.0</td>
      <td>A</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>As you can see they both contain the same columns, which for the most part have self explenatory names. Note that <strong>the Periods are in units of log10(days)</strong>. Also let’s talk about <code class="docutils literal notranslate"><span class="pre">avgDM1R_msolpyr</span></code> and similarly named columns.</p>
<p><code class="docutils literal notranslate"><span class="pre">DM1R</span></code> is one of the columns in the stellar library tables, it is the mass loss through the roche lobe (or rather change in mass of the primary) in solar masses per second (not per 1.989 per second as shown in the BPASS manual). In these table I have taken the average of this mass loss and I report it in <strong>Msol per year</strong> not per second. This is because I think it’s more important here to be consistent with the units observers (or other astronomers) expect rather than internal consistency.
That being said if you see discrepancies between those average values and the numbers you see in the raw stellar library tables, check if it’s not a conversion from seconds to years.</p>
<p><code class="docutils literal notranslate"><span class="pre">DM1W</span></code> is the mass loss to winds (of the primary).</p>
<p>The other column names with 2 instead of one relate to the secondary.</p>
<p><strong>[! WARNING !]</strong><em>I have tried to report whether the MT and CEE where Case A, B, or C. Similarly to how dificult and fuzzy, it is fuzzy to define these cases. They are there as first order approximations, if you want to do a good job you can check in the stellar evolution files and plot the mass of the cores (see below)</em></p>
</div>
<div class="section" id="The-DEATH-table">
<h2>The <code class="docutils literal notranslate"><span class="pre">DEATH</span></code> table<a class="headerlink" href="#The-DEATH-table" title="Permalink to this headline">¶</a></h2>
<p>This is easy: I just copy pasted the last row of each stellar model into this table. It seems useless until you spend ages looking at those last rows searching for explosive transient progenitors. Speaking of which, TIME TO GO LOOK FOR SUPER-LUMINOUS SUPERNOVAE!!!</p>
<div class="section" id="Use-case:-Searching-for-a-super-luminous-supernova-progenitor">
<h3>Use-case: Searching for a super-luminous supernova progenitor<a class="headerlink" href="#Use-case:-Searching-for-a-super-luminous-supernova-progenitor" title="Permalink to this headline">¶</a></h3>
<p>We now have everything we need to start looking for matching models. But first let’s define what we will be looking for today.</p>
<p><strong>[Criteria to be matched]</strong></p>
<p>Let’s look for the progenitor of a SLSN-I, meanign <strong>no Hydrogen</strong> in its envelope and <strong>“no” helium</strong>. We also have some information about its ejecta mass, and we can use other peoples models to estimate how much hydrogen can be “hidden” in our stellar envelope.</p>
<ul class="simple">
<li><p>Massive star that can explode as a SN (we typically use CO core&gt;1.38 Msol)</p></li>
<li><p>M ejecta &gt;7 &amp; &lt;15</p></li>
<li><p>No hydrogen at death (using the stuff in <a class="reference external" href="https://arxiv.org/abs/1205.5349">https://arxiv.org/abs/1205.5349</a>)</p></li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>as little as 0.001 M of hydrogen with surface mass fraction as low
as 0.01 can produce a strong Hα line
</pre></div>
</div>
<p>In order to check all these conditions we need to look through the <code class="docutils literal notranslate"><span class="pre">eve.DEATH</span></code> table we mentioned above:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">eve</span><span class="o">.</span><span class="n">DEATH</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>timestep</th>
      <th>age</th>
      <th>log(R1)</th>
      <th>log(T1)</th>
      <th>log(L1)</th>
      <th>M1</th>
      <th>He_core1</th>
      <th>CO_core1</th>
      <th>ONe_core1</th>
      <th>Nan9</th>
      <th>...</th>
      <th>?</th>
      <th>modelimf</th>
      <th>mixedimf</th>
      <th>V-I</th>
      <th>U</th>
      <th>B</th>
      <th>V</th>
      <th>R</th>
      <th>I</th>
      <th>J</th>
    </tr>
    <tr>
      <th>MODEL_ID</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>139237</th>
      <td>7597.0</td>
      <td>4002222.0</td>
      <td>-0.00374</td>
      <td>5.23904</td>
      <td>5.90192</td>
      <td>19.94971</td>
      <td>0.0</td>
      <td>19.57384</td>
      <td>2.19591</td>
      <td>0.0</td>
      <td>...</td>
      <td>-0.40303</td>
      <td>0.077866</td>
      <td>0.0</td>
      <td>-0.804765</td>
      <td>-6.144496</td>
      <td>-5.124525</td>
      <td>-5.605848</td>
      <td>-5.492907</td>
      <td>-4.801082</td>
      <td>-4.960115</td>
    </tr>
    <tr>
      <th>139238</th>
      <td>7589.0</td>
      <td>4033544.0</td>
      <td>-0.01400</td>
      <td>5.24344</td>
      <td>5.89899</td>
      <td>19.77729</td>
      <td>0.0</td>
      <td>19.44443</td>
      <td>2.21896</td>
      <td>0.0</td>
      <td>...</td>
      <td>-0.40273</td>
      <td>0.080755</td>
      <td>0.0</td>
      <td>-0.801254</td>
      <td>-6.138891</td>
      <td>-5.120062</td>
      <td>-5.600776</td>
      <td>-5.488411</td>
      <td>-4.799521</td>
      <td>-4.957952</td>
    </tr>
    <tr>
      <th>139239</th>
      <td>7024.0</td>
      <td>4065838.0</td>
      <td>-0.24850</td>
      <td>5.36890</td>
      <td>5.93182</td>
      <td>19.62953</td>
      <td>0.0</td>
      <td>17.23459</td>
      <td>0.00024</td>
      <td>0.0</td>
      <td>...</td>
      <td>-0.40231</td>
      <td>0.083800</td>
      <td>0.0</td>
      <td>-0.275980</td>
      <td>-6.840992</td>
      <td>-5.846130</td>
      <td>-5.742734</td>
      <td>-5.720248</td>
      <td>-5.466754</td>
      <td>-5.671823</td>
    </tr>
    <tr>
      <th>139240</th>
      <td>7034.0</td>
      <td>4099226.0</td>
      <td>-0.25057</td>
      <td>5.36898</td>
      <td>5.92804</td>
      <td>19.50653</td>
      <td>0.0</td>
      <td>17.43372</td>
      <td>0.00029</td>
      <td>0.0</td>
      <td>...</td>
      <td>-0.40176</td>
      <td>0.087011</td>
      <td>0.0</td>
      <td>-0.276187</td>
      <td>-6.831222</td>
      <td>-5.836364</td>
      <td>-5.733389</td>
      <td>-5.710909</td>
      <td>-5.457203</td>
      <td>-5.662486</td>
    </tr>
    <tr>
      <th>139241</th>
      <td>7029.0</td>
      <td>4133877.0</td>
      <td>-0.25589</td>
      <td>5.37104</td>
      <td>5.92561</td>
      <td>19.39798</td>
      <td>0.0</td>
      <td>17.04446</td>
      <td>0.00032</td>
      <td>0.0</td>
      <td>...</td>
      <td>-0.40114</td>
      <td>0.090400</td>
      <td>0.0</td>
      <td>-0.276718</td>
      <td>-6.824322</td>
      <td>-5.829474</td>
      <td>-5.727585</td>
      <td>-5.705117</td>
      <td>-5.450867</td>
      <td>-5.656701</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 59 columns</p>
</div></div>
</div>
<p>As you can see there are a lot of columns, which correspond to those we can find in each stellar evolution model table in BPASSv2.2.1. You can check the BPASS manual to see a list, or you can use the <code class="docutils literal notranslate"><span class="pre">dummy_manual</span></code> dictionary, which pairs the column names (keys) as they are in the pandas dataframe with the definitions (values).</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">dummy_manual</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;timestep&#39;: &#39;Time Step Number&#39;,
 &#39;age&#39;: &#39;Age in years&#39;,
 &#39;log(R1)&#39;: &#39;Log10(R/Rsun) of the primary&#39;,
 &#39;log(T1)&#39;: &#39;Effective log10 temperature of the primary&#39;,
 &#39;log(L1)&#39;: &#39;Log10(L/Lsun) of the primary&#39;,
 &#39;M1&#39;: &#39;M/Msun of the primary&#39;,
 &#39;He_core1&#39;: &#39;He core mass of the primary /Msun&#39;,
 &#39;CO_core1&#39;: &#39;CO core mass of the primary /Msun&#39;,
 &#39;ONe_core1&#39;: &#39;ONe core mass of the primary /Msun&#39;,
 &#39;X&#39;: &#39;Surface mass fractions for X (hydrogen)&#39;,
 &#39;Y&#39;: &#39;Surface mass fractions for Y (helium)&#39;,
 &#39;C&#39;: &#39;Surface mass fractions for C (carbon)&#39;,
 &#39;N&#39;: &#39;Surface mass fractions for N (nitrogem)&#39;,
 &#39;O&#39;: &#39;Surface mass fractions for O (oxygen)&#39;,
 &#39;Ne&#39;: &#39;Surface mass fractions for Ne (neon)&#39;,
 &#39;MH1&#39;: &#39;Mass of Hydrogen in primary /Msun&#39;,
 &#39;MHe1&#39;: &#39;Mass of Helium in primary /Msun&#39;,
 &#39;MC1&#39;: &#39;Mass of Carbon in primary /Msun&#39;,
 &#39;MN1&#39;: &#39;Mass of Nitrogen in primary /Msun&#39;,
 &#39;MO1&#39;: &#39;Mass of Oxygen in primary /Msun&#39;,
 &#39;MNe1&#39;: &#39;Mass of Neon in primary /Msun&#39;,
 &#39;MMg1&#39;: &#39;Mass of Hydrogen in primary /Msun&#39;,
 &#39;MSi1&#39;: &#39;Mass of Silicon in primary /Msun&#39;,
 &#39;MFe1&#39;: &#39;Mass of Iron in primary /Msun&#39;,
 &#39;envelope_binding_E&#39;: &#39;Binding Energy of the envelope in Joules&#39;,
 &#39;star_binding_E&#39;: &#39;Total star binding energy in Joules&#39;,
 &#39;Mrem_weakSN&#39;: &#39;Remnant Mass /Msun for a weakSN (1e43 J)&#39;,
 &#39;Mej_weakSN&#39;: &#39;Ejecta Mass /Msun for a weakSN (1e43 J)&#39;,
 &#39;Mrem_SN&#39;: &#39;Remnant Mass /Msun for a normal SN (1e44 J)&#39;,
 &#39;Mej_SN&#39;: &#39;Ejecta Mass /Msun for a normal SN (1e44 J)&#39;,
 &#39;Mrem_superSN&#39;: &#39;Remnant Mass /Msun for a high energy SN (1e45 J)&#39;,
 &#39;Mej_superSN&#39;: &#39;Ejecta Mass /Msun for a high energy SN (1e45 J)&#39;,
 &#39;AM_bin&#39;: &#39;Angular momentum of the binary&#39;,
 &#39;P_bin&#39;: &#39;Period of the binary in years&#39;,
 &#39;log(a)&#39;: &#39;Log10 of the binary separation/Rsun &#39;,
 &#39;M2&#39;: &#39;Mass of the secondary /Msun&#39;,
 &#39;MTOT&#39;: &#39;Total Mass of the binary /Msun&#39;,
 &#39;DM1W&#39;: &#39;Wind mass loss rate of the primary (Msun/(1.989*s))&#39;,
 &#39;DM2W&#39;: &#39;Wind mass loss rate of the secondary (Msun/(1.989*s))&#39;,
 &#39;DM1A&#39;: &#39;Accretion onto primary (Msun/(1.989*s))&#39;,
 &#39;DM2A&#39;: &#39;Accretion onto secondary (Msun/(1.989*s))&#39;,
 &#39;DM1R&#39;: &#39;Roche Lobe overflow of the primary (Msun/(1.989*s))&#39;,
 &#39;DM2R&#39;: &#39;Roche Lobe overflow of the secondary (Msun/(1.989*s))&#39;,
 &#39;DAM&#39;: &#39;Angular momentum change&#39;,
 &#39;log(R2)&#39;: &#39;Log10 of estimated radius of the secondary /Rsun&#39;,
 &#39;log(T2)&#39;: &#39;Log10 of estimated effective Temperature of the secondary&#39;,
 &#39;log(L2)&#39;: &#39;Log10 of estimated Luminosity of the secondary /Lsun&#39;,
 &#39;?&#39;: &#39;Roche Lobe overflux of star 2&#39;,
 &#39;modelimf&#39;: &#39;Total IMF probability of stars&#39;,
 &#39;mixedimf&#39;: &#39;IMF probability of rejuvinated stars&#39;,
 &#39;V-I&#39;: &#39;V-I (absolute mag both stars)&#39;,
 &#39;U&#39;: &#39;U (absolute mag both stars)&#39;,
 &#39;B&#39;: &#39;B (absolute mag both stars)&#39;,
 &#39;V&#39;: &#39;V (absolute mag both stars)&#39;,
 &#39;R&#39;: &#39;R (absolute mag both stars)&#39;,
 &#39;I&#39;: &#39;I (absolute mag both stars)&#39;,
 &#39;J&#39;: &#39;J (absolute mag both stars)&#39;,
 &#39;H&#39;: &#39;H (absolute mag both stars)&#39;,
 &#39;K&#39;: &#39;K (absolute mag both stars)&#39;,
 &#39;u&#39;: &#39;u (absolute mag both stars)&#39;,
 &#39;g&#39;: &#39;g (absolute mag both stars)&#39;,
 &#39;r&#39;: &#39;r (absolute mag both stars)&#39;,
 &#39;i&#39;: &#39;i (absolute mag both stars)&#39;,
 &#39;z&#39;: &#39;z (absolute mag both stars)&#39;,
 &#39;f300w&#39;: &#39; f300w (absolute mag both stars)&#39;,
 &#39;f336w&#39;: &#39;f336w (absolute mag both stars)&#39;,
 &#39;f435w&#39;: &#39;f435w (absolute mag both stars)&#39;,
 &#39;f450w&#39;: &#39;f450w (absolute mag both stars)&#39;,
 &#39;f555w&#39;: &#39;f555w (absolute mag both stars)&#39;,
 &#39;f606w&#39;: &#39;f606w (absolute mag both stars)&#39;,
 &#39;f814w&#39;: &#39;f814w (absolute mag both stars)&#39;,
 &#39;U2&#39;: &#39;U (absolute mag secondary star)&#39;,
 &#39;B2&#39;: &#39;B (absolute mag secondary star)&#39;,
 &#39;V2&#39;: &#39;V (absolute mag secondary star)&#39;,
 &#39;R2&#39;: &#39;R (absolute mag secondary star)&#39;,
 &#39;I2&#39;: &#39;I (absolute mag secondary star)&#39;,
 &#39;J2&#39;: &#39;J (absolute mag secondary star)&#39;,
 &#39;H2&#39;: &#39;H (absolute mag secondary star)&#39;,
 &#39;K2&#39;: &#39;K (absolute mag secondary star)&#39;,
 &#39;u2&#39;: &#39;u (absolute mag secondary star)&#39;,
 &#39;g2&#39;: &#39;g (absolute mag secondary star)&#39;,
 &#39;r2&#39;: &#39;r (absolute mag secondary star)&#39;,
 &#39;i2&#39;: &#39;i (absolute mag secondary star)&#39;,
 &#39;z2&#39;: &#39;z (absolute mag secondary star)&#39;,
 &#39;f300w2&#39;: &#39;f300w (absolute mag secondary star)&#39;,
 &#39;f336w2&#39;: &#39;f336w (absolute mag secondary star)&#39;,
 &#39;f435w2&#39;: &#39;f435w (absolute mag secondary star)&#39;,
 &#39;f450w2&#39;: &#39;f450w (absolute mag secondary star)&#39;,
 &#39;f555w2&#39;: &#39;f555w (absolute mag secondary star)&#39;,
 &#39;f606w2&#39;: &#39;f606w (absolute mag secondary star)&#39;,
 &#39;f814w2&#39;: &#39;f814w (absolute mag secondary star)&#39;,
 &#39;Halpha&#39;: &#39;H alpha flux (log L erg/s)&#39;,
 &#39;FUV&#39;: &#39;UV flux (log L erg/s/A)&#39;,
 &#39;NUV&#39;: &#39;Near UV flux (log L erg/s/A)&#39;}
</pre></div></div>
</div>
<p><strong>[Why “dummy”?]</strong></p>
<p>In the STARS code J.J. Eldridge wrote to output the data of the stellar library, the large array that contains the output is a variable called <code class="docutils literal notranslate"><span class="pre">dummy</span></code>, and it is this array that is contained in each stellar model text file. This place-holder name has been in the code for nearly 2 decades and for consistency is used in other bits of code like <code class="docutils literal notranslate"><span class="pre">TUI</span></code> and now <code class="docutils literal notranslate"><span class="pre">hoki</span></code>. Evertime you see <code class="docutils literal notranslate"><span class="pre">dummy</span></code>, there is a relation to the <code class="docutils literal notranslate"><span class="pre">sneplot</span></code> files (i.e. the model files in the stellar library).</p>
</div>
</div>
<div class="section" id="Selecting-our-desired-models">
<h2>Selecting our desired models<a class="headerlink" href="#Selecting-our-desired-models" title="Permalink to this headline">¶</a></h2>
<p>Each model has a unique ID <code class="docutils literal notranslate"><span class="pre">MODEL_ID</span></code> - it is unique across all 13 metallicities so it won’t start at 0 (unless you’re looking at the lowest metallicity: 10e-5).</p>
<p>Although you can just crop tables entierly I find the best approach is to store the sets of models IDs that correspond to specific properties of your search and then combine them and mask the full EvE tables. Let’s see how this works below</p>
<div class="section" id="Finding-CCSNe-and-Ibc-(general)">
<h3>Finding CCSNe and Ibc (general)<a class="headerlink" href="#Finding-CCSNe-and-Ibc-(general)" title="Permalink to this headline">¶</a></h3>
<p>We could start with the conditions stated above regarding the presence of hydrogen/helium and ejecta masses. That would be a faster way to crop down our sets of <code class="docutils literal notranslate"><span class="pre">MODEL_ID</span></code> but I want to do it in an order that will be more natural if you go looking for other types of transients.</p>
<p>So first let’s find the IDs of all the stars that will explode as CCSNe. We want massive stars (to be conservative we select everything above 7 Msol) and we want them to go through iron core collapse so we need the CO core to be &gt;1.38 Msol at death and the ONe core &gt;0.1 Msol at death.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[32]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># models of massive stars (loose definition)</span>
<span class="n">id_massive</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">eve</span><span class="o">.</span><span class="n">SUMMARY</span><span class="p">[</span><span class="n">eve</span><span class="o">.</span><span class="n">SUMMARY</span><span class="o">.</span><span class="n">M1_ZAMS</span><span class="o">&gt;</span><span class="mi">7</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p><strong>[Code break down]</strong> If you are not super familiar with pandas shenanigans here is a break down of the code above:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[33]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">eve</span><span class="o">.</span><span class="n">SUMMARY</span><span class="o">.</span><span class="n">M1_ZAMS</span><span class="o">&gt;</span><span class="mi">7</span> <span class="c1"># creates a **mask** (a series of booleans (False, True))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[33]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
MODEL_ID
139237     True
139238     True
139239     True
139240     True
139241     True
          ...
160756    False
160757    False
160758    False
160759    False
160760    False
Name: M1_ZAMS, Length: 21117, dtype: bool
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[34]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">eve</span><span class="o">.</span><span class="n">SUMMARY</span><span class="p">[</span><span class="n">eve</span><span class="o">.</span><span class="n">SUMMARY</span><span class="o">.</span><span class="n">M1_ZAMS</span><span class="o">&gt;</span><span class="mi">7</span><span class="p">]</span> <span class="c1"># selects all the rows of the SUMMARY tables where the mask says &#39;True&#39;</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[34]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>M1_ZAMS</th>
      <th>M2_ZAMS</th>
      <th>P_ZAMS</th>
      <th>lifetime_MS</th>
      <th>MT_bool</th>
      <th>CEE_bool</th>
      <th>AGE_end</th>
      <th>M1_end</th>
      <th>M2_end</th>
      <th>P_end</th>
      <th>modelimf</th>
      <th>mixedimf</th>
      <th>type</th>
    </tr>
    <tr>
      <th>MODEL_ID</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>139237</th>
      <td>65.0</td>
      <td>1.0</td>
      <td>39090200.0</td>
      <td>3321112.0</td>
      <td>0</td>
      <td>0</td>
      <td>4002222.0</td>
      <td>19.94971</td>
      <td>1.0</td>
      <td>0.3879680E+09</td>
      <td>0.077866</td>
      <td>0.00000</td>
      <td>-1</td>
    </tr>
    <tr>
      <th>139238</th>
      <td>64.0</td>
      <td>1.0</td>
      <td>39389750.0</td>
      <td>3355019.0</td>
      <td>0</td>
      <td>0</td>
      <td>4033544.0</td>
      <td>19.77729</td>
      <td>1.0</td>
      <td>0.3855040E+09</td>
      <td>0.080755</td>
      <td>0.00000</td>
      <td>-1</td>
    </tr>
    <tr>
      <th>139239</th>
      <td>63.0</td>
      <td>1.0</td>
      <td>39696290.0</td>
      <td>3390314.0</td>
      <td>0</td>
      <td>0</td>
      <td>4065838.0</td>
      <td>19.62953</td>
      <td>1.0</td>
      <td>0.3820573E+09</td>
      <td>0.083800</td>
      <td>0.00000</td>
      <td>-1</td>
    </tr>
    <tr>
      <th>139240</th>
      <td>62.0</td>
      <td>1.0</td>
      <td>40010100.0</td>
      <td>3406536.0</td>
      <td>0</td>
      <td>0</td>
      <td>4099226.0</td>
      <td>19.50653</td>
      <td>1.0</td>
      <td>0.3776276E+09</td>
      <td>0.087011</td>
      <td>0.00000</td>
      <td>-1</td>
    </tr>
    <tr>
      <th>139241</th>
      <td>61.0</td>
      <td>1.0</td>
      <td>40331470.0</td>
      <td>3444347.0</td>
      <td>0</td>
      <td>0</td>
      <td>4133877.0</td>
      <td>19.39798</td>
      <td>1.0</td>
      <td>0.3726069E+09</td>
      <td>0.090400</td>
      <td>0.00000</td>
      <td>-1</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>160727</th>
      <td>9.5</td>
      <td>1.0</td>
      <td>98004320.0</td>
      <td>24806290.0</td>
      <td>0</td>
      <td>0</td>
      <td>29348150.0</td>
      <td>9.15623</td>
      <td>1.0</td>
      <td>0.1047507E+09</td>
      <td>41.799300</td>
      <td>26.05064</td>
      <td>3</td>
    </tr>
    <tr>
      <th>160728</th>
      <td>9.0</td>
      <td>1.0</td>
      <td>100424500.0</td>
      <td>27140890.0</td>
      <td>0</td>
      <td>0</td>
      <td>32336710.0</td>
      <td>8.69743</td>
      <td>1.0</td>
      <td>0.1067887E+09</td>
      <td>98.579450</td>
      <td>19.05651</td>
      <td>3</td>
    </tr>
    <tr>
      <th>160729</th>
      <td>8.5</td>
      <td>1.0</td>
      <td>103033400.0</td>
      <td>30199880.0</td>
      <td>0</td>
      <td>0</td>
      <td>35923690.0</td>
      <td>8.24057</td>
      <td>1.0</td>
      <td>0.1088996E+09</td>
      <td>56.428160</td>
      <td>31.57097</td>
      <td>3</td>
    </tr>
    <tr>
      <th>160730</th>
      <td>8.0</td>
      <td>1.0</td>
      <td>105856800.0</td>
      <td>33624640.0</td>
      <td>0</td>
      <td>0</td>
      <td>40273060.0</td>
      <td>7.78239</td>
      <td>1.0</td>
      <td>0.1111671E+09</td>
      <td>103.634900</td>
      <td>16.64214</td>
      <td>3</td>
    </tr>
    <tr>
      <th>160731</th>
      <td>7.5</td>
      <td>1.0</td>
      <td>108925700.0</td>
      <td>38185990.0</td>
      <td>0</td>
      <td>0</td>
      <td>45620450.0</td>
      <td>7.32357</td>
      <td>1.0</td>
      <td>0.1135919E+09</td>
      <td>96.289360</td>
      <td>28.48787</td>
      <td>3</td>
    </tr>
  </tbody>
</table>
<p>11219 rows × 13 columns</p>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[36]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">eve</span><span class="o">.</span><span class="n">SUMMARY</span><span class="p">[</span><span class="n">eve</span><span class="o">.</span><span class="n">SUMMARY</span><span class="o">.</span><span class="n">M1_ZAMS</span><span class="o">&gt;</span><span class="mi">7</span><span class="p">]</span><span class="o">.</span><span class="n">index</span> <span class="c1"># returns the index of the selected rows</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[36]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Int64Index([139237, 139238, 139239, 139240, 139241, 139242, 139243, 139244,
            139245, 139246,
            ...
            160722, 160723, 160724, 160725, 160726, 160727, 160728, 160729,
            160730, 160731],
           dtype=&#39;int64&#39;, name=&#39;MODEL_ID&#39;, length=11219)
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[37]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">set</span><span class="p">(</span><span class="n">eve</span><span class="o">.</span><span class="n">SUMMARY</span><span class="p">[</span><span class="n">eve</span><span class="o">.</span><span class="n">SUMMARY</span><span class="o">.</span><span class="n">M1_ZAMS</span><span class="o">&gt;</span><span class="mi">7</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">)</span> <span class="c1"># returns a set</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[37]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{139237,
 139238,
 139239,
 139240,
 139241,
 139242,
 139243,
 139244,
 139245,
 139246,
 139247,
 139248,
 139249,
 139250,
 139251,
 139252,
 139253,
 139254,
 139255,
 139256,
 139257,
 139258,
 139259,
 139260,
 139261,
 139262,
 139263,
 139264,
 139265,
 139266,
 139267,
 139268,
 139269,
 139270,
 139271,
 139272,
 139273,
 139274,
 139275,
 139276,
 139277,
 139278,
 139279,
 139280,
 139281,
 139282,
 139283,
 139284,
 139285,
 139286,
 139287,
 139288,
 139289,
 139290,
 139291,
 139292,
 139293,
 139294,
 139295,
 139296,
 139297,
 139298,
 139299,
 139300,
 139301,
 139302,
 139303,
 139304,
 139305,
 139306,
 139307,
 139308,
 139309,
 139310,
 139311,
 139312,
 139313,
 139314,
 139315,
 139316,
 139317,
 139318,
 139319,
 139320,
 139321,
 139478,
 139479,
 139480,
 139481,
 139482,
 139483,
 139484,
 139485,
 139486,
 139487,
 139488,
 139489,
 139490,
 139491,
 139492,
 139493,
 139494,
 139495,
 139496,
 139497,
 139498,
 139499,
 139500,
 139501,
 139502,
 139503,
 139504,
 139505,
 139506,
 139507,
 139508,
 139509,
 139510,
 139511,
 139512,
 139513,
 139514,
 139515,
 139516,
 139517,
 139518,
 139519,
 139520,
 139521,
 139522,
 139523,
 139524,
 139525,
 139526,
 139527,
 139528,
 139529,
 139530,
 139531,
 139532,
 139533,
 139534,
 139535,
 139536,
 139537,
 139538,
 139539,
 139540,
 139541,
 139542,
 139543,
 139544,
 139545,
 139546,
 139547,
 139548,
 139549,
 139550,
 139551,
 139552,
 139553,
 139554,
 139555,
 139556,
 139557,
 139558,
 139559,
 139560,
 139561,
 139562,
 139563,
 139564,
 139565,
 139566,
 139567,
 139568,
 139569,
 139570,
 139571,
 139572,
 139573,
 139574,
 139575,
 139576,
 139577,
 139578,
 139579,
 139580,
 139581,
 139582,
 139583,
 139584,
 139585,
 139586,
 139587,
 139588,
 139589,
 139590,
 139591,
 139592,
 139593,
 139594,
 139595,
 139596,
 139597,
 139598,
 139599,
 139600,
 139601,
 139602,
 139603,
 139604,
 139605,
 139606,
 139607,
 139608,
 139609,
 139610,
 139611,
 139612,
 139613,
 139614,
 139615,
 139616,
 139617,
 139618,
 139619,
 139620,
 139621,
 139622,
 139623,
 139624,
 139625,
 139626,
 139627,
 139628,
 139629,
 139630,
 139631,
 139632,
 139633,
 139634,
 139635,
 139636,
 139637,
 139638,
 139639,
 139640,
 139641,
 139642,
 139643,
 139644,
 139645,
 139646,
 139647,
 139648,
 139649,
 139650,
 139651,
 139652,
 139653,
 139654,
 139655,
 139656,
 139657,
 139658,
 139659,
 139660,
 139661,
 139662,
 139663,
 139664,
 139665,
 139666,
 139667,
 139668,
 139669,
 139670,
 139671,
 139672,
 139673,
 139674,
 139675,
 139676,
 139677,
 139678,
 139679,
 139680,
 139681,
 139682,
 139683,
 139684,
 139685,
 139686,
 139687,
 139688,
 139689,
 139690,
 139691,
 139692,
 139693,
 139694,
 139695,
 139696,
 139697,
 139698,
 139699,
 139700,
 139701,
 139702,
 139703,
 139704,
 139705,
 139706,
 139707,
 139708,
 139709,
 139710,
 139711,
 139712,
 139713,
 139714,
 139715,
 139716,
 139717,
 139718,
 139719,
 139720,
 139721,
 139722,
 139723,
 139724,
 139725,
 139726,
 139727,
 139728,
 139729,
 139730,
 139731,
 139732,
 139733,
 139734,
 139735,
 139736,
 139737,
 139738,
 139739,
 139740,
 139741,
 139742,
 139743,
 139744,
 139745,
 139746,
 139747,
 139748,
 139749,
 139750,
 139751,
 139752,
 139753,
 139754,
 139755,
 139756,
 139757,
 139758,
 139759,
 139760,
 139761,
 139762,
 139763,
 139764,
 139765,
 139766,
 139767,
 139768,
 139769,
 139770,
 139771,
 139772,
 139773,
 139774,
 139775,
 139776,
 139777,
 139778,
 139779,
 139780,
 139781,
 139782,
 139783,
 139784,
 139785,
 139786,
 139787,
 139788,
 139789,
 139790,
 139791,
 139792,
 139793,
 139794,
 139795,
 139796,
 139797,
 139798,
 139799,
 139800,
 139801,
 139802,
 139803,
 139804,
 139805,
 139806,
 139807,
 139808,
 139809,
 139810,
 139811,
 139812,
 139813,
 139814,
 139815,
 139816,
 139817,
 139818,
 139819,
 139820,
 139821,
 139822,
 139823,
 139824,
 139825,
 139826,
 139827,
 139828,
 139829,
 139830,
 139831,
 139832,
 139833,
 139834,
 139835,
 139836,
 139837,
 139838,
 139839,
 139840,
 139841,
 139842,
 139843,
 139844,
 139845,
 139846,
 139847,
 139848,
 139849,
 139850,
 139851,
 139852,
 139853,
 139854,
 139855,
 139856,
 139857,
 139858,
 139859,
 139860,
 139861,
 139862,
 139863,
 139864,
 139865,
 139866,
 139867,
 139868,
 139869,
 139870,
 139871,
 139872,
 139873,
 139874,
 139875,
 139876,
 139877,
 139878,
 139879,
 139880,
 139881,
 139882,
 139883,
 139884,
 139885,
 139886,
 139887,
 139888,
 139889,
 139890,
 139891,
 139892,
 139893,
 139894,
 139895,
 139896,
 139897,
 139898,
 139899,
 139900,
 139901,
 139902,
 139903,
 139904,
 139905,
 139906,
 139907,
 139908,
 139909,
 139910,
 139911,
 139912,
 139913,
 139914,
 139915,
 139916,
 139917,
 139918,
 139919,
 139920,
 139921,
 139922,
 139923,
 139924,
 139925,
 139926,
 139927,
 139928,
 139929,
 139930,
 139931,
 139932,
 139933,
 139934,
 139935,
 139936,
 139937,
 139938,
 139939,
 139940,
 139941,
 139942,
 139943,
 139944,
 139945,
 139946,
 139947,
 139948,
 139949,
 139950,
 139951,
 139952,
 139953,
 139954,
 139955,
 139956,
 139957,
 139958,
 139959,
 139960,
 139961,
 139962,
 139963,
 139964,
 139965,
 139966,
 139967,
 139968,
 139969,
 139970,
 139971,
 139972,
 139973,
 139974,
 139975,
 139976,
 139977,
 139978,
 139979,
 139980,
 139981,
 139982,
 139983,
 139984,
 139985,
 139986,
 139987,
 139988,
 139989,
 139990,
 139991,
 139992,
 139993,
 139994,
 139995,
 139996,
 139997,
 139998,
 139999,
 140000,
 140001,
 140002,
 140003,
 140004,
 140005,
 140006,
 140007,
 140008,
 140009,
 140010,
 140011,
 140012,
 140013,
 140014,
 140015,
 140016,
 140017,
 140018,
 140019,
 140020,
 140021,
 140022,
 140023,
 140024,
 140025,
 140026,
 140027,
 140028,
 140029,
 140030,
 140031,
 140032,
 140033,
 140034,
 140035,
 140036,
 140037,
 140038,
 140039,
 140040,
 140041,
 140042,
 140043,
 140044,
 140045,
 140046,
 140047,
 140048,
 140049,
 140050,
 140051,
 140052,
 140053,
 140054,
 140055,
 140056,
 140057,
 140058,
 140059,
 140060,
 140061,
 140062,
 140063,
 140064,
 140065,
 140066,
 140067,
 140068,
 140069,
 140070,
 140071,
 140072,
 140073,
 140074,
 140075,
 140076,
 140077,
 140078,
 140079,
 140080,
 140081,
 140082,
 140083,
 140084,
 140085,
 140086,
 140087,
 140088,
 140089,
 140090,
 140091,
 140092,
 140093,
 140094,
 140095,
 140096,
 140097,
 140098,
 140099,
 140100,
 140101,
 140102,
 140103,
 140104,
 140105,
 140106,
 140107,
 140108,
 140109,
 140110,
 140111,
 140112,
 140113,
 140114,
 140115,
 140116,
 140117,
 140118,
 140119,
 140120,
 140121,
 140122,
 140123,
 140124,
 140125,
 140126,
 140127,
 140128,
 140129,
 140130,
 140131,
 140132,
 140133,
 140134,
 140135,
 140136,
 140137,
 140138,
 140139,
 140140,
 140141,
 140142,
 140143,
 140144,
 140145,
 140146,
 140147,
 140148,
 140149,
 140150,
 140151,
 140152,
 140153,
 140154,
 140155,
 140156,
 140157,
 140158,
 140159,
 140160,
 140161,
 140162,
 140163,
 140164,
 140165,
 140166,
 140167,
 140168,
 140169,
 140170,
 140171,
 140172,
 140173,
 140174,
 140175,
 140176,
 140177,
 140178,
 140179,
 140180,
 140181,
 140182,
 140183,
 140184,
 140185,
 140186,
 140187,
 140188,
 140189,
 140190,
 140191,
 140192,
 140193,
 140194,
 140195,
 140196,
 140197,
 140198,
 140199,
 140200,
 140201,
 140202,
 140203,
 140204,
 140205,
 140206,
 140207,
 140208,
 140209,
 140210,
 140211,
 140212,
 140213,
 140214,
 140215,
 140216,
 140217,
 140218,
 140219,
 140220,
 140221,
 140222,
 140223,
 140224,
 140225,
 140226,
 140227,
 140228,
 140229,
 140230,
 140231,
 140232,
 140233,
 140234,
 140235,
 140236,
 140237,
 140238,
 140239,
 140240,
 140241,
 140242,
 140243,
 140244,
 140245,
 140246,
 140247,
 140248,
 140249,
 140250,
 140251,
 140252,
 140253,
 140254,
 140255,
 140256,
 140257,
 140258,
 140259,
 140260,
 140261,
 140262,
 140263,
 140264,
 140265,
 140266,
 140267,
 140268,
 140269,
 140270,
 140271,
 140272,
 140273,
 140274,
 140275,
 140276,
 140277,
 140278,
 140279,
 140280,
 140281,
 140282,
 140283,
 140284,
 140285,
 140286,
 140287,
 140288,
 140289,
 140290,
 140291,
 140292,
 140293,
 140294,
 140295,
 140296,
 140297,
 140298,
 140299,
 140300,
 140301,
 140302,
 140303,
 140304,
 140305,
 140306,
 140307,
 140308,
 140309,
 140310,
 140311,
 140312,
 140313,
 140314,
 140315,
 140316,
 140317,
 140318,
 140319,
 140320,
 140321,
 140322,
 140323,
 140324,
 140325,
 140326,
 140327,
 140328,
 140329,
 140330,
 140331,
 140332,
 140333,
 140334,
 140335,
 140336,
 140337,
 140338,
 140339,
 140340,
 140341,
 140342,
 140343,
 140344,
 140345,
 140346,
 140347,
 140348,
 140349,
 140350,
 140351,
 140352,
 140353,
 140354,
 140355,
 140356,
 140357,
 140358,
 140359,
 140360,
 140361,
 140362,
 140363,
 140364,
 140365,
 140366,
 140367,
 140368,
 140369,
 140370,
 140371,
 140372,
 140373,
 140374,
 140375,
 140376,
 140377,
 140378,
 140379,
 140380,
 140381,
 140382,
 140383,
 140384,
 140385,
 140386,
 140387,
 140388,
 140389,
 140390,
 140391,
 140392,
 ...}
</pre></div></div>
</div>
<p><strong>SUMMARY table (only massive stars)</strong></p>
<p>if we now want to use our set to view a cropped version of the table we can do:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[38]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">eve</span><span class="o">.</span><span class="n">SUMMARY</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">id_massive</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[38]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>M1_ZAMS</th>
      <th>M2_ZAMS</th>
      <th>P_ZAMS</th>
      <th>lifetime_MS</th>
      <th>MT_bool</th>
      <th>CEE_bool</th>
      <th>AGE_end</th>
      <th>M1_end</th>
      <th>M2_end</th>
      <th>P_end</th>
      <th>modelimf</th>
      <th>mixedimf</th>
      <th>type</th>
    </tr>
    <tr>
      <th>MODEL_ID</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>139237</th>
      <td>65.0</td>
      <td>1.0</td>
      <td>39090200.0</td>
      <td>3321112.0</td>
      <td>0</td>
      <td>0</td>
      <td>4002222.0</td>
      <td>19.94971</td>
      <td>1.0</td>
      <td>0.3879680E+09</td>
      <td>0.077866</td>
      <td>0.00000</td>
      <td>-1</td>
    </tr>
    <tr>
      <th>139238</th>
      <td>64.0</td>
      <td>1.0</td>
      <td>39389750.0</td>
      <td>3355019.0</td>
      <td>0</td>
      <td>0</td>
      <td>4033544.0</td>
      <td>19.77729</td>
      <td>1.0</td>
      <td>0.3855040E+09</td>
      <td>0.080755</td>
      <td>0.00000</td>
      <td>-1</td>
    </tr>
    <tr>
      <th>139239</th>
      <td>63.0</td>
      <td>1.0</td>
      <td>39696290.0</td>
      <td>3390314.0</td>
      <td>0</td>
      <td>0</td>
      <td>4065838.0</td>
      <td>19.62953</td>
      <td>1.0</td>
      <td>0.3820573E+09</td>
      <td>0.083800</td>
      <td>0.00000</td>
      <td>-1</td>
    </tr>
    <tr>
      <th>139240</th>
      <td>62.0</td>
      <td>1.0</td>
      <td>40010100.0</td>
      <td>3406536.0</td>
      <td>0</td>
      <td>0</td>
      <td>4099226.0</td>
      <td>19.50653</td>
      <td>1.0</td>
      <td>0.3776276E+09</td>
      <td>0.087011</td>
      <td>0.00000</td>
      <td>-1</td>
    </tr>
    <tr>
      <th>139241</th>
      <td>61.0</td>
      <td>1.0</td>
      <td>40331470.0</td>
      <td>3444347.0</td>
      <td>0</td>
      <td>0</td>
      <td>4133877.0</td>
      <td>19.39798</td>
      <td>1.0</td>
      <td>0.3726069E+09</td>
      <td>0.090400</td>
      <td>0.00000</td>
      <td>-1</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>160727</th>
      <td>9.5</td>
      <td>1.0</td>
      <td>98004320.0</td>
      <td>24806290.0</td>
      <td>0</td>
      <td>0</td>
      <td>29348150.0</td>
      <td>9.15623</td>
      <td>1.0</td>
      <td>0.1047507E+09</td>
      <td>41.799300</td>
      <td>26.05064</td>
      <td>3</td>
    </tr>
    <tr>
      <th>160728</th>
      <td>9.0</td>
      <td>1.0</td>
      <td>100424500.0</td>
      <td>27140890.0</td>
      <td>0</td>
      <td>0</td>
      <td>32336710.0</td>
      <td>8.69743</td>
      <td>1.0</td>
      <td>0.1067887E+09</td>
      <td>98.579450</td>
      <td>19.05651</td>
      <td>3</td>
    </tr>
    <tr>
      <th>160729</th>
      <td>8.5</td>
      <td>1.0</td>
      <td>103033400.0</td>
      <td>30199880.0</td>
      <td>0</td>
      <td>0</td>
      <td>35923690.0</td>
      <td>8.24057</td>
      <td>1.0</td>
      <td>0.1088996E+09</td>
      <td>56.428160</td>
      <td>31.57097</td>
      <td>3</td>
    </tr>
    <tr>
      <th>160730</th>
      <td>8.0</td>
      <td>1.0</td>
      <td>105856800.0</td>
      <td>33624640.0</td>
      <td>0</td>
      <td>0</td>
      <td>40273060.0</td>
      <td>7.78239</td>
      <td>1.0</td>
      <td>0.1111671E+09</td>
      <td>103.634900</td>
      <td>16.64214</td>
      <td>3</td>
    </tr>
    <tr>
      <th>160731</th>
      <td>7.5</td>
      <td>1.0</td>
      <td>108925700.0</td>
      <td>38185990.0</td>
      <td>0</td>
      <td>0</td>
      <td>45620450.0</td>
      <td>7.32357</td>
      <td>1.0</td>
      <td>0.1135919E+09</td>
      <td>96.289360</td>
      <td>28.48787</td>
      <td>3</td>
    </tr>
  </tbody>
</table>
<p>11219 rows × 13 columns</p>
</div></div>
</div>
<p>Let’s create a set of IDs for the models that do meet the explosion criteria at death.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[39]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># models that can explode</span>
<span class="n">id_does_explode</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">eve</span><span class="o">.</span><span class="n">DEATH</span><span class="p">[(</span><span class="n">eve</span><span class="o">.</span><span class="n">DEATH</span><span class="o">.</span><span class="n">CO_core1</span><span class="o">&gt;</span><span class="mf">1.38</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">eve</span><span class="o">.</span><span class="n">DEATH</span><span class="o">.</span><span class="n">ONe_core1</span><span class="o">&gt;</span><span class="mf">0.1</span><span class="p">)]</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p><strong>The advantage of using sets is they have useful LOGIC</strong> such as intersections, so we can easily select the IDs that belong to several sets without having to use tedious loops!</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[41]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">eve</span><span class="o">.</span><span class="n">SUMMARY</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">id_massive</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">id_does_explode</span><span class="p">)]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[41]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>M1_ZAMS</th>
      <th>M2_ZAMS</th>
      <th>P_ZAMS</th>
      <th>lifetime_MS</th>
      <th>MT_bool</th>
      <th>CEE_bool</th>
      <th>AGE_end</th>
      <th>M1_end</th>
      <th>M2_end</th>
      <th>P_end</th>
      <th>modelimf</th>
      <th>mixedimf</th>
      <th>type</th>
    </tr>
    <tr>
      <th>MODEL_ID</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>139237</th>
      <td>65.0</td>
      <td>1.0</td>
      <td>39090200.0</td>
      <td>3321112.0</td>
      <td>0</td>
      <td>0</td>
      <td>4002222.0</td>
      <td>19.94971</td>
      <td>1.0</td>
      <td>0.3879680E+09</td>
      <td>0.077866</td>
      <td>0.00000</td>
      <td>-1</td>
    </tr>
    <tr>
      <th>139238</th>
      <td>64.0</td>
      <td>1.0</td>
      <td>39389750.0</td>
      <td>3355019.0</td>
      <td>0</td>
      <td>0</td>
      <td>4033544.0</td>
      <td>19.77729</td>
      <td>1.0</td>
      <td>0.3855040E+09</td>
      <td>0.080755</td>
      <td>0.00000</td>
      <td>-1</td>
    </tr>
    <tr>
      <th>139242</th>
      <td>60.0</td>
      <td>1.0</td>
      <td>40660710.0</td>
      <td>3483503.0</td>
      <td>0</td>
      <td>0</td>
      <td>4169864.0</td>
      <td>19.30547</td>
      <td>1.0</td>
      <td>0.3669499E+09</td>
      <td>0.093981</td>
      <td>0.00000</td>
      <td>-1</td>
    </tr>
    <tr>
      <th>139244</th>
      <td>58.0</td>
      <td>1.0</td>
      <td>41344130.0</td>
      <td>3545710.0</td>
      <td>0</td>
      <td>0</td>
      <td>4246452.0</td>
      <td>19.13785</td>
      <td>1.0</td>
      <td>0.3548877E+09</td>
      <td>0.101774</td>
      <td>0.00000</td>
      <td>-1</td>
    </tr>
    <tr>
      <th>139245</th>
      <td>57.0</td>
      <td>1.0</td>
      <td>41699020.0</td>
      <td>3567365.0</td>
      <td>0</td>
      <td>0</td>
      <td>4287724.0</td>
      <td>19.03751</td>
      <td>1.0</td>
      <td>0.3493766E+09</td>
      <td>0.106020</td>
      <td>0.00000</td>
      <td>-1</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>160727</th>
      <td>9.5</td>
      <td>1.0</td>
      <td>98004320.0</td>
      <td>24806290.0</td>
      <td>0</td>
      <td>0</td>
      <td>29348150.0</td>
      <td>9.15623</td>
      <td>1.0</td>
      <td>0.1047507E+09</td>
      <td>41.799300</td>
      <td>26.05064</td>
      <td>3</td>
    </tr>
    <tr>
      <th>160728</th>
      <td>9.0</td>
      <td>1.0</td>
      <td>100424500.0</td>
      <td>27140890.0</td>
      <td>0</td>
      <td>0</td>
      <td>32336710.0</td>
      <td>8.69743</td>
      <td>1.0</td>
      <td>0.1067887E+09</td>
      <td>98.579450</td>
      <td>19.05651</td>
      <td>3</td>
    </tr>
    <tr>
      <th>160729</th>
      <td>8.5</td>
      <td>1.0</td>
      <td>103033400.0</td>
      <td>30199880.0</td>
      <td>0</td>
      <td>0</td>
      <td>35923690.0</td>
      <td>8.24057</td>
      <td>1.0</td>
      <td>0.1088996E+09</td>
      <td>56.428160</td>
      <td>31.57097</td>
      <td>3</td>
    </tr>
    <tr>
      <th>160730</th>
      <td>8.0</td>
      <td>1.0</td>
      <td>105856800.0</td>
      <td>33624640.0</td>
      <td>0</td>
      <td>0</td>
      <td>40273060.0</td>
      <td>7.78239</td>
      <td>1.0</td>
      <td>0.1111671E+09</td>
      <td>103.634900</td>
      <td>16.64214</td>
      <td>3</td>
    </tr>
    <tr>
      <th>160731</th>
      <td>7.5</td>
      <td>1.0</td>
      <td>108925700.0</td>
      <td>38185990.0</td>
      <td>0</td>
      <td>0</td>
      <td>45620450.0</td>
      <td>7.32357</td>
      <td>1.0</td>
      <td>0.1135919E+09</td>
      <td>96.289360</td>
      <td>28.48787</td>
      <td>3</td>
    </tr>
  </tbody>
</table>
<p>7829 rows × 13 columns</p>
</div></div>
</div>
<p>Now let’s create more sets for our other conditions to find the <strong>Ib/c CCSNe</strong> and exclude the type II</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[42]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># models that are hydrogen poor at death</span>

<span class="c1"># here I create the mask separately to make the code easier to read and the line not too long</span>
<span class="n">mask_hpoor</span> <span class="o">=</span> <span class="p">(</span><span class="n">eve</span><span class="o">.</span><span class="n">DEATH</span><span class="o">.</span><span class="n">X</span><span class="o">&lt;</span><span class="mf">0.01</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">eve</span><span class="o">.</span><span class="n">DEATH</span><span class="o">.</span><span class="n">MH1</span><span class="o">&lt;</span><span class="mf">0.001</span><span class="p">)</span>
<span class="n">id_hpoor_at_death</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">eve</span><span class="o">.</span><span class="n">DEATH</span><span class="p">[</span><span class="n">mask_hpoor</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[43]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">eve</span><span class="o">.</span><span class="n">SUMMARY</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">id_massive</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">id_does_explode</span><span class="p">)</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">id_hpoor_at_death</span><span class="p">)]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[43]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>M1_ZAMS</th>
      <th>M2_ZAMS</th>
      <th>P_ZAMS</th>
      <th>lifetime_MS</th>
      <th>MT_bool</th>
      <th>CEE_bool</th>
      <th>AGE_end</th>
      <th>M1_end</th>
      <th>M2_end</th>
      <th>P_end</th>
      <th>modelimf</th>
      <th>mixedimf</th>
      <th>type</th>
    </tr>
    <tr>
      <th>MODEL_ID</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>139264</th>
      <td>38.0</td>
      <td>1.00000</td>
      <td>5.085194e+07</td>
      <td>4740355.0</td>
      <td>0</td>
      <td>0</td>
      <td>5654447.0</td>
      <td>15.43550</td>
      <td>1.000000</td>
      <td>0.2863389E+09</td>
      <td>1.059677</td>
      <td>0.0</td>
      <td>-1</td>
    </tr>
    <tr>
      <th>139269</th>
      <td>33.0</td>
      <td>3.30000</td>
      <td>5.270922e+07</td>
      <td>5356467.0</td>
      <td>0</td>
      <td>0</td>
      <td>6374174.0</td>
      <td>13.65394</td>
      <td>3.300000</td>
      <td>0.2416464E+09</td>
      <td>1.721225</td>
      <td>0.0</td>
      <td>-1</td>
    </tr>
    <tr>
      <th>155699</th>
      <td>15.0</td>
      <td>1.99526</td>
      <td>6.889769e-03</td>
      <td>11693350.0</td>
      <td>1</td>
      <td>1</td>
      <td>15929940.0</td>
      <td>2.71254</td>
      <td>3.674444</td>
      <td>0.1258471E-02</td>
      <td>0.012344</td>
      <td>0.0</td>
      <td>2</td>
    </tr>
    <tr>
      <th>155720</th>
      <td>13.0</td>
      <td>1.99526</td>
      <td>6.889769e-03</td>
      <td>14289210.0</td>
      <td>1</td>
      <td>1</td>
      <td>18806370.0</td>
      <td>2.55130</td>
      <td>3.459257</td>
      <td>0.1370293E-02</td>
      <td>0.015927</td>
      <td>0.0</td>
      <td>2</td>
    </tr>
    <tr>
      <th>155764</th>
      <td>10.0</td>
      <td>1.99526</td>
      <td>6.889769e-03</td>
      <td>21717750.0</td>
      <td>1</td>
      <td>1</td>
      <td>27907000.0</td>
      <td>1.78449</td>
      <td>2.580905</td>
      <td>0.2114332E-02</td>
      <td>0.006067</td>
      <td>0.0</td>
      <td>2</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>139259</th>
      <td>43.0</td>
      <td>1.00000</td>
      <td>4.787552e+07</td>
      <td>4314786.0</td>
      <td>0</td>
      <td>0</td>
      <td>5151928.0</td>
      <td>16.19231</td>
      <td>1.000000</td>
      <td>0.3135863E+09</td>
      <td>0.792527</td>
      <td>0.0</td>
      <td>-1</td>
    </tr>
    <tr>
      <th>139260</th>
      <td>42.0</td>
      <td>1.00000</td>
      <td>4.842901e+07</td>
      <td>4396715.0</td>
      <td>0</td>
      <td>0</td>
      <td>5241441.0</td>
      <td>16.02714</td>
      <td>1.000000</td>
      <td>0.3088634E+09</td>
      <td>0.837586</td>
      <td>0.0</td>
      <td>-1</td>
    </tr>
    <tr>
      <th>139261</th>
      <td>41.0</td>
      <td>1.00000</td>
      <td>4.900216e+07</td>
      <td>4483490.0</td>
      <td>0</td>
      <td>0</td>
      <td>5335894.0</td>
      <td>15.88997</td>
      <td>1.000000</td>
      <td>0.3030149E+09</td>
      <td>0.886386</td>
      <td>0.0</td>
      <td>-1</td>
    </tr>
    <tr>
      <th>139262</th>
      <td>40.0</td>
      <td>1.00000</td>
      <td>4.959615e+07</td>
      <td>4575031.0</td>
      <td>0</td>
      <td>0</td>
      <td>5435929.0</td>
      <td>15.74946</td>
      <td>1.000000</td>
      <td>0.2971817E+09</td>
      <td>0.939343</td>
      <td>0.0</td>
      <td>-1</td>
    </tr>
    <tr>
      <th>139263</th>
      <td>39.0</td>
      <td>1.00000</td>
      <td>5.021227e+07</td>
      <td>4672647.0</td>
      <td>0</td>
      <td>0</td>
      <td>5541933.0</td>
      <td>15.59117</td>
      <td>1.000000</td>
      <td>0.2918669E+09</td>
      <td>0.996926</td>
      <td>0.0</td>
      <td>-1</td>
    </tr>
  </tbody>
</table>
<p>2677 rows × 13 columns</p>
</div></div>
</div>
</div>
<div class="section" id="Matching-ejecta-mass-and-remnant-mass">
<h3>Matching ejecta mass and remnant mass<a class="headerlink" href="#Matching-ejecta-mass-and-remnant-mass" title="Permalink to this headline">¶</a></h3>
<p>Here we want a neutron star so we will pick an remnant mass &lt;3 Msol (take your pick). We also said earlier we want ejecta masses between 7 and 15 Msol.</p>
<p>One thing we need to keep in mind is that BPASS models give you remnant masses and ejecta masses for 3 SN energies: * 10e50 ergs (weakSN -&gt; typically electron capture but can use it for partially failed SN) * 10e51 ergs (you’re average SN) * 10e52 ergs (superSN -&gt; useful for superluminous SNe like we have here).</p>
<p>We’ll also use a low Helium mass criteria at the end of the life of the star since we’re looking for a SLSN-Ic: See <a class="reference external" href="https://arxiv.org/pdf/1201.1506.pdf">Hachinger et al. 2012</a></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[44]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># If you have several conditions to write into your masks</span>
<span class="c1"># not that you can go to the next line so the conditions sit on top of each other</span>
<span class="c1"># this makes the code easier to read.</span>
<span class="n">id_ns_matchmej</span> <span class="o">=</span> <span class="p">(</span><span class="n">eve</span><span class="o">.</span><span class="n">DEATH</span><span class="p">[</span>  <span class="p">(</span><span class="n">eve</span><span class="o">.</span><span class="n">DEATH</span><span class="o">.</span><span class="n">Mej_superSN</span><span class="o">&gt;</span><span class="mi">8</span><span class="p">)</span>
                            <span class="o">&amp;</span> <span class="p">(</span><span class="n">eve</span><span class="o">.</span><span class="n">DEATH</span><span class="o">.</span><span class="n">Mej_superSN</span><span class="o">&lt;</span><span class="mi">13</span><span class="p">)</span>
                            <span class="o">&amp;</span> <span class="p">(</span><span class="n">eve</span><span class="o">.</span><span class="n">DEATH</span><span class="o">.</span><span class="n">Mrem_superSN</span><span class="o">&lt;</span><span class="mi">3</span><span class="p">)</span> <span class="c1"># it&#39;s a neutron star</span>
                            <span class="o">&amp;</span> <span class="p">(</span><span class="n">eve</span><span class="o">.</span><span class="n">DEATH</span><span class="o">.</span><span class="n">MHe1</span><span class="o">&lt;</span><span class="mf">0.3</span><span class="p">)</span>       <span class="c1"># not much helium left</span>
                           <span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="Specific-Angular-momentum-(gotta-go-fast-to-make-a-pulsar!)">
<h2>Specific Angular momentum (gotta go fast to make a pulsar!)<a class="headerlink" href="#Specific-Angular-momentum-(gotta-go-fast-to-make-a-pulsar!)" title="Permalink to this headline">¶</a></h2>
<p>Since we said we wanted a Superluminous supernova, we have a good idea that the compact remnant needs to be fast rotating. We can do a back of the envelope calculation to estimate the specific angular momentum j of our remnant and then select only the models that reach a certain (fist spinning) value.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[45]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># first we need the radius of our stars in kilometers</span>
<span class="n">Rsun</span><span class="o">=</span><span class="mi">696340</span>    <span class="c1"># radius of the sun in km</span>

<span class="n">eve</span><span class="o">.</span><span class="n">DEATH</span><span class="p">[</span><span class="s1">&#39;R1km&#39;</span><span class="p">]</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="o">**</span><span class="n">eve</span><span class="o">.</span><span class="n">DEATH</span><span class="p">[</span><span class="s1">&#39;log(R1)&#39;</span><span class="p">])</span><span class="o">*</span><span class="n">Rsun</span> <span class="c1"># in km</span>
</pre></div>
</div>
</div>
<p>Note that here we are adding columns to our tables (in the above case <code class="docutils literal notranslate"><span class="pre">DEATH</span></code>) - <strong>WE ARE NOT ADDING COLUMNS TO THE EVE.HDF5 DATABASE</strong> only to the copy of the data that is contained in our <code class="docutils literal notranslate"><span class="pre">eve</span></code> object. Furthermore if you had another instance, say <code class="docutils literal notranslate"><span class="pre">eve2</span></code> that was created with the same data, these new columns would not appear in <code class="docutils literal notranslate"><span class="pre">eve2</span></code>, they are specific to this one object we are working with. This is very practical because you can mess with the data as much as you want, add, remove,
change columns, to suit your science case. You can then (as we’ll see later) save this work by pickling this <code class="docutils literal notranslate"><span class="pre">hoki.eve.Eve</span></code> instance. All of this without messing with the original data, or with other <code class="docutils literal notranslate"><span class="pre">hoki.eve.Eve</span></code> instances you might be running in the same notbok looking for some other object.</p>
<p>Anyway, <strong>let’s look at the periods</strong>… There is an issue with some of the period columns in that they are not numeric because some values of infinity has made their way in and had been recognised by pandas as strings, making the columns a mix of types (i.e. an object). I only noticed that after I’d compiled the .hdf5 file and left it - in future versions I can clean up the type issue. For now we need to use <code class="docutils literal notranslate"><span class="pre">pands.to_numeric</span></code></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[46]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">eve</span><span class="o">.</span><span class="n">DEATH</span><span class="o">.</span><span class="n">P_bin</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">eve</span><span class="o">.</span><span class="n">DEATH</span><span class="o">.</span><span class="n">P_bin</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Assuming that the rotational velocity of the star is synched with the period (which is okay if they’ve interacted), then we can calculate the rotational velocity in km/s</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[47]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">eve</span><span class="o">.</span><span class="n">DEATH</span><span class="p">[</span><span class="s1">&#39;vrot_kms&#39;</span><span class="p">]</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">eve</span><span class="o">.</span><span class="n">DEATH</span><span class="o">.</span><span class="n">R1km</span><span class="o">.</span><span class="n">values</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">eve</span><span class="o">.</span><span class="n">DEATH</span><span class="o">.</span><span class="n">P_bin</span><span class="o">.</span><span class="n">values</span><span class="o">*</span><span class="mi">365</span><span class="o">*</span><span class="mi">24</span><span class="o">*</span><span class="mi">3600</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
&lt;ipython-input-47-5a731fa27368&gt;:1: RuntimeWarning: divide by zero encountered in true_divide
  eve.DEATH[&#39;vrot_kms&#39;]=(2*np.pi*eve.DEATH.R1km.values)/(eve.DEATH.P_bin.values*365*24*3600)
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[49]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">eve</span><span class="o">.</span><span class="n">DEATH</span><span class="o">.</span><span class="n">vrot_kms</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[49]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
MODEL_ID
139237    3.545347e-10
139238    3.484703e-10
139239    2.049114e-10
139240    2.063293e-10
139241    2.065636e-10
              ...
160756             inf
160757             inf
160758             inf
160759             inf
160760             inf
Name: vrot_kms, Length: 21117, dtype: float64
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[51]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># and we turn the rotational velocity into a specific AM</span>
<span class="n">eve</span><span class="o">.</span><span class="n">DEATH</span><span class="p">[</span><span class="s1">&#39;j_cm2s&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">eve</span><span class="o">.</span><span class="n">DEATH</span><span class="p">[</span><span class="s1">&#39;vrot_kms&#39;</span><span class="p">]</span><span class="o">*</span><span class="n">eve</span><span class="o">.</span><span class="n">DEATH</span><span class="o">.</span><span class="n">R1km</span> <span class="o">*</span> <span class="mf">1e10</span> <span class="c1">#conversion to cm^2</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[55]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># we also create and ID set that is the intersection of the sets we created above</span>
<span class="c1"># that is to make the code easier to read and shorter</span>
<span class="n">id_best_sofar</span> <span class="o">=</span> <span class="n">id_massive</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">id_does_explode</span><span class="p">)</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">id_hpoor_at_death</span><span class="p">)</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">id_ns_matchmej</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[54]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">eve</span><span class="o">.</span><span class="n">DEATH</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">id_best_sofar</span><span class="p">]</span><span class="o">.</span><span class="n">j_cm2s</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[54]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
MODEL_ID
159747    1.967440e+16
159748    1.419265e+16
159750    1.438781e+16
159751    9.292407e+15
159752    6.008772e+15
              ...
158713    2.681758e+16
158714    1.591317e+16
158715    9.968024e+15
158716    6.323594e+15
158717    4.702891e+15
Name: j_cm2s, Length: 116, dtype: float64
</pre></div></div>
</div>
<p>Now we are going to use the properties of our imagined SLSN-I (it’s actually using the values of SN 2017gci) to estimate a value of j that our remnants need to reach:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[56]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">P</span><span class="o">=</span><span class="mf">2.8</span><span class="o">*</span><span class="mf">1e-3</span> <span class="c1">#2.8ms</span>
<span class="n">R</span><span class="o">=</span><span class="mi">10</span><span class="o">*</span><span class="mf">1e3</span><span class="o">*</span><span class="mf">1e2</span> <span class="c1">#10km is a good approx, in cm though</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[62]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">j_17gci</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="o">/</span><span class="mi">5</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">R</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="n">P</span>
<span class="n">j_17gci</span><span class="o">/</span><span class="mf">1e14</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[62]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
8.975979010256552
</pre></div></div>
</div>
<p>so something around 1e15 and above, that’s nice since (from the print out above) a lot of our models already have exceeding values and we’re in the same ballpark in terms of orders of magnitude. <strong>once again we create a set of MODEL_ID</strong></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[64]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">id_enough_rotation</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">eve</span><span class="o">.</span><span class="n">DEATH</span><span class="p">[</span><span class="n">eve</span><span class="o">.</span><span class="n">DEATH</span><span class="o">.</span><span class="n">j_cm2s</span><span class="o">&gt;</span><span class="n">j_17gci</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[65]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">id_best</span> <span class="o">=</span> <span class="n">id_best_sofar</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">id_enough_rotation</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[66]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">eve</span><span class="o">.</span><span class="n">DEATH</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">id_best</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[66]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>timestep</th>
      <th>age</th>
      <th>log(R1)</th>
      <th>log(T1)</th>
      <th>log(L1)</th>
      <th>M1</th>
      <th>He_core1</th>
      <th>CO_core1</th>
      <th>ONe_core1</th>
      <th>Nan9</th>
      <th>...</th>
      <th>V-I</th>
      <th>U</th>
      <th>B</th>
      <th>V</th>
      <th>R</th>
      <th>I</th>
      <th>J</th>
      <th>R1km</th>
      <th>vrot_kms</th>
      <th>j_cm2s</th>
    </tr>
    <tr>
      <th>MODEL_ID</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>159747</th>
      <td>10928.0</td>
      <td>5618206.0</td>
      <td>-0.22646</td>
      <td>5.25413</td>
      <td>5.51683</td>
      <td>10.53407</td>
      <td>0.0</td>
      <td>10.20924</td>
      <td>1.47597</td>
      <td>0.0</td>
      <td>...</td>
      <td>-0.426910</td>
      <td>-5.593392</td>
      <td>-4.584808</td>
      <td>-4.654883</td>
      <td>-4.602030</td>
      <td>-4.227973</td>
      <td>-4.405664</td>
      <td>413391.310173</td>
      <td>4.759268</td>
      <td>1.967440e+16</td>
    </tr>
    <tr>
      <th>159748</th>
      <td>10787.0</td>
      <td>5488492.0</td>
      <td>-0.21599</td>
      <td>5.25719</td>
      <td>5.55003</td>
      <td>11.03129</td>
      <td>0.0</td>
      <td>10.73932</td>
      <td>1.44532</td>
      <td>0.0</td>
      <td>...</td>
      <td>-0.610628</td>
      <td>-5.452509</td>
      <td>-4.432625</td>
      <td>-4.714235</td>
      <td>-4.630044</td>
      <td>-4.103607</td>
      <td>-4.261867</td>
      <td>423478.477630</td>
      <td>3.351446</td>
      <td>1.419265e+16</td>
    </tr>
    <tr>
      <th>159750</th>
      <td>10916.0</td>
      <td>5429943.0</td>
      <td>-0.21712</td>
      <td>5.26568</td>
      <td>5.58173</td>
      <td>11.71055</td>
      <td>0.0</td>
      <td>11.47110</td>
      <td>1.63243</td>
      <td>0.0</td>
      <td>...</td>
      <td>-0.599104</td>
      <td>-5.543197</td>
      <td>-4.523274</td>
      <td>-4.792562</td>
      <td>-4.710203</td>
      <td>-4.193458</td>
      <td>-4.351852</td>
      <td>422378.052252</td>
      <td>3.406383</td>
      <td>1.438781e+16</td>
    </tr>
    <tr>
      <th>159751</th>
      <td>11344.0</td>
      <td>5427022.0</td>
      <td>-0.20820</td>
      <td>5.26706</td>
      <td>5.60508</td>
      <td>12.19142</td>
      <td>0.0</td>
      <td>12.00032</td>
      <td>1.86693</td>
      <td>0.0</td>
      <td>...</td>
      <td>-0.652923</td>
      <td>-5.547994</td>
      <td>-4.528258</td>
      <td>-4.855170</td>
      <td>-4.764397</td>
      <td>-4.202248</td>
      <td>-4.360003</td>
      <td>431143.003804</td>
      <td>2.155296</td>
      <td>9.292407e+15</td>
    </tr>
    <tr>
      <th>159752</th>
      <td>11716.0</td>
      <td>5427732.0</td>
      <td>-0.19781</td>
      <td>5.27005</td>
      <td>5.63783</td>
      <td>12.82921</td>
      <td>0.0</td>
      <td>12.69262</td>
      <td>2.04972</td>
      <td>0.0</td>
      <td>...</td>
      <td>-0.671042</td>
      <td>-5.611740</td>
      <td>-4.592069</td>
      <td>-4.938427</td>
      <td>-4.844900</td>
      <td>-4.267385</td>
      <td>-4.424918</td>
      <td>441581.980700</td>
      <td>1.360738</td>
      <td>6.008772e+15</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>158713</th>
      <td>10523.0</td>
      <td>5433841.0</td>
      <td>-0.22290</td>
      <td>5.26152</td>
      <td>5.55354</td>
      <td>11.19408</td>
      <td>0.0</td>
      <td>10.92697</td>
      <td>1.51714</td>
      <td>0.0</td>
      <td>...</td>
      <td>-0.548907</td>
      <td>-5.522329</td>
      <td>-4.502241</td>
      <td>-4.717961</td>
      <td>-4.643772</td>
      <td>-4.169053</td>
      <td>-4.328015</td>
      <td>416793.889396</td>
      <td>6.434254</td>
      <td>2.681758e+16</td>
    </tr>
    <tr>
      <th>158714</th>
      <td>10931.0</td>
      <td>5430873.0</td>
      <td>-0.21776</td>
      <td>5.26448</td>
      <td>5.57564</td>
      <td>11.60518</td>
      <td>0.0</td>
      <td>11.36546</td>
      <td>1.66942</td>
      <td>0.0</td>
      <td>...</td>
      <td>-0.590261</td>
      <td>-5.536736</td>
      <td>-4.516783</td>
      <td>-4.776623</td>
      <td>-4.695680</td>
      <td>-4.186361</td>
      <td>-4.344857</td>
      <td>421756.071356</td>
      <td>3.773074</td>
      <td>1.591317e+16</td>
    </tr>
    <tr>
      <th>158715</th>
      <td>11255.0</td>
      <td>5427329.0</td>
      <td>-0.21172</td>
      <td>5.26760</td>
      <td>5.60019</td>
      <td>12.07276</td>
      <td>0.0</td>
      <td>11.86242</td>
      <td>1.74400</td>
      <td>0.0</td>
      <td>...</td>
      <td>-0.629136</td>
      <td>-5.559499</td>
      <td>-4.539679</td>
      <td>-4.841098</td>
      <td>-4.754000</td>
      <td>-4.211962</td>
      <td>-4.370004</td>
      <td>427662.670125</td>
      <td>2.330815</td>
      <td>9.968024e+15</td>
    </tr>
    <tr>
      <th>158716</th>
      <td>11684.0</td>
      <td>5427097.0</td>
      <td>-0.20212</td>
      <td>5.27051</td>
      <td>5.63103</td>
      <td>12.68744</td>
      <td>0.0</td>
      <td>12.53888</td>
      <td>1.98375</td>
      <td>0.0</td>
      <td>...</td>
      <td>-0.677210</td>
      <td>-5.588558</td>
      <td>-4.568909</td>
      <td>-4.921893</td>
      <td>-4.827437</td>
      <td>-4.244683</td>
      <td>-4.402140</td>
      <td>437221.332166</td>
      <td>1.446314</td>
      <td>6.323594e+15</td>
    </tr>
    <tr>
      <th>158717</th>
      <td>12170.0</td>
      <td>5430072.0</td>
      <td>-0.15624</td>
      <td>5.25498</td>
      <td>5.66070</td>
      <td>13.46907</td>
      <td>0.0</td>
      <td>13.29260</td>
      <td>2.06366</td>
      <td>0.0</td>
      <td>...</td>
      <td>-0.376628</td>
      <td>-6.022578</td>
      <td>-5.018670</td>
      <td>-5.029058</td>
      <td>-4.985591</td>
      <td>-4.652429</td>
      <td>-4.837749</td>
      <td>485938.538481</td>
      <td>0.967795</td>
      <td>4.702891e+15</td>
    </tr>
  </tbody>
</table>
<p>116 rows × 62 columns</p>
</div></div>
</div>
<p>And it looks like we have selected 116 models out of the &gt;21k we could see in the original SUMMARY table (see below)</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[69]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">eve</span><span class="o">.</span><span class="n">SUMMARY</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[69]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
21117
</pre></div></div>
</div>
<div class="section" id="Let’s-explore-the-BPASS-models!">
<h3>Let’s explore the BPASS models!<a class="headerlink" href="#Let’s-explore-the-BPASS-models!" title="Permalink to this headline">¶</a></h3>
<p>Firstly we’ll need to know where to look. The <code class="docutils literal notranslate"><span class="pre">MODELS_PATH</span></code> in <code class="docutils literal notranslate"><span class="pre">hoki.constants</span></code> contains the local path to the BPASS models <strong>if you have set it up</strong>. You can just temporarily create a MODELS_PATH variable with the path to the model library on your machine, or you can set it up permanently using the <code class="docutils literal notranslate"><span class="pre">hoki.constants.set_models_path</span></code> function (see its documentation for me info. For now you can see that by default it is set to the correct path on my own machine:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[71]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">hc</span><span class="o">.</span><span class="n">MODELS_PATH</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[71]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&#39;/home/fste075/BPASS_hoki_dev/bpass-v2.2-newmodels/&#39;
</pre></div></div>
</div>
<p><strong>[Reading in a model (sneplot) file]</strong></p>
<p>Within <code class="docutils literal notranslate"><span class="pre">hoki.load</span></code> there is a function called <code class="docutils literal notranslate"><span class="pre">dummy_to_dataframe</span></code> which will read in a model file into a dataframe with column names (the same ones we saw above with the <code class="docutils literal notranslate"><span class="pre">DEATH</span></code> table).</p>
<p>Using this we can load in our matching models and plot them on an HR Diagram!</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[72]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>

<span class="k">for</span> <span class="n">_id</span> <span class="ow">in</span> <span class="n">id_best</span><span class="p">:</span> <span class="c1"># id is a keyword in python, using _id avoids overwriting that keyword</span>
    <span class="c1"># As we saw much earlier, ID_TABLE is used to turn integer IDs</span>
    <span class="c1"># into the filename strings we need.</span>
    <span class="n">_fname</span> <span class="o">=</span> <span class="n">eve</span><span class="o">.</span><span class="n">ID_TABLE</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">_id</span><span class="p">]</span><span class="o">.</span><span class="n">filenames</span>
    <span class="c1"># Then we create a temporary dataframe containing the data for that one model</span>
    <span class="c1"># We can just add MODELS_PATH to the filename we just retrieved (make sure MODELS_PATH</span>
    <span class="c1"># ends with a / otherwise it won&#39;t be valid)</span>
    <span class="n">_df</span> <span class="o">=</span> <span class="n">dummy_to_dataframe</span><span class="p">(</span><span class="n">MODELS_PATH</span><span class="o">+</span><span class="n">_fname</span><span class="p">)</span>
    <span class="c1"># finally we can plot our HRD data. Note that a low alpha is used</span>
    <span class="c1"># so that we don&#39;t have an illegible plot.</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;log(T1)&#39;</span><span class="p">],</span> <span class="n">_df</span><span class="p">[</span><span class="s1">&#39;log(L1)&#39;</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">invert_xaxis</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/MIAPBP_EvE_tutorial_62_0.png" src="_images/MIAPBP_EvE_tutorial_62_0.png" />
</div>
</div>
<p>nifty! but we’re going to want do to a lot more than this. First of all plotting our stellar tracks in low alpha tells us where most of the models fall, but <strong>not where most of the probability falls</strong>. Each stellar model is more or less likely to occur (see the section on <code class="docutils literal notranslate"><span class="pre">modelimf</span></code>) and <strong>we have to take that into account</strong> if we want to do the stellar population synthesis bit correctly.</p>
<p>First of all let’s create a new <code class="docutils literal notranslate"><span class="pre">SUMMARY</span></code> table with our favourite models so we don’t need to keep doing <code class="docutils literal notranslate"><span class="pre">.loc[id_best]</span></code> (this is another example of why handling this with an object is super flexible! we can add whatever attribute we want as we go through the analysis)</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[73]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">eve</span><span class="o">.</span><span class="n">SUMMARY_best</span> <span class="o">=</span> <span class="n">eve</span><span class="o">.</span><span class="n">SUMMARY</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">id_best</span><span class="p">]</span>
</pre></div>
</div>
</div>
<p>To get a quick idea of which models are best we can sort using <code class="docutils literal notranslate"><span class="pre">modelimf</span></code></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[75]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">eve</span><span class="o">.</span><span class="n">SUMMARY_best</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;modelimf&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[75]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>M1_ZAMS</th>
      <th>M2_ZAMS</th>
      <th>P_ZAMS</th>
      <th>lifetime_MS</th>
      <th>MT_bool</th>
      <th>CEE_bool</th>
      <th>AGE_end</th>
      <th>M1_end</th>
      <th>M2_end</th>
      <th>P_end</th>
      <th>modelimf</th>
      <th>mixedimf</th>
      <th>type</th>
    </tr>
    <tr>
      <th>MODEL_ID</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>141269</th>
      <td>40.0</td>
      <td>4.0</td>
      <td>0.274287</td>
      <td>4470888.0</td>
      <td>1</td>
      <td>1</td>
      <td>5429815.0</td>
      <td>13.79834</td>
      <td>4.000171</td>
      <td>0.1266157E+00</td>
      <td>1.767013</td>
      <td>0.0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>141270</th>
      <td>40.0</td>
      <td>8.0</td>
      <td>0.274287</td>
      <td>4470888.0</td>
      <td>1</td>
      <td>1</td>
      <td>5429342.0</td>
      <td>13.39695</td>
      <td>8.001817</td>
      <td>0.1049087E+00</td>
      <td>1.706822</td>
      <td>0.0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>141271</th>
      <td>40.0</td>
      <td>12.0</td>
      <td>0.274287</td>
      <td>4470888.0</td>
      <td>1</td>
      <td>1</td>
      <td>5429529.0</td>
      <td>13.58817</td>
      <td>12.047250</td>
      <td>0.1121516E+00</td>
      <td>1.672568</td>
      <td>0.0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>141260</th>
      <td>40.0</td>
      <td>4.0</td>
      <td>0.173063</td>
      <td>4470888.0</td>
      <td>1</td>
      <td>1</td>
      <td>5427357.0</td>
      <td>12.95953</td>
      <td>4.000201</td>
      <td>0.7404644E-01</td>
      <td>1.641982</td>
      <td>0.0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>141261</th>
      <td>40.0</td>
      <td>8.0</td>
      <td>0.173063</td>
      <td>4450443.0</td>
      <td>1</td>
      <td>1</td>
      <td>5427467.0</td>
      <td>12.75270</td>
      <td>8.002334</td>
      <td>0.6476529E-01</td>
      <td>1.619376</td>
      <td>0.0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>141262</th>
      <td>40.0</td>
      <td>12.0</td>
      <td>0.173063</td>
      <td>4470888.0</td>
      <td>1</td>
      <td>1</td>
      <td>5426833.0</td>
      <td>12.88541</td>
      <td>12.053630</td>
      <td>0.7003154E-01</td>
      <td>1.606297</td>
      <td>0.0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>141253</th>
      <td>40.0</td>
      <td>12.0</td>
      <td>0.109195</td>
      <td>4450443.0</td>
      <td>1</td>
      <td>1</td>
      <td>5426638.0</td>
      <td>12.25425</td>
      <td>12.059850</td>
      <td>0.4262797E-01</td>
      <td>1.538057</td>
      <td>0.0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>141251</th>
      <td>40.0</td>
      <td>4.0</td>
      <td>0.109195</td>
      <td>4450443.0</td>
      <td>1</td>
      <td>1</td>
      <td>5426505.0</td>
      <td>12.30724</td>
      <td>4.000213</td>
      <td>0.4360660E-01</td>
      <td>1.521252</td>
      <td>0.0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>141244</th>
      <td>40.0</td>
      <td>12.0</td>
      <td>0.068898</td>
      <td>4450443.0</td>
      <td>1</td>
      <td>1</td>
      <td>5429384.0</td>
      <td>11.76606</td>
      <td>12.068530</td>
      <td>0.2658655E-01</td>
      <td>1.468233</td>
      <td>0.0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>141226</th>
      <td>40.0</td>
      <td>12.0</td>
      <td>0.027429</td>
      <td>4470888.0</td>
      <td>1</td>
      <td>1</td>
      <td>5435845.0</td>
      <td>11.06886</td>
      <td>12.092340</td>
      <td>0.1040865E-01</td>
      <td>1.325502</td>
      <td>0.0</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>We can also get a broad view of the models we picked out with pandas tools like <code class="docutils literal notranslate"><span class="pre">describe()</span></code>. Although note all this is for preliminary data analysis, you wouldn’t use those raw numbers to report in a paper, the progenitor isn’t 43 Msol +/- 12. <strong>DO NOT DO THIS PLEASE</strong>. If you need me to explain in more details why <strong>YOU CANNOT USE THESE NUMBERS RAW TO REPORT YOUR PROGENITOR CHARACTERISTICS</strong> feel free to send me an email.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">eve010</span><span class="o">.</span><span class="n">SUMMARY_best</span><span class="o">.</span><span class="n">M1_ZAMS</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
count    116.000000
mean      43.577586
std       12.065150
min       20.000000
25%       40.000000
50%       40.000000
75%       40.000000
max      120.000000
Name: M1_ZAMS, dtype: float64
</pre></div></div>
</div>
<p>Here is one reason: describe is useful but it can be misleading! Look at the unique values of M1 possible for example…</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">eve</span><span class="o">.</span><span class="n">SUMMARY_best</span><span class="o">.</span><span class="n">M1_ZAMS</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
array([ 40.,  60.,  35.,  80.,  70.,  50.,  20., 120.])
</pre></div></div>
</div>
<p>Clearly a discrete set, because that is the BPASS grid. A standard deviation is a notion valid for Normal distributions, not for our bespoke grid. Also the means in <code class="docutils literal notranslate"><span class="pre">describe</span></code> don’t take into account our pop. synth. So let’s do this now:</p>
</div>
</div>
<div class="section" id="Most-likely-masses-(by-N_imf)">
<h2>Most likely masses (by N_imf)<a class="headerlink" href="#Most-likely-masses-(by-N_imf)" title="Permalink to this headline">¶</a></h2>
<p>Much earlier in the notebook I talked about <code class="docutils literal notranslate"><span class="pre">modelimf</span></code> and <code class="docutils literal notranslate"><span class="pre">mixedimf</span></code>. Well here we need to put them together into a new column we will call <code class="docutils literal notranslate"><span class="pre">N_imf</span></code> because it is the number of each model we can expect in a 1 Million Msol population.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[76]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">eve</span><span class="o">.</span><span class="n">SUMMARY_best</span><span class="p">[</span><span class="s1">&#39;Nimf&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">eve</span><span class="o">.</span><span class="n">SUMMARY_best</span><span class="o">.</span><span class="n">modelimf</span><span class="o">+</span><span class="n">eve</span><span class="o">.</span><span class="n">SUMMARY_best</span><span class="o">.</span><span class="n">mixedimf</span>
<span class="n">eve</span><span class="o">.</span><span class="n">SUMMARY_best</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;M1_ZAMS&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">Nimf</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[76]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
M1_ZAMS
40.0     58.860495
35.0      0.898797
20.0      0.710178
60.0      0.003268
50.0      0.002970
70.0      0.000364
80.0      0.000216
120.0     0.000045
Name: Nimf, dtype: float64
</pre></div></div>
</div>
<p>Now we can once figure out how likely each primary is to occur:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[78]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">total_nimf</span> <span class="o">=</span> <span class="n">eve</span><span class="o">.</span><span class="n">SUMMARY_best</span><span class="o">.</span><span class="n">Nimf</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

<span class="c1"># groupby does what it says on the tin, it groups all rows according to their values in a chosen column</span>
<span class="c1"># in this case M1_ZAMS. We chose how it is grouped (mean, sum, count etc..)</span>
<span class="c1"># then I select the Nimf column as that is the only one I care about reporting</span>
<span class="c1"># and finally I sort it from largest to smallest before normalising it by total_nimf and making it percent</span>
<span class="n">eve</span><span class="o">.</span><span class="n">SUMMARY_best</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;M1_ZAMS&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">Nimf</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">/</span><span class="n">total_nimf</span><span class="o">*</span><span class="mi">100</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[78]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
M1_ZAMS
40.0     97.328148
35.0      1.486197
20.0      1.174307
60.0      0.005403
50.0      0.004911
70.0      0.000602
80.0      0.000357
120.0     0.000075
Name: Nimf, dtype: float64
</pre></div></div>
</div>
<p>So 97% of our matching models in this population have M1 = 40 Msol at birth, there are no models below 20 Msol (and even those only account for 1.1%) and negligible porbabilities for models above 10 Msol although we find some matches at 50, 60, 70, 80 and 120 Msol. <strong>THAT IS HOW YOU WANT TO REPORT THE FINDINGS</strong> I know we are used to error bars, but that is TERRIBLE WAY to summarise these analyses.</p>
<p>Now that I’ve beat my dead horse let’s keep going - we are now going to take a look at the evolution of one model with a close eye. This is where most of these system searches will lead you. First you narrow down which systems are interesting using Eve and the methods shown above, then you go look at the BPASS stellar evolution directly.</p>
<div class="section" id="Looking-at-individual-models.">
<h3>Looking at individual models.<a class="headerlink" href="#Looking-at-individual-models." title="Permalink to this headline">¶</a></h3>
<p>Let’s pick a model at random (not at random: I picked a weird looking one for fun)</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[79]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">eve</span><span class="o">.</span><span class="n">SUMMARY_best</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;Nimf&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[79]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>M1_ZAMS</th>
      <th>M2_ZAMS</th>
      <th>P_ZAMS</th>
      <th>lifetime_MS</th>
      <th>MT_bool</th>
      <th>CEE_bool</th>
      <th>AGE_end</th>
      <th>M1_end</th>
      <th>M2_end</th>
      <th>P_end</th>
      <th>modelimf</th>
      <th>mixedimf</th>
      <th>type</th>
      <th>Nimf</th>
    </tr>
    <tr>
      <th>MODEL_ID</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>141269</th>
      <td>40.0</td>
      <td>4.00000</td>
      <td>0.274287</td>
      <td>4470888.0</td>
      <td>1</td>
      <td>1</td>
      <td>5429815.0</td>
      <td>13.79834</td>
      <td>4.000171</td>
      <td>0.1266157E+00</td>
      <td>1.767013</td>
      <td>0.0</td>
      <td>1</td>
      <td>1.767013</td>
    </tr>
    <tr>
      <th>141270</th>
      <td>40.0</td>
      <td>8.00000</td>
      <td>0.274287</td>
      <td>4470888.0</td>
      <td>1</td>
      <td>1</td>
      <td>5429342.0</td>
      <td>13.39695</td>
      <td>8.001817</td>
      <td>0.1049087E+00</td>
      <td>1.706822</td>
      <td>0.0</td>
      <td>1</td>
      <td>1.706822</td>
    </tr>
    <tr>
      <th>141271</th>
      <td>40.0</td>
      <td>12.00000</td>
      <td>0.274287</td>
      <td>4470888.0</td>
      <td>1</td>
      <td>1</td>
      <td>5429529.0</td>
      <td>13.58817</td>
      <td>12.047250</td>
      <td>0.1121516E+00</td>
      <td>1.672568</td>
      <td>0.0</td>
      <td>1</td>
      <td>1.672568</td>
    </tr>
    <tr>
      <th>141260</th>
      <td>40.0</td>
      <td>4.00000</td>
      <td>0.173063</td>
      <td>4470888.0</td>
      <td>1</td>
      <td>1</td>
      <td>5427357.0</td>
      <td>12.95953</td>
      <td>4.000201</td>
      <td>0.7404644E-01</td>
      <td>1.641982</td>
      <td>0.0</td>
      <td>1</td>
      <td>1.641982</td>
    </tr>
    <tr>
      <th>141261</th>
      <td>40.0</td>
      <td>8.00000</td>
      <td>0.173063</td>
      <td>4450443.0</td>
      <td>1</td>
      <td>1</td>
      <td>5427467.0</td>
      <td>12.75270</td>
      <td>8.002334</td>
      <td>0.6476529E-01</td>
      <td>1.619376</td>
      <td>0.0</td>
      <td>1</td>
      <td>1.619376</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>160049</th>
      <td>70.0</td>
      <td>31.62392</td>
      <td>0.004073</td>
      <td>4371940.0</td>
      <td>1</td>
      <td>0</td>
      <td>5440977.0</td>
      <td>10.20070</td>
      <td>82.294470</td>
      <td>0.1917270E-01</td>
      <td>0.000046</td>
      <td>0.0</td>
      <td>2</td>
      <td>0.000046</td>
    </tr>
    <tr>
      <th>158621</th>
      <td>120.0</td>
      <td>12.58930</td>
      <td>0.027429</td>
      <td>2533937.0</td>
      <td>1</td>
      <td>0</td>
      <td>3440047.0</td>
      <td>10.57277</td>
      <td>30.691660</td>
      <td>0.2393484E-02</td>
      <td>0.000045</td>
      <td>0.0</td>
      <td>2</td>
      <td>0.000045</td>
    </tr>
    <tr>
      <th>160020</th>
      <td>80.0</td>
      <td>31.62328</td>
      <td>0.004362</td>
      <td>4118972.0</td>
      <td>1</td>
      <td>0</td>
      <td>5144425.0</td>
      <td>10.65417</td>
      <td>90.112690</td>
      <td>0.1836079E-01</td>
      <td>0.000034</td>
      <td>0.0</td>
      <td>2</td>
      <td>0.000034</td>
    </tr>
    <tr>
      <th>160048</th>
      <td>70.0</td>
      <td>31.62392</td>
      <td>0.004073</td>
      <td>4371940.0</td>
      <td>1</td>
      <td>0</td>
      <td>5440977.0</td>
      <td>10.20070</td>
      <td>82.294470</td>
      <td>0.1917270E-01</td>
      <td>0.000030</td>
      <td>0.0</td>
      <td>2</td>
      <td>0.000030</td>
    </tr>
    <tr>
      <th>160021</th>
      <td>80.0</td>
      <td>31.62328</td>
      <td>0.004362</td>
      <td>4118972.0</td>
      <td>1</td>
      <td>0</td>
      <td>5144425.0</td>
      <td>10.65417</td>
      <td>90.112690</td>
      <td>0.1836079E-01</td>
      <td>0.000011</td>
      <td>0.0</td>
      <td>2</td>
      <td>0.000011</td>
    </tr>
  </tbody>
</table>
<p>116 rows × 14 columns</p>
</div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[80]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">id_model</span> <span class="o">=</span> <span class="n">eve</span><span class="o">.</span><span class="n">SUMMARY_best</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;Nimf&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<p>Loading a model from the stellar library requires knowing its path, we can convert from MODEL_ID to filename using the <code class="docutils literal notranslate"><span class="pre">ID_TABLE</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[81]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">eve</span><span class="o">.</span><span class="n">ID_TABLE</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">id_model</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[81]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&#39;NEWBINMODS/NEWBINMODS/z006/sneplot-z006-40-0.1-2&#39;
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[82]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># we load our data into a dataframe with the right columns using hoki.load.dummy_to_dataframe</span>
<span class="n">dummy_df</span> <span class="o">=</span> <span class="n">dummy_to_dataframe</span><span class="p">(</span><span class="n">MODELS_PATH</span><span class="o">+</span><span class="n">eve</span><span class="o">.</span><span class="n">ID_TABLE</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">id_model</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[83]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">dummy_df</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[83]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>timestep</th>
      <th>age</th>
      <th>log(R1)</th>
      <th>log(T1)</th>
      <th>log(L1)</th>
      <th>M1</th>
      <th>He_core1</th>
      <th>CO_core1</th>
      <th>ONe_core1</th>
      <th>Nan9</th>
      <th>...</th>
      <th>f300w2</th>
      <th>f336w2</th>
      <th>f435w2</th>
      <th>f450w2</th>
      <th>f555w2</th>
      <th>f606w2</th>
      <th>f814w2</th>
      <th>Halpha</th>
      <th>FUV</th>
      <th>NUV</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.0</td>
      <td>0.000</td>
      <td>0.97038</td>
      <td>4.61220</td>
      <td>5.34281</td>
      <td>40.00000</td>
      <td>0.0</td>
      <td>0.00001</td>
      <td>0.00000</td>
      <td>0.0</td>
      <td>...</td>
      <td>-1.237489</td>
      <td>-1.015627</td>
      <td>0.010051</td>
      <td>0.045032</td>
      <td>0.167154</td>
      <td>0.207036</td>
      <td>0.351422</td>
      <td>49.01473</td>
      <td>36.70769</td>
      <td>36.22317</td>
    </tr>
    <tr>
      <th>1</th>
      <td>100.0</td>
      <td>3627.553</td>
      <td>0.91835</td>
      <td>4.64589</td>
      <td>5.37351</td>
      <td>39.99897</td>
      <td>0.0</td>
      <td>0.00000</td>
      <td>0.00000</td>
      <td>0.0</td>
      <td>...</td>
      <td>-1.237514</td>
      <td>-1.015652</td>
      <td>0.010026</td>
      <td>0.045007</td>
      <td>0.167129</td>
      <td>0.207011</td>
      <td>0.351397</td>
      <td>49.11522</td>
      <td>36.67072</td>
      <td>36.17228</td>
    </tr>
    <tr>
      <th>2</th>
      <td>200.0</td>
      <td>39673.240</td>
      <td>0.89581</td>
      <td>4.65121</td>
      <td>5.34971</td>
      <td>39.98932</td>
      <td>0.0</td>
      <td>0.00000</td>
      <td>0.00000</td>
      <td>0.0</td>
      <td>...</td>
      <td>-1.237590</td>
      <td>-1.015727</td>
      <td>0.009951</td>
      <td>0.044931</td>
      <td>0.167053</td>
      <td>0.206935</td>
      <td>0.351321</td>
      <td>49.09683</td>
      <td>36.63593</td>
      <td>36.13750</td>
    </tr>
    <tr>
      <th>3</th>
      <td>300.0</td>
      <td>539810.300</td>
      <td>0.92718</td>
      <td>4.64130</td>
      <td>5.37281</td>
      <td>39.84777</td>
      <td>0.0</td>
      <td>0.00000</td>
      <td>0.00000</td>
      <td>0.0</td>
      <td>...</td>
      <td>-1.238756</td>
      <td>-1.016837</td>
      <td>0.009015</td>
      <td>0.044003</td>
      <td>0.166157</td>
      <td>0.206049</td>
      <td>0.350466</td>
      <td>49.10769</td>
      <td>36.68012</td>
      <td>36.18160</td>
    </tr>
    <tr>
      <th>4</th>
      <td>400.0</td>
      <td>1345856.000</td>
      <td>0.96097</td>
      <td>4.63452</td>
      <td>5.41327</td>
      <td>39.57804</td>
      <td>0.0</td>
      <td>0.00000</td>
      <td>0.00000</td>
      <td>0.0</td>
      <td>...</td>
      <td>-1.240647</td>
      <td>-1.018639</td>
      <td>0.007486</td>
      <td>0.042488</td>
      <td>0.164691</td>
      <td>0.204597</td>
      <td>0.349063</td>
      <td>49.13902</td>
      <td>36.73828</td>
      <td>36.23923</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>125</th>
      <td>12500.0</td>
      <td>5429815.000</td>
      <td>-0.13999</td>
      <td>5.25100</td>
      <td>5.67727</td>
      <td>13.79835</td>
      <td>0.0</td>
      <td>13.46089</td>
      <td>1.19353</td>
      <td>0.0</td>
      <td>...</td>
      <td>-1.250536</td>
      <td>-1.028079</td>
      <td>-0.000566</td>
      <td>0.034503</td>
      <td>0.156958</td>
      <td>0.196937</td>
      <td>0.341650</td>
      <td>49.54843</td>
      <td>37.43567</td>
      <td>36.16653</td>
    </tr>
    <tr>
      <th>126</th>
      <td>12600.0</td>
      <td>5429815.000</td>
      <td>-0.13355</td>
      <td>5.24735</td>
      <td>5.67553</td>
      <td>13.79834</td>
      <td>0.0</td>
      <td>13.46342</td>
      <td>1.55636</td>
      <td>0.0</td>
      <td>...</td>
      <td>-1.250536</td>
      <td>-1.028079</td>
      <td>-0.000566</td>
      <td>0.034503</td>
      <td>0.156958</td>
      <td>0.196937</td>
      <td>0.341650</td>
      <td>49.54507</td>
      <td>37.43893</td>
      <td>36.16934</td>
    </tr>
    <tr>
      <th>127</th>
      <td>12700.0</td>
      <td>5429815.000</td>
      <td>-0.12842</td>
      <td>5.24440</td>
      <td>5.67401</td>
      <td>13.79834</td>
      <td>0.0</td>
      <td>13.46331</td>
      <td>1.87427</td>
      <td>0.0</td>
      <td>...</td>
      <td>-1.250536</td>
      <td>-1.028079</td>
      <td>-0.000566</td>
      <td>0.034503</td>
      <td>0.156958</td>
      <td>0.196937</td>
      <td>0.341650</td>
      <td>49.54211</td>
      <td>37.44044</td>
      <td>36.17529</td>
    </tr>
    <tr>
      <th>128</th>
      <td>12764.0</td>
      <td>5429815.000</td>
      <td>-0.12487</td>
      <td>5.24235</td>
      <td>5.67289</td>
      <td>13.79834</td>
      <td>0.0</td>
      <td>13.46613</td>
      <td>2.07038</td>
      <td>0.0</td>
      <td>...</td>
      <td>-1.250536</td>
      <td>-1.028079</td>
      <td>-0.000566</td>
      <td>0.034503</td>
      <td>0.156958</td>
      <td>0.196937</td>
      <td>0.341650</td>
      <td>49.54033</td>
      <td>37.44062</td>
      <td>36.17820</td>
    </tr>
    <tr>
      <th>129</th>
      <td>12764.0</td>
      <td>5429815.000</td>
      <td>-0.12487</td>
      <td>5.24235</td>
      <td>5.67289</td>
      <td>13.79834</td>
      <td>0.0</td>
      <td>13.46613</td>
      <td>2.07038</td>
      <td>0.0</td>
      <td>...</td>
      <td>-1.250536</td>
      <td>-1.028079</td>
      <td>-0.000566</td>
      <td>0.034503</td>
      <td>0.156958</td>
      <td>0.196937</td>
      <td>0.341650</td>
      <td>49.54033</td>
      <td>37.44062</td>
      <td>36.17820</td>
    </tr>
  </tbody>
</table>
<p>130 rows × 96 columns</p>
</div></div>
</div>
<p>In the plots we are going to make we will want to show the episodes of mass transfer and common envelope. Using the same criteria as mentioned in the introduction we create masks for our dataframe that will allow us to select only these steps of the evolution for some of our plotting. Note I’ve added most of the explanation of what each plot does in the comments of the code because I feel that this could end up being copy-pasted straight into other scripts: this way you have the meaning and goal
of each plot explained in your code.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[85]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">cee_mask</span> <span class="o">=</span> <span class="p">(</span><span class="n">dummy_df</span><span class="p">[</span><span class="s1">&#39;log(R1)&#39;</span><span class="p">]</span><span class="o">&gt;</span><span class="n">dummy_df</span><span class="p">[</span><span class="s1">&#39;log(a)&#39;</span><span class="p">])</span>
<span class="n">mt_mask</span> <span class="o">=</span> <span class="p">(</span><span class="n">dummy_df</span><span class="p">[</span><span class="s1">&#39;DM1R&#39;</span><span class="p">]</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[86]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># We want 3 plots in a row - I picked a convenient size for the notebook</span>
<span class="c1"># feel free to amend for your own plotting needs.</span>
<span class="n">f</span><span class="p">,</span> <span class="n">ax0</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">ncols</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">nrows</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="c1"># I decided to name each axis in the array to type fewer square brackets - very optional</span>
<span class="n">ax</span><span class="p">,</span> <span class="n">ax1</span><span class="p">,</span> <span class="n">ax2</span> <span class="o">=</span> <span class="n">ax0</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ax0</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">,</span> <span class="n">ax0</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>


<span class="c1"># PLOT 0</span>
<span class="c1"># this plot shows the radius and period evolution over the life of the stars</span>
<span class="c1"># it also shows the mass as it&#39;s interesting to see where most of the mass is lost</span>
<span class="c1"># especially with respect to the stages of mass transfer.</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">dummy_df</span><span class="p">[</span><span class="s1">&#39;timestep&#39;</span><span class="p">],</span> <span class="n">dummy_df</span><span class="p">[</span><span class="s1">&#39;log(a)&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;log(a/R$_{\odot}$)&#39;</span><span class="p">,</span>
        <span class="n">color</span><span class="o">=</span><span class="s1">&#39;magenta&#39;</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">dummy_df</span><span class="p">[</span><span class="s1">&#39;timestep&#39;</span><span class="p">],</span> <span class="n">dummy_df</span><span class="p">[</span><span class="s1">&#39;log(R1)&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;log(R/R$_{\odot}$)&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">dummy_df</span><span class="o">.</span><span class="n">timestep</span><span class="p">,</span> <span class="n">dummy_df</span><span class="o">.</span><span class="n">P_bin</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;P (years)&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;darkred&#39;</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">dummy_df</span><span class="p">[</span><span class="s1">&#39;timestep&#39;</span><span class="p">],</span> <span class="n">dummy_df</span><span class="p">[</span><span class="s1">&#39;MH1&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;MH1 (M$_{\odot}$)&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Highlighting the common envelope evolution and RLOF</span>
<span class="n">ax</span><span class="o">.</span><span class="n">axvspan</span><span class="p">(</span><span class="n">dummy_df</span><span class="p">[</span><span class="n">mt_mask</span><span class="p">]</span><span class="o">.</span><span class="n">timestep</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span>
                 <span class="n">dummy_df</span><span class="p">[</span><span class="n">mt_mask</span><span class="p">]</span><span class="o">.</span><span class="n">timestep</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;orange&#39;</span><span class="p">,</span>
                 <span class="n">label</span><span class="o">=</span><span class="s1">&#39;RLOF&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">axvspan</span><span class="p">(</span><span class="n">dummy_df</span><span class="p">[</span><span class="n">cee_mask</span><span class="p">]</span><span class="o">.</span><span class="n">timestep</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span>
                 <span class="n">dummy_df</span><span class="p">[</span><span class="n">cee_mask</span><span class="p">]</span><span class="o">.</span><span class="n">timestep</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span>
                 <span class="n">label</span><span class="o">=</span><span class="s1">&#39;CE&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Timestep&#39;</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">)</span>

<span class="c1"># PLOT 1</span>
<span class="c1"># this plot shows the evolution of the cores&#39; mass coordinates and the mass of the two companions.</span>
<span class="c1"># Note that when He_core1 == M1 then the value of He_core1 drops to 0. That is because</span>
<span class="c1"># when the helium core mass cordinate reaches the outside of the star it&#39;s no longer a core... it&#39;s</span>
<span class="c1"># just a helium star. You could fix the plotting by just plotting M1 as He_core1 beyond that.</span>
<span class="c1"># This plot is useful to know where the mass transfer and CEE occurs with respect to the</span>
<span class="c1"># main sequence and post main sequence evolution.</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">dummy_df</span><span class="p">[</span><span class="s1">&#39;timestep&#39;</span><span class="p">],</span> <span class="n">dummy_df</span><span class="p">[</span><span class="s1">&#39;M1&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;M1 (M$_{\odot}$)&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">dummy_df</span><span class="p">[</span><span class="s1">&#39;timestep&#39;</span><span class="p">],</span> <span class="n">dummy_df</span><span class="p">[</span><span class="s1">&#39;M2&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;M2 (M$_{\odot}$)&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">dummy_df</span><span class="p">[</span><span class="s1">&#39;timestep&#39;</span><span class="p">],</span> <span class="n">dummy_df</span><span class="p">[</span><span class="s1">&#39;He_core1&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;He core (M$_{\odot}$)&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">dummy_df</span><span class="p">[</span><span class="s1">&#39;timestep&#39;</span><span class="p">],</span> <span class="n">dummy_df</span><span class="p">[</span><span class="s1">&#39;CO_core1&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;CO core (M$_{\odot}$)&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">dummy_df</span><span class="p">[</span><span class="s1">&#39;timestep&#39;</span><span class="p">],</span> <span class="n">dummy_df</span><span class="p">[</span><span class="s1">&#39;ONe_core1&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;ONe core (M$_{\odot}$)&#39;</span><span class="p">)</span>


<span class="c1"># Highlighting the common envelope evolution and RLOF</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">axvspan</span><span class="p">(</span><span class="n">dummy_df</span><span class="p">[</span><span class="n">mt_mask</span><span class="p">]</span><span class="o">.</span><span class="n">timestep</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span>
                 <span class="n">dummy_df</span><span class="p">[</span><span class="n">mt_mask</span><span class="p">]</span><span class="o">.</span><span class="n">timestep</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;orange&#39;</span><span class="p">,</span>
                  <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>

<span class="n">ax1</span><span class="o">.</span><span class="n">axvspan</span><span class="p">(</span><span class="n">dummy_df</span><span class="p">[</span><span class="n">cee_mask</span><span class="p">]</span><span class="o">.</span><span class="n">timestep</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span>
                <span class="n">dummy_df</span><span class="p">[</span><span class="n">cee_mask</span><span class="p">]</span><span class="o">.</span><span class="n">timestep</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span>
                  <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>

<span class="n">ax1</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">51</span><span class="p">])</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Timestep&#39;</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">)</span>


<span class="c1"># PLOT2</span>
<span class="c1"># This is just your HR Diagram! I like to plot the evolutionary track as a continuous line and overplot</span>
<span class="c1"># in large markers a scatter plot so we can see where each timestep (that recorded the data of the plots 0</span>
<span class="c1"># and 1) is - as we can see those timesteps are denser in areas that change more rapidly.</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">dummy_df</span><span class="p">[</span><span class="s1">&#39;log(T1)&#39;</span><span class="p">],</span> <span class="n">dummy_df</span><span class="p">[</span><span class="s1">&#39;log(L1)&#39;</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;grey&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">dummy_df</span><span class="p">[</span><span class="s1">&#39;log(T1)&#39;</span><span class="p">],</span> <span class="n">dummy_df</span><span class="p">[</span><span class="s1">&#39;log(L1)&#39;</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;grey&#39;</span><span class="p">)</span>
<span class="c1"># plotting the common envelope evolution time steps in a different colour</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">dummy_df</span><span class="p">[</span><span class="n">cee_mask</span><span class="p">][</span><span class="s1">&#39;log(T1)&#39;</span><span class="p">],</span> <span class="n">dummy_df</span><span class="p">[</span><span class="n">cee_mask</span><span class="p">][</span><span class="s1">&#39;log(L1)&#39;</span><span class="p">],</span>
            <span class="n">zorder</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;crimson&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;h&#39;</span><span class="p">,</span><span class="n">s</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="c1"># plotting the stable mass transfer time steps in a different colour</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">dummy_df</span><span class="p">[</span><span class="n">mt_mask</span><span class="p">][</span><span class="s1">&#39;log(T1)&#39;</span><span class="p">],</span> <span class="n">dummy_df</span><span class="p">[</span><span class="n">mt_mask</span><span class="p">][</span><span class="s1">&#39;log(L1)&#39;</span><span class="p">],</span>
            <span class="n">color</span><span class="o">=</span><span class="s1">&#39;orange&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;h&#39;</span><span class="p">,</span><span class="n">s</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

<span class="c1"># YOU MIGHT WANT TO ADJUST THESE RANGES FOR OTHER MODELS</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="mf">5.2001</span><span class="p">,</span> <span class="mf">5.9</span><span class="p">])</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">([</span><span class="mf">5.4</span><span class="p">,</span> <span class="mf">3.5</span><span class="p">])</span>
<span class="c1"># This is just a mroe convenient location for the labels. Padding will need to change if size changes</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;log(L/L$_{\odot}$)&#39;</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;top&#39;</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=-</span><span class="mi">50</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;log(T)&#39;</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=-</span><span class="mi">35</span><span class="p">)</span>


<span class="n">ax2</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;log(T)&#39;</span><span class="p">,</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span><span class="n">labelpad</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[86]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Text(1, 0, &#39;log(T)&#39;)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/MIAPBP_EvE_tutorial_85_1.png" src="_images/MIAPBP_EvE_tutorial_85_1.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[89]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># just checking M2 does increase in mass at least a bit.. it&#39;s a weird model</span>
<span class="c1"># but if it stayed at 4.0 the whole time it would be worryingly weird</span>
<span class="n">dummy_df</span><span class="o">.</span><span class="n">M2</span><span class="o">.</span><span class="n">values</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[89]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
array([4.      , 4.      , 4.      , 4.      , 4.      , 4.      ,
       4.      , 4.      , 4.      , 4.      , 4.      , 4.      ,
       4.      , 4.      , 4.      , 4.      , 4.      , 4.      ,
       4.      , 4.      , 4.      , 4.      , 4.      , 4.      ,
       4.      , 4.      , 4.      , 4.      , 4.      , 4.      ,
       4.      , 4.      , 4.      , 4.      , 4.      , 4.000171,
       4.000171, 4.000171, 4.000171, 4.000171, 4.000171, 4.000171,
       4.000171, 4.000171, 4.000171, 4.000171, 4.000171, 4.000171,
       4.000171, 4.000171, 4.000171, 4.000171, 4.000171, 4.000171,
       4.000171, 4.000171, 4.000171, 4.000171, 4.000171, 4.000171,
       4.000171, 4.000171, 4.000171, 4.000171, 4.000171, 4.000171,
       4.000171, 4.000171, 4.000171, 4.000171, 4.000171, 4.000171,
       4.000171, 4.000171, 4.000171, 4.000171, 4.000171, 4.000171,
       4.000171, 4.000171, 4.000171, 4.000171, 4.000171, 4.000171,
       4.000171, 4.000171, 4.000171, 4.000171, 4.000171, 4.000171,
       4.000171, 4.000171, 4.000171, 4.000171, 4.000171, 4.000171,
       4.000171, 4.000171, 4.000171, 4.000171, 4.000171, 4.000171,
       4.000171, 4.000171, 4.000171, 4.000171, 4.000171, 4.000171,
       4.000171, 4.000171, 4.000171, 4.000171, 4.000171, 4.000171,
       4.000171, 4.000171, 4.000171, 4.000171, 4.000171, 4.000171,
       4.000171, 4.000171, 4.000171, 4.000171, 4.000171, 4.000171,
       4.000171, 4.000171, 4.000171, 4.000171])
</pre></div></div>
</div>
<p>Okay I did say I picked a weirdo model, apparently this secondary gains very little mass and the mass -&gt; probably because most of the RLOF timesteps are CEE and that leads to mostly mass ejection.</p>
<p>If you want to look at some “real life” models that came up in publications recently you can check the <a class="reference external" href="https://ui.adsabs.harvard.edu/abs/2021MNRAS.504L..51S/abstract">SN 2017gci paper</a> (SLSN-I), the <a class="reference external" href="https://ui.adsabs.harvard.edu/abs/2022MNRAS.511L..77S/abstract">NGC 1851-BH1 paper</a> (quiescent black hole binary.. or not), the <a class="reference external" href="https://ui.adsabs.harvard.edu/abs/2022arXiv220802258S/abstract">VFTS 243 paper</a> (quiescent black hole binary, for real).</p>
</div>
<div class="section" id="Preserve-your-results-with-pickle!">
<h3>Preserve your results with pickle!<a class="headerlink" href="#Preserve-your-results-with-pickle!" title="Permalink to this headline">¶</a></h3>
<p>Finally let us save our <code class="docutils literal notranslate"><span class="pre">Eve</span></code> object with all of our extra columns and the new table so that we don’t have to rerun all this when we continue our analysis tomorrow.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[91]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">pickle</span>

<span class="n">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;myeve.pkl&#39;</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="c1"># open a file, where you ant to store the data</span>
<span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">eve</span><span class="p">,</span> <span class="n">file</span><span class="p">)</span> <span class="c1"># dump information to that file</span>
<span class="n">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span> <span class="c1"># close the file</span>
</pre></div>
</div>
</div>
<p>And if you want to open your object again you can do:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[92]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;myeve.pkl&#39;</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span>
<span class="n">eve_again</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
<span class="n">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[93]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">eve_again</span><span class="o">.</span><span class="n">SUMMARY_best</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[93]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>M1_ZAMS</th>
      <th>M2_ZAMS</th>
      <th>P_ZAMS</th>
      <th>lifetime_MS</th>
      <th>MT_bool</th>
      <th>CEE_bool</th>
      <th>AGE_end</th>
      <th>M1_end</th>
      <th>M2_end</th>
      <th>P_end</th>
      <th>modelimf</th>
      <th>mixedimf</th>
      <th>type</th>
      <th>Nimf</th>
    </tr>
    <tr>
      <th>MODEL_ID</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>159747</th>
      <td>40.0</td>
      <td>25.1189</td>
      <td>0.006890</td>
      <td>4660114.0</td>
      <td>1</td>
      <td>0</td>
      <td>5618206.0</td>
      <td>10.53407</td>
      <td>46.20547</td>
      <td>0.1730591E-01</td>
      <td>0.000821</td>
      <td>0.000000</td>
      <td>2</td>
      <td>0.000821</td>
    </tr>
    <tr>
      <th>159748</th>
      <td>40.0</td>
      <td>25.1189</td>
      <td>0.010920</td>
      <td>4585610.0</td>
      <td>1</td>
      <td>0</td>
      <td>5488492.0</td>
      <td>11.03129</td>
      <td>45.24818</td>
      <td>0.2517517E-01</td>
      <td>0.001601</td>
      <td>0.000000</td>
      <td>2</td>
      <td>0.001601</td>
    </tr>
    <tr>
      <th>159750</th>
      <td>40.0</td>
      <td>25.1189</td>
      <td>0.027429</td>
      <td>4454813.0</td>
      <td>1</td>
      <td>1</td>
      <td>5429943.0</td>
      <td>11.71055</td>
      <td>27.49449</td>
      <td>0.2470479E-01</td>
      <td>0.002769</td>
      <td>0.000000</td>
      <td>2</td>
      <td>0.002769</td>
    </tr>
    <tr>
      <th>159751</th>
      <td>40.0</td>
      <td>25.1189</td>
      <td>0.043472</td>
      <td>4454813.0</td>
      <td>1</td>
      <td>1</td>
      <td>5427022.0</td>
      <td>12.19142</td>
      <td>27.17696</td>
      <td>0.3985545E-01</td>
      <td>0.003708</td>
      <td>0.013488</td>
      <td>2</td>
      <td>0.017196</td>
    </tr>
    <tr>
      <th>159752</th>
      <td>40.0</td>
      <td>25.1189</td>
      <td>0.068898</td>
      <td>4454813.0</td>
      <td>1</td>
      <td>1</td>
      <td>5427732.0</td>
      <td>12.82921</td>
      <td>26.93096</td>
      <td>0.6465621E-01</td>
      <td>0.005269</td>
      <td>0.296793</td>
      <td>2</td>
      <td>0.302062</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>158713</th>
      <td>40.0</td>
      <td>12.5893</td>
      <td>0.017306</td>
      <td>4454813.0</td>
      <td>1</td>
      <td>1</td>
      <td>5433841.0</td>
      <td>11.19408</td>
      <td>14.40241</td>
      <td>0.1290614E-01</td>
      <td>0.003516</td>
      <td>0.116958</td>
      <td>2</td>
      <td>0.120474</td>
    </tr>
    <tr>
      <th>158714</th>
      <td>40.0</td>
      <td>12.5893</td>
      <td>0.027429</td>
      <td>4454813.0</td>
      <td>1</td>
      <td>1</td>
      <td>5430873.0</td>
      <td>11.60518</td>
      <td>13.67144</td>
      <td>0.2227098E-01</td>
      <td>0.008946</td>
      <td>0.376418</td>
      <td>2</td>
      <td>0.385365</td>
    </tr>
    <tr>
      <th>158715</th>
      <td>40.0</td>
      <td>12.5893</td>
      <td>0.043472</td>
      <td>4454813.0</td>
      <td>1</td>
      <td>1</td>
      <td>5427329.0</td>
      <td>12.07276</td>
      <td>13.54084</td>
      <td>0.3655669E-01</td>
      <td>0.023674</td>
      <td>0.476126</td>
      <td>2</td>
      <td>0.499800</td>
    </tr>
    <tr>
      <th>158716</th>
      <td>40.0</td>
      <td>12.5893</td>
      <td>0.068898</td>
      <td>4454813.0</td>
      <td>1</td>
      <td>1</td>
      <td>5427097.0</td>
      <td>12.68744</td>
      <td>13.43443</td>
      <td>0.6022988E-01</td>
      <td>0.104141</td>
      <td>0.604571</td>
      <td>2</td>
      <td>0.708711</td>
    </tr>
    <tr>
      <th>158717</th>
      <td>40.0</td>
      <td>12.5893</td>
      <td>0.109195</td>
      <td>4454813.0</td>
      <td>1</td>
      <td>1</td>
      <td>5430072.0</td>
      <td>13.46907</td>
      <td>13.34467</td>
      <td>0.1000394E+00</td>
      <td>0.275734</td>
      <td>0.529478</td>
      <td>2</td>
      <td>0.805212</td>
    </tr>
  </tbody>
</table>
<p>116 rows × 14 columns</p>
</div></div>
</div>
<p>And as you can see it contains the new attributes that we created like <code class="docutils literal notranslate"><span class="pre">SUMMARY_best</span></code>!</p>
</div>
<hr class="docutils" />
<div class="section" id="If-you-have-a-question-or-a-complain…">
<h3>If you have a question or a complain…<a class="headerlink" href="#If-you-have-a-question-or-a-complain…" title="Permalink to this headline">¶</a></h3>
<p>I’ve said it already but it is worth repeating. Let me know if you have questions or issues! You can start an issue on the <a class="reference external" href="https://github.com/HeloiseS/hoki">hoki</a> github or send me an e-mail (<a class="reference external" href="mailto:hfstevance&#37;&#52;&#48;gmail&#46;com">hfstevance<span>&#64;</span>gmail<span>&#46;</span>com</a>).</p>
<p>Now go and find your stars!</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="CMDs.html" class="btn btn-neutral float-right" title="Colour Magnitude Diagrams" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="Fitting_SEDs_of_a_data_cube_with_BPASS-hoki-ppxf.html" class="btn btn-neutral float-left" title="SED fitting of a data cube" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2022, heloise stevance.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>