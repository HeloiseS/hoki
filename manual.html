

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Dependencies &mdash; hoki v1.7.1 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="_static/favicon.png"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Complex Model Search" href="ModelSearch.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #FFA428" >
          

          
            <a href="index.html" class="icon icon-home"> hoki
          

          
            
            <img src="_static/hoki_white.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="intro.html">What is Hoki?</a></li>
<li class="toctree-l1"><a class="reference internal" href="citation.html"><strong>Citing Us</strong></a></li>
</ul>
<p class="caption"><span class="caption-text">Model Outputs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="quick_start.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="Transient_rates.html">Transient rates</a></li>
<li class="toctree-l1"><a class="reference internal" href="HR_diagrams.html">HR diagrams</a></li>
<li class="toctree-l1"><a class="reference internal" href="Spectra.html">Spectra</a></li>
</ul>
<p class="caption"><span class="caption-text">SED Fitting</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="sedfitting.html">SED fiting with BPASS and hoki</a></li>
<li class="toctree-l1"><a class="reference internal" href="Voronoi_binning_of_SED_data.html">Vornoi Binning and retrieveing SEDs of the binned data</a></li>
<li class="toctree-l1"><a class="reference internal" href="Fitting_the_region_around_the_transient.html">SED fitting of a transient neighbourhood</a></li>
<li class="toctree-l1"><a class="reference internal" href="Fitting_SEDs_of_a_data_cube_with_BPASS-hoki-ppxf.html">SED fitting of a data cube</a></li>
</ul>
<p class="caption"><span class="caption-text">Searching BPASS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="MIAPBP_EvE_tutorial.html">Searching for specific star systems in BPASS using EvE</a></li>
</ul>
<p class="caption"><span class="caption-text">Misc Recipes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="CMDs.html">Colour Magnitude Diagrams</a></li>
<li class="toctree-l1"><a class="reference internal" href="ComplexStellarPopulations.html">Complex Stellar Histories</a></li>
<li class="toctree-l1"><a class="reference internal" href="AgeWizard.html">Age Wizard</a></li>
<li class="toctree-l1"><a class="reference internal" href="ModelDataCompiler.html">Model Data Compiler</a></li>
<li class="toctree-l1"><a class="reference internal" href="ModelSearch.html">Complex Model Search</a></li>
</ul>
<p class="caption"><span class="caption-text">Full Documentation</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#"><strong>Dependencies</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="#module-hoki.cmd"><strong>hoki.cmd</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="#hoki-constants"><strong>hoki.constants</strong></a><ul>
<li class="toctree-l2"><a class="reference internal" href="#bpass-and-hoki-constants">BPASS and hoki constants</a></li>
<li class="toctree-l2"><a class="reference internal" href="#functions">Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#variables">Variables</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#module-hoki.eve"><strong>hoki.eve</strong></a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id3">hoki.eve</a></li>
<li class="toctree-l2"><a class="reference internal" href="#description">Description</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#module-hoki.load"><strong>hoki.load</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="#module-hoki.hrdiagrams"><strong>hoki.hrdiagrams</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="#module-hoki.age.wizard"><strong>hoki.age</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="#module-hoki.csp.csp"><strong>hoki.csp</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="#hoki-sedfitting"><strong>hoki.sedfitting</strong></a></li>
</ul>
<p class="caption"><span class="caption-text">GITHUB LINKS</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/HeloiseS/hoki">Hoki</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/HeloiseS/hoki_tutorials">Notebooks</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">hoki</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li><strong>Dependencies</strong></li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/manual.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="dependencies">
<h1><strong>Dependencies</strong><a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h1>
<p>Here is a list of dependencies for <cite>hoki</cite>. If you choose to <cite>pip</cite> install it, these will be taken care of automatically.</p>
<ul class="simple">
<li><p>astropy</p></li>
<li><p>numpy</p></li>
<li><p>pandas</p></li>
<li><p>matplotlib</p></li>
<li><p>pyyaml</p></li>
<li><p>wheel</p></li>
<li><p>numba</p></li>
<li><p>emcee</p></li>
<li><p>corner</p></li>
<li><p>scipy</p></li>
<li><p>ppxf</p></li>
</ul>
</div>
<div class="section" id="module-hoki.cmd">
<span id="hoki-cmd"></span><h1><strong>hoki.cmd</strong><a class="headerlink" href="#module-hoki.cmd" title="Permalink to this headline">¶</a></h1>
<p>This module implements the CMD infrastructure</p>
<dl class="py class">
<dt id="hoki.cmd.CMD">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">hoki.cmd.</span></code><code class="sig-name descname"><span class="pre">CMD</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_lim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[-</span> <span class="pre">3,</span> <span class="pre">7]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mag_lim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[-</span> <span class="pre">14,</span> <span class="pre">10]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">res_el</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bpass_version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'v221'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">models_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/home/fste075/BPASS_hoki_dev/bpass-v2.2-newmodels/'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hoki.cmd.CMD" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Colour Magnitude Diagram Object</strong></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> (<em>str</em>) – Location of the file containing the model inputs</p></li>
<li><p><strong>col_lim</strong> (<em>list of 2 integers</em><em> (</em><em>positive</em><em> or </em><em>negative</em><em>)</em><em>, </em><em>optional</em>) – Limits on the colour range of the CMD grid, Default is [-3,7].</p></li>
<li><p><strong>mag_lim</strong> (<em>list of 2 integers</em><em> (</em><em>positive</em><em> or </em><em>negative</em><em>)</em><em>, </em><em>optional</em>) – Limits on the magnitude range of the CMD grid. Default is [-14,10].</p></li>
<li><p><strong>res_el</strong> (<em>float</em><em> or </em><em>int</em><em>, </em><em>optional</em>) – Resolution element of the CMD grid. The resolution element is the same for colour and magnitude.
Default is 0.1.</p></li>
<li><p><strong>bpass_version</strong> (<em>str</em><em>, </em><em>optional</em><em> (</em><em>v221</em><em> or </em><em>v222</em><em>)</em>) – The BPASS version to consider - this changes the “dummy_dictionary” that is loaded from the settings.yaml file
Default = hoki.constants.DEFAULT_BPASS_VERSION</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="hoki.cmd.CMD.self.bpass_input">
<code class="sig-prename descclassname"><span class="pre">self.</span></code><code class="sig-name descname"><span class="pre">bpass_input</span></code><a class="headerlink" href="#hoki.cmd.CMD.self.bpass_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Input file given by the <cite>file</cite> parameter</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="hoki.cmd.CMD.self.col_range">
<code class="sig-prename descclassname"><span class="pre">self.</span></code><code class="sig-name descname"><span class="pre">col_range</span></code><a class="headerlink" href="#hoki.cmd.CMD.self.col_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Colour range spanned by the grid (with <cite>res_el</cite>-sized intervals)</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>numpy.ndarray (1D)</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="hoki.cmd.CMD.self.mag_range">
<code class="sig-prename descclassname"><span class="pre">self.</span></code><code class="sig-name descname"><span class="pre">mag_range</span></code><a class="headerlink" href="#hoki.cmd.CMD.self.mag_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Magnitude range spanned by the grid (with <cite>res_el</cite>-sized intervals)</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>numpy.ndarray (1D)</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="hoki.cmd.CMD.self.grid">
<code class="sig-prename descclassname"><span class="pre">self.</span></code><code class="sig-name descname"><span class="pre">grid</span></code><a class="headerlink" href="#hoki.cmd.CMD.self.grid" title="Permalink to this definition">¶</a></dt>
<dd><p>Colour-Magnitude grid.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>numpy.ndarray (2D)</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="hoki.cmd.CMD.self.path">
<code class="sig-prename descclassname"><span class="pre">self.</span></code><code class="sig-name descname"><span class="pre">path</span></code><a class="headerlink" href="#hoki.cmd.CMD.self.path" title="Permalink to this definition">¶</a></dt>
<dd><p>The absolute path to the stellar models. It is set to <cite>hoki.cconstants.MODELS_PATH</cite> which you can set to
the right path by using <cite>hoki.load.set_models.path()</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="hoki.cmd.CMD.self.t">
<code class="sig-prename descclassname"><span class="pre">self.</span></code><code class="sig-name descname"><span class="pre">t</span></code><a class="headerlink" href="#hoki.cmd.CMD.self.t" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Class attribute</strong> - The time bins in BPASS - note they are in LOG SPACE</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>np.ndarray 1D</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="hoki.cmd.CMD.self.dt">
<code class="sig-prename descclassname"><span class="pre">self.</span></code><code class="sig-name descname"><span class="pre">dt</span></code><a class="headerlink" href="#hoki.cmd.CMD.self.dt" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Class attribute</strong> - Time intervals between bins NOT in log space</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>np.ndarray 1D</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="hoki.cmd.CMD.at_log_age">
<code class="sig-name descname"><span class="pre">at_log_age</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">log_age</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hoki.cmd.CMD.at_log_age" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the HR diagrams at a specific age.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>log_age</strong> (<em>int</em><em> or </em><em>float</em>) – The log(age) of choice.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>The CMD grid</strong></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray 240x100</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="hoki.cmd.CMD.make">
<code class="sig-name descname"><span class="pre">make</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mag_filter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_filters</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hoki.cmd.CMD.make" title="Permalink to this definition">¶</a></dt>
<dd><p>Make the CMD - a.k.a fill the grid</p>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>This may take a few seconds to a minute to run.</p></li>
<li><p>The colour will be mag_filter - filter2</p></li>
<li><p>If you later call CMD.plot() you will obtain a contour plot of mag_filter against mag_filter-filter2</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mag_filter</strong> (<em>str</em>) – Magnitude Axis Filter</p></li>
<li><p><strong>col_filters</strong> (<em>list of 2 str</em>) – The two filters for the colour. The colours will be col_filter[0]-col_filter[1].</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="hoki.cmd.CMD.plot">
<code class="sig-name descname"><span class="pre">plot</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">log_age</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">6.8</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">111</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Greys'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hoki.cmd.CMD.plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots the CMD grid at a particular age</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>log_age</strong> (<em>float</em>) – Must be a valid BPASS time bin</p></li>
<li><p><strong>loc</strong> (<em>3 integers</em><em>, </em><em>optional</em>) – Location of the subplot. Default is 111.</p></li>
<li><p><strong>cmap</strong> (<em>str</em><em>, </em><em>optional</em>) – Colour map for the contours. Default is ‘Greys’
<a href="#id1"><span class="problematic" id="id2">**</span></a>kwargs : matplotlib keyword arguments, optional</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The plot created is returned, so you can add stuff to it, like text or extra data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>matplotlib.axes._subplots.AxesSubplot</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="hoki-constants">
<h1><strong>hoki.constants</strong><a class="headerlink" href="#hoki-constants" title="Permalink to this headline">¶</a></h1>
<p>This module just contains BPASS constants and defines variables used in hoki.</p>
<span class="target" id="module-hoki.constants"></span><div class="section" id="bpass-and-hoki-constants">
<h2>BPASS and hoki constants<a class="headerlink" href="#bpass-and-hoki-constants" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<dl class="simple">
<dt>set_outputs_path(path) :</dt><dd><p>Changes the defaullt path to the BPASS outputs in hoki’s settings.yaml</p>
</dd>
<dt>set_default_bpass_version(version):</dt><dd><p>Changes the path to the stellar models in hoki’s settings.yaml</p>
</dd>
</dl>
</div>
<div class="section" id="variables">
<h2>Variables<a class="headerlink" href="#variables" title="Permalink to this headline">¶</a></h2>
<dl class="simple">
<dt>MODELS_PATH<span class="classifier">str</span></dt><dd><p>Absolute local path to the BPASS stellar library set by the <cite>models_path</cite> string in data/settings.yaml</p>
</dd>
<dt>BPASS_TIME_BINS<span class="classifier">1D np.array</span></dt><dd><p>Center of the log10 age (years) BPASS time grid bins</p>
</dd>
<dt>BPASS_TIME_INTERVALS<span class="classifier">1D np.array</span></dt><dd><p>Edges of the log10 age (years) BPASS time grid bins</p>
</dd>
<dt>BPASS_TIME_WEIGHT_GRID<span class="classifier">2D np.array (100x100)</span></dt><dd><p>2D grid to contain the age (time) weights for the HRDiagrams grids</p>
</dd>
<dt>BPASS_LINEAR_TIME_EDGES<span class="classifier">1D np.array</span></dt><dd><p>Edges of the BPASS age grid bins transformed to linear space</p>
</dd>
<dt>BPASS_LINEAR_TIME_INTERVALS<span class="classifier">1D np.array</span></dt><dd><p>Center of the BPASS age grid bins in linear space</p>
</dd>
<dt>BPASS_METALLICITIES<span class="classifier">list[str]</span></dt><dd><p>Valid BPASS metallicity strings in ascending metallicity order.</p>
</dd>
<dt>BPASS_NUM_METALLICITIES<span class="classifier">1D np.array</span></dt><dd><p>BPASS metallicities (numerical) in ascending metallicit order.</p>
</dd>
<dt>BPASS_METALLICITY_MID_POINTS<span class="classifier">1D np.array</span></dt><dd><p>Numerical BPASS metallicity midpoints</p>
</dd>
<dt>BPASS_EVENT_TYPES<span class="classifier">list</span></dt><dd><p>Transient event types considered in the transient rate model outputs</p>
</dd>
<dt>HOKI_NOW<span class="classifier">float</span></dt><dd><p>Current age of the Universe in years. 13.799e9</p>
</dd>
<dt>BPASS_IMFS<span class="classifier">list[str]</span></dt><dd><p>Valid BPASS imf strings (corresponds to the codes used in the naming of the model output files)</p>
</dd>
<dt>BPASS_WAVELENGTHS<span class="classifier">1D np.array</span></dt><dd><p>BPASS wavelength range covered by the model SEDs</p>
</dd>
<dt>dummy_dict<span class="classifier">dict</span></dt><dd><p>DEPRECATED. Dictionary relating the column names in the hoki dataframes containing the stellar model tables
and the column numbers of the raw text (<em>sneplot</em>) files containing the stellar model tables
keys: column name in the hoki dataframes
values: column number in the sneplot files</p>
</dd>
<dt>dummy_dicts<span class="classifier">dict</span></dt><dd><p>Dictionaries relating the column names in the hoki dataframes containing the stellar model tables
and the column numbers of the raw text (<em>sneplot</em>) files containing the stellar model tables.
<strong>Read from settings.yaml</strong> and contains the keys and values for BPASS v2.2.1 and 2.2.2.
keys: column name in the hoki dataframes
values: column number in the sneplot files</p>
</dd>
<dt>dummy_manual<span class="classifier">dict</span></dt><dd><p>Dictionary containing the names of the columns (keys) in the hoki dataframes that contain the stellar model tables
and their physical meaning in the simulations (values).</p>
</dd>
</dl>
<dl class="py function">
<dt id="hoki.constants.set_default_bpass_version">
<code class="sig-prename descclassname"><span class="pre">hoki.constants.</span></code><code class="sig-name descname"><span class="pre">set_default_bpass_version</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">version</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hoki.constants.set_default_bpass_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Changes the path to the stellar models in hoki’s settings</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>version</strong> (<em>str</em><em>, </em><em>v221</em><em> or </em><em>v222</em>) – Version of BPASS to consider by default.</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>You are going to have to reload hoki for your new default version to be taken into account.</p>
</dd></dl>

<dl class="py function">
<dt id="hoki.constants.set_models_path">
<code class="sig-prename descclassname"><span class="pre">hoki.constants.</span></code><code class="sig-name descname"><span class="pre">set_models_path</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hoki.constants.set_models_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Changes the path to the stellar models in hoki’s settings</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em><em>,</em>) – Absolute path to the top level of the stellar models this could be a directory named something like
bpass-v2.2-newmodels and the next level down should contain ‘NEWBINMODS’ and ‘NEWSINMODS’.</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>You are going to have to reload hoki for your new path to take effect.</p>
</dd></dl>

<dl class="py function">
<dt id="hoki.constants.set_outputs_path">
<code class="sig-prename descclassname"><span class="pre">hoki.constants.</span></code><code class="sig-name descname"><span class="pre">set_outputs_path</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hoki.constants.set_outputs_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Changes the defaullt path to the BPASS outputs in hoki’s settings</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em><em>,</em>) – Absolute path to the folder containing the BPASS outputs.</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>You are going to have to reload hoki for your new path to take effect.</p>
</dd></dl>

</div>
</div>
<div class="section" id="module-hoki.eve">
<span id="hoki-eve"></span><h1><strong>hoki.eve</strong><a class="headerlink" href="#module-hoki.eve" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id3">
<h2>hoki.eve<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<p>Author: H.F.Stevance
email: <a class="reference external" href="mailto:hfstevance&#37;&#52;&#48;gmail&#46;com">hfstevance<span>&#64;</span>gmail<span>&#46;</span>com</a></p>
</div>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>Implements the <cite>Eve</cite> class to be used with EvE.hdf5(alpha) that can be downloaded on Zenodo
<a class="reference external" href="https://zenodo.org/record/7341382#.Y4y9cNLMLLo">https://zenodo.org/record/7341382#.Y4y9cNLMLLo</a>
<strong>NOTE</strong> You can just download the <cite>EvE.hdf5</cite> file - the code that is published with it just for record keeping
as that is the Fortran and python code I used to create the database. If there are issues in the database
and feel like going through the code to look for bugs.</p>
</div>
</div>
<div class="section" id="module-hoki.load">
<span id="hoki-load"></span><h1><strong>hoki.load</strong><a class="headerlink" href="#module-hoki.load" title="Permalink to this headline">¶</a></h1>
<p>This module implements the tools to easily load BPASS data.</p>
<dl class="py function">
<dt id="hoki.load.model_input">
<code class="sig-prename descclassname"><span class="pre">hoki.load.</span></code><code class="sig-name descname"><span class="pre">model_input</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hoki.load.model_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads inputs from one file and put them in a dataframe</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>) – Path to the file containing the input data.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hoki.load.model_output">
<code class="sig-prename descclassname"><span class="pre">hoki.load.</span></code><code class="sig-name descname"><span class="pre">model_output</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hr_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hoki.load.model_output" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads a BPASS output file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – Path to the file containing the target data.</p></li>
<li><p><strong>hr_type</strong> (<em>str</em><em>, </em><em>optional</em>) – Type of HR diagram to load: ‘TL’, ‘Tg’ or ‘TTG’.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>Output Data</strong></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame or hoki.hrdiagrams.HRDiagrams object</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hoki.load.set_models_path">
<code class="sig-prename descclassname"><span class="pre">hoki.load.</span></code><code class="sig-name descname"><span class="pre">set_models_path</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hoki.load.set_models_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Changes the path to the stellar models in hoki’s settings</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em><em>,</em>) – Absolute path to the top level of the stellar models this could be a directory named something like
bpass-v2.2-newmodels and the next level down should contain ‘NEWBINMODS’ and ‘NEWSINMODS’.</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>You are going to have to reload hoki for your new path to take effect.</p>
</dd></dl>

<dl class="py function">
<dt id="hoki.load.unpickle">
<code class="sig-prename descclassname"><span class="pre">hoki.load.</span></code><code class="sig-name descname"><span class="pre">unpickle</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hoki.load.unpickle" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract pickle files</p>
</dd></dl>

</div>
<div class="section" id="module-hoki.hrdiagrams">
<span id="hoki-hrdiagrams"></span><h1><strong>hoki.hrdiagrams</strong><a class="headerlink" href="#module-hoki.hrdiagrams" title="Permalink to this headline">¶</a></h1>
<p>This module implements the HR diagram infrastructure.</p>
<dl class="py class">
<dt id="hoki.hrdiagrams.HRDiagram">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">hoki.hrdiagrams.</span></code><code class="sig-name descname"><span class="pre">HRDiagram</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">high_H_input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">medium_H_input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">low_H_input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hr_type</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hoki.hrdiagrams.HRDiagram" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>A class containing the HR diagram data produced by BPASS.</strong></p>
<p>This class is called by the functions hrTL(), hrTg() and hrTTG() in hoki.load and users should
not need to create an HRDiagram object themselves.</p>
<p>For more details on the BPASS outputs - and therefore why the data structure is as it is -
please refer to the manual:
<a class="reference external" href="https://bpass.auckland.ac.nz/8/files/bpassv2_1_manual_accessible_version.pdf">https://bpass.auckland.ac.nz/8/files/bpassv2_1_manual_accessible_version.pdf</a></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p><strong>HRDiagram supports indexing.</strong> The indexed array is a 51x100x100 np.array that stacked the time weighted arrays</p></li>
</ul>
<p>corresponding to the 3 different abundances.</p>
<ul class="simple">
<li><p>Initialisation from a text file is done through the hoki.load functions</p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>high_H_input</strong> (<em>np.ndarray with shape</em><em> (</em><em>51x100x100</em><em>)</em>) – This inputs the HR diagrams corresponding to a hydrogen abundance n1 &gt; 0.4.</p></li>
<li><p><strong>medium_H_input</strong> (<em>np.ndarray with shape</em><em> (</em><em>51x100x100</em><em>)</em>) – This inputs the HR diagrams corresponding to a hydrogen abundance E-3 &lt; n1 &lt; 0.4.</p></li>
<li><p><strong>low_H_input</strong> (<em>np.ndarray with shape</em><em> (</em><em>51x100x100</em><em>)</em>) – This inputs the HR diagrams corresponding to a hydrogen abundance n1 &lt; E-3.</p></li>
<li><p><strong>hr_type</strong> (<em>str - Valid options are 'TL'</em><em> , </em><em>'Tg'</em><em>, </em><em>'TTG'</em>) – This tells the class what type of HR diagrams are being given. For more details on what
the 3 options mean, consult the BPASS manual section on HR diagram isocontours.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="hoki.hrdiagrams.HRDiagram.self.high_H">
<code class="sig-prename descclassname"><span class="pre">self.</span></code><code class="sig-name descname"><span class="pre">high_H</span></code><a class="headerlink" href="#hoki.hrdiagrams.HRDiagram.self.high_H" title="Permalink to this definition">¶</a></dt>
<dd><p>HR diagrams for 51 time bins with a hydrogen abundance n1 &gt; 0.4. Time weighted.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>np.ndarray (51x100x100)</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="hoki.hrdiagrams.HRDiagram.self.medium_H">
<code class="sig-prename descclassname"><span class="pre">self.</span></code><code class="sig-name descname"><span class="pre">medium_H</span></code><a class="headerlink" href="#hoki.hrdiagrams.HRDiagram.self.medium_H" title="Permalink to this definition">¶</a></dt>
<dd><p>HR diagrams for 51 time bins with a hydrogen abundance E-3 &lt; n1 &lt; 0.4. Time weighted.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>np.ndarray (51x100x100)</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="hoki.hrdiagrams.HRDiagram.self.low_H">
<code class="sig-prename descclassname"><span class="pre">self.</span></code><code class="sig-name descname"><span class="pre">low_H</span></code><a class="headerlink" href="#hoki.hrdiagrams.HRDiagram.self.low_H" title="Permalink to this definition">¶</a></dt>
<dd><p>HR diagrams for 51 time bins with a hydrogen abundance n1 &lt; E-3. Time weighted.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>np.ndarray (51x100x100)</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="hoki.hrdiagrams.HRDiagram.self.type">
<code class="sig-prename descclassname"><span class="pre">self.</span></code><code class="sig-name descname"><span class="pre">type</span></code><a class="headerlink" href="#hoki.hrdiagrams.HRDiagram.self.type" title="Permalink to this definition">¶</a></dt>
<dd><p>Type of HR diagram: TL, Tg or TTG</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="hoki.hrdiagrams.HRDiagram.self.high_H_not_weighted">
<code class="sig-prename descclassname"><span class="pre">self.</span></code><code class="sig-name descname"><span class="pre">high_H_not_weighted</span></code><a class="headerlink" href="#hoki.hrdiagrams.HRDiagram.self.high_H_not_weighted" title="Permalink to this definition">¶</a></dt>
<dd><p>HR diagrams for 51 time bins with a hydrogen abundance n1 &gt; 0.4.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>np.ndarray (51x100x100)</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="hoki.hrdiagrams.HRDiagram.self.medium_H_not_weighted">
<code class="sig-prename descclassname"><span class="pre">self.</span></code><code class="sig-name descname"><span class="pre">medium_H_not_weighted</span></code><a class="headerlink" href="#hoki.hrdiagrams.HRDiagram.self.medium_H_not_weighted" title="Permalink to this definition">¶</a></dt>
<dd><p>HR diagrams for 51 time bins with a hydrogen abundance E-3 &lt; n1 &lt; 0.4.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>np.ndarray (51x100x100)</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="hoki.hrdiagrams.HRDiagram.self.low_H_not_weighted">
<code class="sig-prename descclassname"><span class="pre">self.</span></code><code class="sig-name descname"><span class="pre">low_H_not_weighted</span></code><a class="headerlink" href="#hoki.hrdiagrams.HRDiagram.self.low_H_not_weighted" title="Permalink to this definition">¶</a></dt>
<dd><p>HR diagrams for 51 time bins with a hydrogen abundance n1 &lt; E-3.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>np.ndarray (51x100x100)</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="hoki.hrdiagrams.HRDiagram.self._all_H">
<code class="sig-prename descclassname"><span class="pre">self.</span></code><code class="sig-name descname"><span class="pre">_all_H</span></code><a class="headerlink" href="#hoki.hrdiagrams.HRDiagram.self._all_H" title="Permalink to this definition">¶</a></dt>
<dd><p>HR diagrams for 51 time bins - all hydrogen abundances stacked. This attribute is private
because it can simply be called using the indexing capabilities of the class.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>np.ndarray (51x100x100)</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="hoki.hrdiagrams.HRDiagram.self.high_H_stacked">
<code class="sig-prename descclassname"><span class="pre">self.</span></code><code class="sig-name descname"><span class="pre">high_H_stacked</span></code><a class="headerlink" href="#hoki.hrdiagrams.HRDiagram.self.high_H_stacked" title="Permalink to this definition">¶</a></dt>
<dd><p>HR diagram stacked for a given age range - hydrogen abundance n1 &gt; 0.4. None before calling
self.stack()</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>np.ndarray (51x100x100)</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="hoki.hrdiagrams.HRDiagram.self.medium_H_stacked">
<code class="sig-prename descclassname"><span class="pre">self.</span></code><code class="sig-name descname"><span class="pre">medium_H_stacked</span></code><a class="headerlink" href="#hoki.hrdiagrams.HRDiagram.self.medium_H_stacked" title="Permalink to this definition">¶</a></dt>
<dd><p>HR diagram stacked for a given age range - hydrogen abundance E-3 &lt; n1 &lt; 0.4. None before
calling self.stack()</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>np.ndarray (51x100x100)</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="hoki.hrdiagrams.HRDiagram.self.low_H_stacked">
<code class="sig-prename descclassname"><span class="pre">self.</span></code><code class="sig-name descname"><span class="pre">low_H_stacked</span></code><a class="headerlink" href="#hoki.hrdiagrams.HRDiagram.self.low_H_stacked" title="Permalink to this definition">¶</a></dt>
<dd><p>HR diagram stacked for a given age range - hydrogen abundance E-3 &gt; n1. None before calling
self.stack()</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>np.ndarray (51x100x100)</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="hoki.hrdiagrams.HRDiagram.self.all_stacked">
<code class="sig-prename descclassname"><span class="pre">self.</span></code><code class="sig-name descname"><span class="pre">all_stacked</span></code><a class="headerlink" href="#hoki.hrdiagrams.HRDiagram.self.all_stacked" title="Permalink to this definition">¶</a></dt>
<dd><p>HR diagram stacked for a given age range - all abundances added up. None before calling
self.stack()</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>np.ndarray (51x100x100)</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="hoki.hrdiagrams.HRDiagram.self.t">
<code class="sig-prename descclassname"><span class="pre">self.</span></code><code class="sig-name descname"><span class="pre">t</span></code><a class="headerlink" href="#hoki.hrdiagrams.HRDiagram.self.t" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Class attribute</strong> - The time bins in BPASS - note they are in LOG SPACE</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>np.ndarray 1D</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="hoki.hrdiagrams.HRDiagram.self.dt">
<code class="sig-prename descclassname"><span class="pre">self.</span></code><code class="sig-name descname"><span class="pre">dt</span></code><a class="headerlink" href="#hoki.hrdiagrams.HRDiagram.self.dt" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Class attribute</strong> - Time intervals between bins NOT in log space</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>np.ndarray 1D</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="hoki.hrdiagrams.HRDiagram.at_log_age">
<code class="sig-name descname"><span class="pre">at_log_age</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">log_age</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hoki.hrdiagrams.HRDiagram.at_log_age" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the HR diagrams at a specific age.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>log_age</strong> (<em>int</em><em> or </em><em>float</em>) – The log(age) of choice.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>[0] : Stack of all the abundances</p></li>
<li><p>[1] : High hydrogen abundance n1&gt;0.4</p></li>
<li><p>[2] : Medium hydrogen abundance (E-3 &lt; n1 &lt; 0.4)</p></li>
<li><p>[3] : Low hydrogen abundance (n1 &lt; E-3)</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Tuple of 4 np.ndarrays (100x100)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="hoki.hrdiagrams.HRDiagram.plot">
<code class="sig-name descname"><span class="pre">plot</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">log_age</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">age_range</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">abundances</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(1,</span> <span class="pre">1,</span> <span class="pre">1)</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hoki.hrdiagrams.HRDiagram.plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots the HR Diagram - calls hoki.hrdiagrams.plot_hrdiagram()</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>log_age</strong> (<em>int</em><em> or </em><em>float</em><em>, </em><em>optional</em>) – Log(age) at which to plot the HRdiagram.</p></li>
<li><p><strong>age_range</strong> (<em>tuple</em><em> or </em><em>list of 2 ints</em><em> or </em><em>floats</em><em>, </em><em>optional</em>) – Age range within which you want to plot the HR diagram</p></li>
<li><p><strong>abundances</strong> (<em>tuple</em><em> or </em><em>list of 3 ints</em><em>, </em><em>zeros</em><em> or </em><em>ones</em><em>, </em><em>optional</em>) – This turns on or off the inclusion of the abundances. The corresponding abundances are:
(n1 &gt; 0.4, E-3 &lt; n1 &lt; 0.4, E-3&gt;n1). A 1 means a particular abundance should be included,
a 0 means it will be ignored. Default is (1,1,1), meaning all abundances are plotted.
Note that (0,0,0) is not valid and will return and assertion error.</p></li>
<li><p><strong>**kwargs</strong> (<em>matplotlib keyword arguments</em><em>, </em><em>optional</em>) – </p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>If you give both an age and an age range, the age range will take precedent and be plotted.
You will get a warning if that happens though.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The plot created is returned, so you can add stuff to it, like text or extra data.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>matplotlib.axes._subplots.AxesSubplot</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="hoki.hrdiagrams.HRDiagram.stack">
<code class="sig-name descname"><span class="pre">stack</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">log_age_min</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_age_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hoki.hrdiagrams.HRDiagram.stack" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a stack of HR diagrams within a range of ages</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>log_age_min</strong> (<em>int</em><em> or </em><em>float</em><em>, </em><em>optional</em>) – Minimum log(age) to stack</p></li>
<li><p><strong>log_age_max</strong> (<em>int</em><em> or </em><em>float</em><em>, </em><em>optional</em>) – Maximum log(age) to stack</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>This method stores the stacked values in the class attributes self.high_H_stacked,
self.medium_H_stacked, self.low_H_stacked and self.all_stacked.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="hoki.hrdiagrams.plot_hrdiagram">
<code class="sig-prename descclassname"><span class="pre">hoki.hrdiagrams.</span></code><code class="sig-name descname"><span class="pre">plot_hrdiagram</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">single_hr_grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'TL'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">111</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Greys'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hoki.hrdiagrams.plot_hrdiagram" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots an HR diagram with a contour plot</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>single_hr_grid</strong> (<em>np.ndarray</em><em> (</em><em>100x100</em><em>)</em>) – One HR diagram grid.</p></li>
<li><p><strong>kind</strong> (<em>str</em><em>, </em><em>optional</em>) – Type of HR diagram: ‘TL’, ‘Tg’, or ‘TTG’. Default is ‘TL’.</p></li>
<li><p><strong>loc</strong> (<em>int - 3 digits</em><em>, </em><em>optional</em>) – Location to parse plt.subplot(). The Default is 111, to make only one plot.</p></li>
<li><p><strong>cmap</strong> (<em>str</em><em>, </em><em>optional</em>) – The matplotlib colour map to use. Default is ‘RdGy’.</p></li>
<li><p><strong>kwargs</strong> (<em>matplotlib key word arguments to parse</em>) – </p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The default levels are defined such that they show the maximum value, then a 10th, then a 100th,
etc… down to the minimum level. You can also use the “levels” keyword of the contour function
to choose the number of levels you want (but them matplotlib will arbitrarily define where the
levels fall).</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The plot created is returned, so you can add stuff to it, like text or extra data.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>matplotlib.axes._subplots.AxesSubplot</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-hoki.age.wizard">
<span id="hoki-age"></span><h1><strong>hoki.age</strong><a class="headerlink" href="#module-hoki.age.wizard" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt id="hoki.age.wizard.AgeWizard">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">hoki.age.wizard.</span></code><code class="sig-name descname"><span class="pre">AgeWizard</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obs_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nsamples</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hoki.age.wizard.AgeWizard" title="Permalink to this definition">¶</a></dt>
<dd><p>AgeWizard object</p>
<dl class="py method">
<dt id="hoki.age.wizard.AgeWizard.calculate_p_given_age_range">
<code class="sig-name descname"><span class="pre">calculate_p_given_age_range</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">age_range</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hoki.age.wizard.AgeWizard.calculate_p_given_age_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the probability that each source has age within age_range</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>age_range</strong> (<em>list</em><em> or </em><em>tuple of 2 values</em>) – Minimum and Maximum age to consider (inclusive).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.array containing the probabilities.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="hoki.age.wizard.AgeWizard.most_likely_age">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">most_likely_age</span></code><a class="headerlink" href="#hoki.age.wizard.AgeWizard.most_likely_age" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds  the most likely age by finding the max value in self.calculate_sample_pdf</p>
</dd></dl>

<dl class="py method">
<dt id="hoki.age.wizard.AgeWizard.most_likely_ages">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">most_likely_ages</span></code><a class="headerlink" href="#hoki.age.wizard.AgeWizard.most_likely_ages" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds the most likely ages for all the sources given in the obs_df DataFrame.</p>
</dd></dl>

</dd></dl>

<span class="target" id="module-hoki.age.utils"></span><dl class="py function">
<dt id="hoki.age.utils.calculate_distributions">
<code class="sig-prename descclassname"><span class="pre">hoki.age.utils.</span></code><code class="sig-name descname"><span class="pre">calculate_distributions</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obs_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hoki.age.utils.calculate_distributions" title="Permalink to this definition">¶</a></dt>
<dd><p>Given observations and an HR Diagram, calculates the distribution across ages (not normalised)
Note to self: KEEP THIS I NEED IT</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obs_df</strong> (<em>pandas.DataFrame</em>) – Observational data. MUST contain a logT and logL column.</p></li>
<li><p><strong>model</strong> (<em>hoki.hrdiagrams.HRDiagrams</em><em> or </em><a class="reference internal" href="#hoki.cmd.CMD" title="hoki.cmd.CMD"><em>hoki.cmd.CMD</em></a>) – BPASS HRDiagram or CMD</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Age Probability Distribution Functions in a pandas.DataFrame.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hoki.age.utils.calculate_individual_pdfs">
<code class="sig-prename descclassname"><span class="pre">hoki.age.utils.</span></code><code class="sig-name descname"><span class="pre">calculate_individual_pdfs</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obs_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nsamples</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hoki.age.utils.calculate_individual_pdfs" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the individual age PDFs for each star</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obs_df</strong> (<em>pandas.DataFrame</em>) – Observational data. MUST contain a logT and logL column (for HRD comparison) or a col and mag column
(for CMD comparison)</p></li>
<li><p><strong>model</strong> (<em>str</em><em> or </em><em>hoki.hrdiagrams.HRDiagrams</em><em>(</em><em>) </em><a class="reference internal" href="#hoki.cmd.CMD" title="hoki.cmd.CMD"><em>hoki.cmd.CMD</em></a><em>(</em><em>)</em>) – Location of the modeled HRD or CMD. This can be an already instanciated HRDiagram or CMD() object, or a
path to an HR Diagram file or a pickled CMD.</p></li>
<li><p><strong>nsamples</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of times each data point should be sampled from its error distribution. Default is 100.
This only matters if you are taking errors into account.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hoki.age.utils.calculate_p_given_age_range">
<code class="sig-prename descclassname"><span class="pre">hoki.age.utils.</span></code><code class="sig-name descname"><span class="pre">calculate_p_given_age_range</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pdfs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">age_range</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hoki.age.utils.calculate_p_given_age_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the probability that each source has age within age_range</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pdfs</strong> (<em>pandas.DataFrame</em>) – Age Probability Distributions Functions</p></li>
<li><p><strong>age_range</strong> (<em>list</em><em> or </em><em>tuple of 2 values</em>) – Minimum and Maximum age to consider (inclusive).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.array containing the probabilities.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hoki.age.utils.calculate_sample_pdf">
<code class="sig-prename descclassname"><span class="pre">hoki.age.utils.</span></code><code class="sig-name descname"><span class="pre">calculate_sample_pdf</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">distributions_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">not_you</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hoki.age.utils.calculate_sample_pdf" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds together all the columns in given in DataFrame apart from the “time_bins” column</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>distributions_df</strong> (<em>pandas.DataFrame</em>) – DataFrame containing probability distribution functions</p></li>
<li><p><strong>not_you</strong> (<em>list</em><em>, </em><em>optional</em>) – List of the column names to ignore. Default is None so all the pdfs are multiplied</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Combined Probability Distribution Function in a pandas.DataFrame.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hoki.age.utils.find_coordinates">
<code class="sig-prename descclassname"><span class="pre">hoki.age.utils.</span></code><code class="sig-name descname"><span class="pre">find_coordinates</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obs_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hoki.age.utils.find_coordinates" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds the coordinates on a BPASS CMD or HRD that correspond to the given observations</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obs_df</strong> (<em>pandas.DataFrame</em>) – Observational data. MUST contain a logT and logL column (for HRD comparison) or a col and mag column
(for CMD comparison)</p></li>
<li><p><strong>model</strong> (<em>str</em><em> or </em><em>hoki.hrdiagrams.HRDiagrams</em><em>(</em><em>) </em><a class="reference internal" href="#hoki.cmd.CMD" title="hoki.cmd.CMD"><em>hoki.cmd.CMD</em></a><em>(</em><em>)</em>) – Location of the modeled HRD or CMD. This can be an already instanciated HRDiagram or CMD() object, or a
path to an HR Diagram file or a pickled CMD.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hoki.age.utils.fit_lognorm_params">
<code class="sig-prename descclassname"><span class="pre">hoki.age.utils.</span></code><code class="sig-name descname"><span class="pre">fit_lognorm_params</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">c</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">m</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">p</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">percentiles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">array([0.16,</span> <span class="pre">0.5,</span> <span class="pre">0.84])</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">p0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hoki.age.utils.fit_lognorm_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Fits the CDF of a log normal distribution to the percentiles and offset values of a parameter</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>c</strong> (<em>numpy.array</em>) – 50th percentile, a.k.a median (c for center)</p></li>
<li><p><strong>m</strong> (<em>numpy.array</em>) – Lower error - 1 sigma (m for minus, because this value would be subtracted to the median to retrieve
the Xth percentile). Please provide the absolute value.</p></li>
<li><p><strong>p</strong> (<em>numpy.array</em>) – Upper error - 1 sigma (p for plus, because these values would be added to the median to create
the Yth percentile)</p></li>
<li><p><strong>percentiles</strong> (<em>numpy.array</em>) – </p></li>
<li><p><strong>p0</strong> (<em>numpy.array</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hoki.age.utils.normalise_1d">
<code class="sig-prename descclassname"><span class="pre">hoki.age.utils.</span></code><code class="sig-name descname"><span class="pre">normalise_1d</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">distribution</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">crop_the_future</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hoki.age.utils.normalise_1d" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple function that devides by the sum of the 1D array or DataFrame given.</p>
</dd></dl>

</div>
<div class="section" id="module-hoki.csp.csp">
<span id="hoki-csp"></span><h1><strong>hoki.csp</strong><a class="headerlink" href="#module-hoki.csp.csp" title="Permalink to this headline">¶</a></h1>
<p>Author: Max Briel</p>
<p>Parent class of a complex stellar population</p>
<dl class="py class">
<dt id="hoki.csp.csp.CSP">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">hoki.csp.csp.</span></code><code class="sig-name descname"><span class="pre">CSP</span></code><a class="headerlink" href="#hoki.csp.csp.CSP" title="Permalink to this definition">¶</a></dt>
<dd><p>Complex Stellar Population class</p>
<p class="rubric">Notes</p>
<p>Parent class for <cite>CSPEventRate</cite> and <cite>CSPSpectra</cite></p>
<dl class="py attribute">
<dt id="hoki.csp.csp.CSP.now">
<code class="sig-name descname"><span class="pre">now</span></code><a class="headerlink" href="#hoki.csp.csp.CSP.now" title="Permalink to this definition">¶</a></dt>
<dd><p>The age of the universe.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><cite>float</cite></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<span class="target" id="module-hoki.csp.eventrate"></span><p>Author: Max Briel</p>
<p>Object to calculate the event rate at a certain
lookback time or over binned lookback time</p>
<dl class="py class">
<dt id="hoki.csp.eventrate.CSPEventRate">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">hoki.csp.eventrate.</span></code><code class="sig-name descname"><span class="pre">CSPEventRate</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binary</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hoki.csp.eventrate.CSPEventRate" title="Permalink to this definition">¶</a></dt>
<dd><p>Object to calculate event rates using complex stellar formation histories.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_path</strong> (<cite>str</cite>) – Folder containing the BPASS data files (in units #events per bin)</p></li>
<li><p><strong>imf</strong> (<cite>str</cite>) – The BPASS identifier for the IMF of the BPASS event rate files.
The accepted IMF identifiers are:
- <cite>“imf_chab100”</cite>
- <cite>“imf_chab300”</cite>
- <cite>“imf100_100”</cite>
- <cite>“imf100_300”</cite>
- <cite>“imf135_100”</cite>
- <cite>“imf135_300”</cite>
- <cite>“imfall_300”</cite>
- <cite>“imf170_100”</cite>
- <cite>“imf170_300”</cite></p></li>
<li><p><strong>binary</strong> (<cite>bool</cite>) – If <cite>True</cite>, loads the binary files. Otherwise, just loads single stars.
Default=True</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="hoki.csp.eventrate.CSPEventRate.bpass_rates">
<code class="sig-name descname"><span class="pre">bpass_rates</span></code><a class="headerlink" href="#hoki.csp.eventrate.CSPEventRate.bpass_rates" title="Permalink to this definition">¶</a></dt>
<dd><p>The BPASS delay time distributions in #events/yr/<a href="#id14"><span class="problematic" id="id15">M_</span></a>odot per metallicity.
Usage: rates.loc[log_age, (type, metallicity)]</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This dataframe has the following structure.
The index is the log_age as a float.
The column is a <cite>pandas.MultiIndex</cite> with the event types
(level=0, <cite>str</cite>) and the metallicity (level=1, <cite>float</cite>)</p>
<p><a href="#id6"><span class="problematic" id="id7">|Event Type | Ia      | IIP      |  ... | PISNe | low_mass |
|Metallicity|</span></a> 0.00001 | 0.00001  |  … |  0.04 |    0.04  |
| log_age   <a href="#id8"><span class="problematic" id="id9">|---------|</span></a>———-<a href="#id10"><span class="problematic" id="id11">|------|</span></a>——-<a href="#id12"><span class="problematic" id="id13">|----------|</span></a>
|    6.0    |
|    …    |                  Event Rate values
|    11.0   |</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><cite>pandas.DataFrame</cite> (51, (8, 13))</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="hoki.csp.eventrate.CSPEventRate.at_time">
<code class="sig-name descname"><span class="pre">at_time</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">SFH</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ZEH</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_type_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample_rate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hoki.csp.eventrate.CSPEventRate.at_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the event rates at lookback time <cite>t0</cite> for functions as input.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>SFH</strong> (<cite>python callable</cite>,) – <dl class="simple">
<dt><cite>hoki.csp.sfh.SFH</cite>,</dt><dd><p><cite>list(hoki.csp.sfh.SFH, )</cite>,
<cite>list(callable, )</cite></p>
</dd>
</dl>
<p>SFH can be the following things:
- A python callable (function) which takes the lookback time and</p>
<blockquote>
<div><p>returns the stellar formation rate in units <a href="#id16"><span class="problematic" id="id17">M_</span></a>odot per yr at
the given time.</p>
</div></blockquote>
<ul>
<li><p>A list of python callables with the above requirement.</p></li>
<li><p>A <cite>hoki.csp.sfh.SFH</cite> object.</p></li>
<li><p>A list of <cite>hoki.csp.sfh.SFH</cite> objects.</p></li>
</ul>
</p></li>
<li><p><strong>ZEH</strong> (callable, <cite>list(callable, )</cite>) – <p>ZEH can be the following things:
- A python callable (function) which takes the lookback time and</p>
<blockquote>
<div><p>returns the metallicity at the given time.</p>
</div></blockquote>
<ul>
<li><p>A list of python callables with the above requirement.</p></li>
</ul>
</p></li>
<li><p><strong>event_type_list</strong> (<cite>list(str, )</cite>) – A list of BPASS event types.
The available types are:
- Ia
- IIP
- II
- Ib
- Ic
- LGRB
- PISNe
- low_mass</p></li>
<li><p><strong>t0</strong> (<cite>float</cite>) – The moment in lookback time, where to calculate the the event rate</p></li>
<li><p><strong>sample_rate</strong> (<cite>int</cite>) – The number of samples to take from the SFH and metallicity evolutions.
Default = 1000.
If a negative value is given, the BPASS binning to calculate
the event rates.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Returns a <cite>numpy.ndarray</cite> containing the event rates for each sfh
and metallicity pair (N) and event type (M) at the requested lookback time.
Usage: event_rates[1][“Ia”]
(Gives the Ia event rates for the second sfh and metallicity history pair)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><cite>numpy.ndarray</cite> (N, M) [nr_sfh, nr_event_types]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="hoki.csp.eventrate.CSPEventRate.grid_at_time">
<code class="sig-name descname"><span class="pre">grid_at_time</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">SFH_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_points</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_type_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample_rate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hoki.csp.eventrate.CSPEventRate.grid_at_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates event rates for the given BPASS event types for the
given SFH in a 2D grid (over BPASS metallicity and time_points)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>SFH_list</strong> (<cite>numpy.ndarray</cite> (N, 13, M) [nr_sfh, metalllicities, time_points]) – A list of N stellar formation histories divided into BPASS metallicity bins,
over lookback time points with length M.</p></li>
<li><p><strong>time_points</strong> (<cite>numpy.ndarray</cite> (M)) – An array of the lookback time points of length N2 at which the SFH is given in the SFH_list.</p></li>
<li><p><strong>event_type_list</strong> (<cite>list(str, )</cite>) – <p>A list of BPASS event types.</p>
<p>The available types are:
- Ia
- IIP
- II
- Ib
- Ic
- LGRB
- PISNe
- low_mass</p>
</p></li>
<li><p><strong>t0</strong> (<cite>float</cite>) – The moment in lookback time, where to calculate the the event rate</p></li>
<li><p><strong>sample_rate</strong> (<cite>int</cite>) – The number of samples to take from the SFH and metallicity evolutions.
Default = 1000.
If a negative value is given, the BPASS binning to calculate
the event rates.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>event_rate_list</strong> – A numpy array containing the event rates per SFH (N),
per metallicity (13), per event type (nr_events) at t0.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><cite>numpy.ndarray</cite> (N, 13, nr_events)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="hoki.csp.eventrate.CSPEventRate.grid_over_time">
<code class="sig-name descname"><span class="pre">grid_over_time</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">SFH_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_points</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_type_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nr_time_bins</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_time_edges</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hoki.csp.eventrate.CSPEventRate.grid_over_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates event rates for the given BPASS event types for the
given Stellar Formation Histories</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>SFH_list</strong> (<cite>numpy.ndarray</cite> (N, 13, M) [nr_sfh, metalllicities, time_points]) – A list of N stellar formation histories divided into BPASS metallicity bins,
over lookback time points with length M.</p></li>
<li><p><strong>time_points</strong> (<cite>numpy.ndarray</cite> (M)) – An array of the lookback time points of length N2 at which the SFH is given in the SFH_list.</p></li>
<li><p><strong>event_type_list</strong> (<cite>list(str, )</cite>) – <p>A list of BPASS event types.</p>
<p>The available types are:
- Ia
- IIP
- II
- Ib
- Ic
- LGRB
- PISNe
- low_mass</p>
</p></li>
<li><p><strong>nr_time_bins</strong> (<cite>int</cite>) – The number of time bins in which to divide the lookback time</p></li>
<li><p><strong>return_time_edges</strong> (<cite>bool</cite>) – If <cite>True</cite>, also returns the edges of the lookback time bins.
Default=False</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p><strong>event_rate_list</strong> –                               ((N, 13, nr_events, nr_time_bins), time_edges)
A numpy array containing the event rates per galaxy (N),
per metallicity (13), per event type (nr_events) and per time bins (nr_time_bins).</p>
<p>If <cite>return_time_edges=True</cite>, returns a numpy array containing the event
rates and the time edges, eg. <cite>out[0]=event_rates_list</cite> <cite>out[1]=time_edges</cite>.</p>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><cite>numpy.ndarray</cite> (N, 13, nr_events, nr_time_bins)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="hoki.csp.eventrate.CSPEventRate.over_time">
<code class="sig-name descname"><span class="pre">over_time</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">SFH</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ZEH</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_type_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nr_time_bins</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_time_edges</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hoki.csp.eventrate.CSPEventRate.over_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the event rates over lookback time for functions as input.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>SFH</strong> (<cite>python callable</cite>,) – <dl class="simple">
<dt><cite>hoki.csp.sfh.SFH</cite>,</dt><dd><p><cite>list(hoki.csp.sfh.SFH, )</cite>,
<cite>list(callable, )</cite></p>
</dd>
</dl>
<p>SFH can be the following things:
- A python callable (function) which takes the lookback time and</p>
<blockquote>
<div><p>returns the stellar formation rate in units <a href="#id18"><span class="problematic" id="id19">M_</span></a>odot per yr at
the given time.</p>
</div></blockquote>
<ul>
<li><p>A list of python callables with the above requirement.</p></li>
<li><p>A <cite>hoki.csp.sfh.SFH</cite> object.</p></li>
<li><p>A list of <cite>hoki.csp.sfh.SFH</cite> objects.</p></li>
</ul>
</p></li>
<li><p><strong>ZEH</strong> (callable, <cite>list(callable, )</cite>) – <p>ZEH can be the following thins:
- A python callable (function) which takes the lookback time and</p>
<blockquote>
<div><p>returns the metallicity at the given time.</p>
</div></blockquote>
<ul>
<li><p>A list of python callables with the above requirement.</p></li>
</ul>
</p></li>
<li><p><strong>event_type_list</strong> (<cite>list(str, )</cite>) – <p>A list of BPASS event types.</p>
<p>The available types are:
- Ia
- IIP
- II
- Ib
- Ic
- LGRB
- PISNe
- low_mass</p>
</p></li>
<li><p><strong>nr_time_bins</strong> (<cite>int</cite>) – The number of bins to split the lookback time into.</p></li>
<li><p><strong>return_time_edges</strong> (<cite>bool</cite>) – If <cite>True</cite>, also returns the edges of the lookback time bins.
Default=False</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>((nr_sfh, nr_event_types, nr_time_bins), nr_time_bins)</p>
<p>The event rates in a 3D matrix with sides, the number of SFH-Z pairs,
the number of events selected, and the number of time bins choosen.</p>
<p>If <cite>return_time_edges=False</cite>, returns a <cite>numpy.ndarray</cite> containing the event
rates.
Usage: event_rates[1][“Ia”][10]</p>
<blockquote>
<div><p>(Gives the Ia event rates in bin number 11 for the second
sfh and metallicity history pair)</p>
</div></blockquote>
<p>If <cite>return_time_edges=True</cite>, returns a numpy array containing the event
rates and the edges, eg. <cite>out[0]=event_rates</cite> <cite>out[1]=time_edges</cite>.</p>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><cite>numpy.ndarray</cite> (nr_sfh, nr_event_types, nr_time_bins),</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<span class="target" id="module-hoki.csp.sfh"></span><p>Authors: Max Briel and Heloise Stevance</p>
<p>Object to contain the stellar formation history.</p>
<dl class="py class">
<dt id="hoki.csp.sfh.SFH">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">hoki.csp.sfh.</span></code><code class="sig-name descname"><span class="pre">SFH</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">time_axis</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sfh_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameters_dict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sfh_arr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hoki.csp.sfh.SFH" title="Permalink to this definition">¶</a></dt>
<dd><p>An object to contain a stellar formation history of a population.</p>
<dl class="py attribute">
<dt id="hoki.csp.sfh.SFH.time_axis">
<code class="sig-name descname"><span class="pre">time_axis</span></code><a class="headerlink" href="#hoki.csp.sfh.SFH.time_axis" title="Permalink to this definition">¶</a></dt>
<dd><p>An array containing the given time points of the stellar formation rate</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>numpy.array</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="hoki.csp.sfh.SFH.mass_per_bin">
<code class="sig-name descname"><span class="pre">mass_per_bin</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">time_edges</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample_rate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">25</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hoki.csp.sfh.SFH.mass_per_bin" title="Permalink to this definition">¶</a></dt>
<dd><p>Gives the mass per bin for the given edges in time.</p>
<dl>
<dt>time_edges<span class="classifier"><cite>numpy.ndarray</cite></span></dt><dd><p>The edges of the bins in which the mass per bin is wanted in yrs.</p>
</dd>
</dl>
<dl class="simple">
<dt><cite>numpy.ndarray</cite></dt><dd><p>The mass per time bin given the time edges.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="hoki.csp.sfh.burst_sfh">
<code class="sig-prename descclassname"><span class="pre">hoki.csp.sfh.</span></code><code class="sig-name descname"><span class="pre">burst_sfh</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">time_bins</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sfr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">burst_time</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hoki.csp.sfh.burst_sfh" title="Permalink to this definition">¶</a></dt>
<dd><p>Burst star formation history</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>time_bins</strong> (<em>list</em><em> or </em><em>numpy.ndarray</em>) – Time bins</p></li>
<li><p><strong>sfr</strong> (<em>int</em><em> or </em><em>float</em>) – Value of the desired star formation rate at the burst time</p></li>
<li><p><strong>burst_time</strong> (<em>int</em><em> or </em><em>float</em>) – Time of the star burst</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Array containing the star formation history corresponding to the given time_bins</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hoki.csp.sfh.constant_sfh">
<code class="sig-prename descclassname"><span class="pre">hoki.csp.sfh.</span></code><code class="sig-name descname"><span class="pre">constant_sfh</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">time_bins</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sfr</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hoki.csp.sfh.constant_sfh" title="Permalink to this definition">¶</a></dt>
<dd><p>Constant star formation history</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>time_bins</strong> (<em>list</em><em> or </em><em>numpy.ndarray</em>) – Time bins</p></li>
<li><p><strong>sfr</strong> (<em>int</em><em> or </em><em>float</em>) – Value of the desired constant star formation rate.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Array containing the star formation history corresponding to the given time_bins</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hoki.csp.sfh.dble_pwr_law">
<code class="sig-prename descclassname"><span class="pre">hoki.csp.sfh.</span></code><code class="sig-name descname"><span class="pre">dble_pwr_law</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">time_bins</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tau</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">factor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hoki.csp.sfh.dble_pwr_law" title="Permalink to this definition">¶</a></dt>
<dd><p>Double Power Law star formation history</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>time_bins</strong> (<em>list</em><em> or </em><em>numpy.ndarray</em>) – Time bins</p></li>
<li><p><strong>tau</strong> (<em>float</em><em> or </em><em>int</em>) – </p></li>
<li><p><strong>alpha</strong> (<em>float</em><em> or </em><em>int</em>) – </p></li>
<li><p><strong>beta</strong> (<em>float</em><em> or </em><em>int</em>) – </p></li>
<li><p><strong>factor</strong> (<em>float</em><em> or </em><em>int</em><em>, </em><em>optional</em>) – Default = 1</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Array containing the star formation history corresponding to the given time_bins</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hoki.csp.sfh.delayed_exp_sfh">
<code class="sig-prename descclassname"><span class="pre">hoki.csp.sfh.</span></code><code class="sig-name descname"><span class="pre">delayed_exp_sfh</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">time_bins</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tau</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">T0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">factor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hoki.csp.sfh.delayed_exp_sfh" title="Permalink to this definition">¶</a></dt>
<dd><p>Delayed exponential star formation history</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>time_bins</strong> (<em>list</em><em> or </em><em>numpy.ndarray</em>) – Time bins</p></li>
<li><p><strong>tau</strong> (<em>float</em><em> or </em><em>int</em>) – </p></li>
<li><p><strong>T0</strong> (<em>float</em><em> or </em><em>int</em>) – </p></li>
<li><p><strong>factor</strong> (<em>float</em><em> or </em><em>int</em><em>, </em><em>optional</em>) – Default = 1</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Array containing the star formation history corresponding to the given time_bins</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hoki.csp.sfh.exp_sfh">
<code class="sig-prename descclassname"><span class="pre">hoki.csp.sfh.</span></code><code class="sig-name descname"><span class="pre">exp_sfh</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">time_bins</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tau</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">T0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">factor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hoki.csp.sfh.exp_sfh" title="Permalink to this definition">¶</a></dt>
<dd><p>Exponential star formation history</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>time_bins</strong> (<em>list</em><em> or </em><em>numpy.ndarray</em>) – Time bins</p></li>
<li><p><strong>tau</strong> (<em>float</em><em> or </em><em>int</em>) – </p></li>
<li><p><strong>T0</strong> (<em>float</em><em> or </em><em>int</em>) – </p></li>
<li><p><strong>factor</strong> (<em>float</em><em> or </em><em>int</em><em>, </em><em>optional</em>) – Default = 1</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Array containing the star formation history corresponding to the given time_bins</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hoki.csp.sfh.lognormal">
<code class="sig-prename descclassname"><span class="pre">hoki.csp.sfh.</span></code><code class="sig-name descname"><span class="pre">lognormal</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">time_bins</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tau</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">T0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">factor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hoki.csp.sfh.lognormal" title="Permalink to this definition">¶</a></dt>
<dd><p>Lognormal star formation history</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>time_bins</strong> (<em>list</em><em> or </em><em>numpy.ndarray</em>) – Time bins</p></li>
<li><p><strong>tau</strong> (<em>float</em><em> or </em><em>int</em>) – </p></li>
<li><p><strong>T0</strong> (<em>float</em><em> or </em><em>int</em>) – </p></li>
<li><p><strong>factor</strong> (<em>float</em><em> or </em><em>int</em><em>, </em><em>optional</em>) – Default = 1</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Array containing the star formation history corresponding to the given time_bins</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hoki.csp.sfh.sfherrormessage">
<code class="sig-prename descclassname"><span class="pre">hoki.csp.sfh.</span></code><code class="sig-name descname"><span class="pre">sfherrormessage</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hoki.csp.sfh.sfherrormessage" title="Permalink to this definition">¶</a></dt>
<dd><p>A decorator to automate a repeated error message.</p>
</dd></dl>

<span class="target" id="module-hoki.csp.utils"></span><p>Author: Max Briel</p>
<p>Utilities to be used in the complex stellar populations module</p>
<dl class="py function">
<dt id="hoki.csp.utils.mass_per_bin">
<code class="sig-prename descclassname"><span class="pre">hoki.csp.utils.</span></code><code class="sig-name descname"><span class="pre">mass_per_bin</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sfh_function</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_edges</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample_rate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">25</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hoki.csp.utils.mass_per_bin" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the mass per bin for the given edges in time</p>
<p class="rubric">Notes</p>
<p>The default <cite>sample_rate</cite> is set to 25 for a untested balance between
speed and accuracy</p>
<dl>
<dt>sfh_function<span class="classifier"><cite>callable</cite></span></dt><dd><p>A python callable (function) giving the stellar formation rate at a
given lookback time.
For faster calculations give a vector optimised function.</p>
</dd>
<dt>time_edges<span class="classifier"><cite>numpy.ndarray</cite></span></dt><dd><p>The edges of the bins in which the mass per bin is wanted in yrs.</p>
</dd>
<dt>sample_rate<span class="classifier"><cite>int</cite></span></dt><dd><p>The number of samples to take to use for the trapezodial integration.
Default = 25</p>
</dd>
</dl>
<dl class="simple">
<dt><cite>numpy.ndarray</cite> [len(time_edges)-1]</dt><dd><p>The mass per time bin.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hoki.csp.utils.metallicity_per_bin">
<code class="sig-prename descclassname"><span class="pre">hoki.csp.utils.</span></code><code class="sig-name descname"><span class="pre">metallicity_per_bin</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Z_function</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_edges</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hoki.csp.utils.metallicity_per_bin" title="Permalink to this definition">¶</a></dt>
<dd><p>Gives the metallicity per bin for the given edges in time.</p>
<dl>
<dt>Z_function<span class="classifier"><cite>function</cite></span></dt><dd><p>A function giving the metallicity history given a lookback time.</p>
</dd>
<dt>time_edges<span class="classifier"><cite>numpy.ndarray</cite></span></dt><dd><p>The edges of the bins in which the mass per bin is wanted in yrs.</p>
</dd>
</dl>
<dl class="simple">
<dt><cite>numpy.ndarray</cite> [len(time_edges)-1]</dt><dd><p>The average metallicity per time bin</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hoki.csp.utils.trapz_loop">
<code class="sig-prename descclassname"><span class="pre">hoki.csp.utils.</span></code><code class="sig-name descname"><span class="pre">trapz_loop</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample_rate</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hoki.csp.utils.trapz_loop" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform a trapezodial integration over subsections of the given arrays.</p>
<p class="rubric">Notes</p>
<p>dp and fp are split into a number of bins [(N-1)/sample_rate].
Each subsection is integrated using the _optimised_trapezodial_rule.
An array containing the integral for each subsection is returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dp</strong> (<cite>numpy.ndarray</cite> (N)) – Time points</p></li>
<li><p><strong>fp</strong> (<cite>numpy.ndarray</cite> (N)) – Function values at the time points</p></li>
<li><p><strong>sample_rate</strong> (<em>int</em>) – The sample rate over which to integrate the values.
(N-1) has to be divisible by <cite>sample_rate</cite></p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An array containing the integrals over bins separated by <cite>sample_rate</cite></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><cite>numpy.ndarray</cite> (N-1)/<cite>sample_rate</cite></p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="hoki-sedfitting">
<h1><strong>hoki.sedfitting</strong><a class="headerlink" href="#hoki-sedfitting" title="Permalink to this headline">¶</a></h1>
<p>Note that the modules kvn and lordcommander will be renamed in v1.7.2</p>
<span class="target" id="module-hoki.sedfitting.lordcommander"></span><dl class="py class">
<dt id="hoki.sedfitting.lordcommander.LordCommander">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">hoki.sedfitting.lordcommander.</span></code><code class="sig-name descname"><span class="pre">LordCommander</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">wl_obs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">norm_fluxes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">norm_noises</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">median_flux_ls</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wl_fits</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kvn</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hoki.sedfitting.lordcommander.LordCommander" title="Permalink to this definition">¶</a></dt>
<dd><p>LordCommander is a pipeline to run the ppxf fits on a whole array of spectra (e.g. galaxy)
It creates a bunch of tables (DataFrames) to store the data and then can save it to HDF5</p>
<dl>
<dt>SCALE_FACTOR:</dt><dd><p>Contains the median of the observed spectra (used for the normalisation)</p>
</dd>
<dt>DYNAMICS:</dt><dd><p>Contains the best dispersion and Line Of Sight Velocity (LOSV)</p>
</dd>
<dt>BEST_FIT:</dt><dd><p>Contains the best fits from ppxf</p>
</dd>
<dt>SFH:</dt><dd><p>Contains the metalicity and ages of each of the templates selected to make the best fit</p>
</dd>
<dt>MATCH_SPECTRA:</dt><dd><p>Contains all the spectra used to create the best fit (that correspond to each row of SFH)</p>
</dd>
<dt>MATCH_APOLY:</dt><dd><p>Contains the additive polynomials needed to make the best fit - may be empty</p>
</dd>
<dt>MATCH_MPOLY:</dt><dd><p>Contains the multiplicative polynomials needed to make the best fit - may be empty</p>
</dd>
<dt>CHI2:</dt><dd><p>Contains the values of chi2 for each best fit</p>
</dd>
<dt>FLAGS:</dt><dd><p>Contains the flags. During the fitting procedure, flags are created when the chi2 value or
dynamical parameters are higher than the median for the whole galaxy.
=&gt; There are flags for deviations by 2, 3 and 5 standard deviations.
The value of the flag is:</p>
<blockquote>
<div><ul class="simple">
<li><p>2,3,5 for the Chi2</p></li>
<li><p>20,30,50 for the LOSV</p></li>
<li><p>200,300,500 for the dispersion.</p></li>
</ul>
</div></blockquote>
<p>So a TOTAL flag with value 553 has a 3 sigma deviation in the Chi2, a 5 sigma diviation in the LOSV
and a 5 sigma deviation in the dispersion.</p>
</dd>
</dl>
<dl class="py method">
<dt id="hoki.sedfitting.lordcommander.LordCommander.run">
<code class="sig-name descname"><span class="pre">run</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">moments</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">degree</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vsyst</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clean</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">goodpixels_func</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reddening</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hoki.sedfitting.lordcommander.LordCommander.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Fits the spectra in a big loop.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start</strong> (<em>list of 2 values</em>) – [LOSV_guess, dispersion_guess]</p></li>
<li><p><strong>moments</strong> (<em>integer</em>) – See ppxf manual</p></li>
<li><p><strong>degree</strong> (<em>integer</em>) – See ppxf manual</p></li>
<li><p><strong>vsyst</strong> (<em>float</em>) – See ppxf manual</p></li>
<li><p><strong>clean</strong> (<em>bool</em>) – Whether to do sigma clipping</p></li>
<li><p><strong>goodpixels_func</strong> (<em>callable</em>) – The function to determine the good pixels. It needs to take in a dictionary that contains they keys:
<cite>flux</cite> and <a href="#id4"><span class="problematic" id="id5">`</span></a>wl`(Might expand that dictionary at a later date if I need more paramters).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="hoki.sedfitting.lordcommander.LordCommander.save">
<code class="sig-name descname"><span class="pre">save</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filepath</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">folder</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hoki.sedfitting.lordcommander.LordCommander.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves data to HDF5 file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filepath</strong> (<em>str</em>) – path to the file</p></li>
<li><p><strong>folder</strong> (<em>str</em>) – path WITHIN the file</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="ModelSearch.html" class="btn btn-neutral float-left" title="Complex Model Search" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2022, heloise stevance.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>